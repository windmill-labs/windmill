---
# WindmillInstance CRD
# Install with: kubectl apply -f crd.yaml
# Or generate from binary: windmill operator crd
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: windmillinstances.windmill.dev
spec:
  group: windmill.dev
  names:
    kind: WindmillInstance
    listKind: WindmillInstanceList
    plural: windmillinstances
    singular: windmillinstance
    shortNames:
      - wmi
  scope: Namespaced
  versions:
    - name: v1alpha1
      served: true
      storage: true
      additionalPrinterColumns:
        - name: Synced
          type: string
          jsonPath: .status.synced
        - name: Last Synced
          type: date
          jsonPath: .status.lastSyncedAt
        - name: Age
          type: date
          jsonPath: .metadata.creationTimestamp
      schema:
        openAPIV3Schema:
          type: object
          properties:
            spec:
              type: object
              properties:
                global_settings:
                  type: object
                  x-kubernetes-preserve-unknown-fields: true
                  description: >-
                    Global settings to sync to the global_settings table.
                    Keys are setting names, values are arbitrary JSON.
                worker_configs:
                  type: object
                  x-kubernetes-preserve-unknown-fields: true
                  description: >-
                    Worker group configs to sync to the config table.
                    Keys are worker group names, stored as worker__<key>.
            status:
              type: object
              properties:
                synced:
                  type: boolean
                message:
                  type: string
                observedGeneration:
                  type: integer
                  format: int64
                lastSyncedAt:
                  type: string
                  format: date-time
      subresources:
        status: {}
