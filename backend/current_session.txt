# AI Executor Structured Output Implementation - Current Session Summary

## Overview
Working on implementing structured output support for AI providers in Windmill's AI executor (`windmill-worker/src/ai_executor.rs`). The goal is to allow users to specify JSON schemas and receive structured responses from both OpenAI and Anthropic models.

## Key Changes Made

### 1. Provider-Specific Structured Output Logic

#### OpenAI Implementation:
- Uses `response_format` with `json_schema` parameter
- Applies strict mode transformations to schema
- Creates `JsonSchemaFormat` with name, schema, and strict flag
- Works with existing OpenAI API format

#### Anthropic Implementation:
- Creates custom tool named "structured_output" 
- Uses the schema as the tool's `input_schema`
- Forces tool usage to get structured JSON response
- Different from OpenAI's approach due to API differences