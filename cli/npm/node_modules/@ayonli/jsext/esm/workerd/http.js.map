{"version":3,"file":"http.js","sources":["../../workerd/http.ts"],"sourcesContent":["import bytes from \"../bytes.ts\";\nimport { Exception } from \"../error.ts\";\nimport { getMIME } from \"../filetype.ts\";\nimport { exists, readDir, readFile } from \"./fs.ts\";\nimport { sha256 } from \"./hash.ts\";\nimport { renderDirectoryPage, withWeb } from \"../http/internal.ts\";\nimport { Server, } from \"../http/server.ts\";\nimport { ifMatch, ifNoneMatch, parseRange } from \"../http/util.ts\";\nimport { as } from \"../object.ts\";\nimport { extname, join, startsWith } from \"../path.ts\";\nimport { readAsArray } from \"../reader.ts\";\nimport { stripStart } from \"../string.ts\";\nimport { WebSocketServer } from \"./ws.ts\";\nimport runtime from \"../runtime.ts\";\nexport { withWeb };\nexport * from \"../http/util.ts\";\nexport async function etag(data) {\n    var _a;\n    if (typeof data === \"string\" || data instanceof Uint8Array) {\n        if (!data.length) {\n            // a short circuit for zero length entities\n            return `0-47DEQpj8HBSa+/TImW+5JCeuQeR`;\n        }\n        if (typeof data === \"string\") {\n            data = bytes(data);\n        }\n        const hash = await sha256(data, \"base64\");\n        return `${data.length.toString(16)}-${hash.slice(0, 27)}`;\n    }\n    const mtime = (_a = data.mtime) !== null && _a !== void 0 ? _a : new Date();\n    const hash = await sha256(mtime.toISOString(), \"base64\");\n    return `${data.size.toString(16)}-${hash.slice(0, 27)}`;\n}\nexport async function randomPort(prefer = undefined) {\n    void prefer;\n    throw new Error(\"Unsupported runtime\");\n}\nexport function serve(options) {\n    const { identity } = runtime();\n    const type = identity === \"workerd\" ? options.type || \"classic\" : \"classic\";\n    const ws = new WebSocketServer(options.ws);\n    const { fetch, onError, onListen, headers } = options;\n    // @ts-ignore\n    return new Server(async () => {\n        return { http: null, hostname: \"\", port: 0 };\n    }, { type, fetch, onError, onListen, ws, headers });\n}\nexport async function serveStatic(req, options = {}) {\n    var _a, _b, _c, _d, _e, _f;\n    // @ts-ignore\n    const kv = (_a = options.kv) !== null && _a !== void 0 ? _a : globalThis[\"__STATIC_CONTENT\"];\n    if (!kv) {\n        return new Response(\"Service Unavailable\", {\n            status: 503,\n            statusText: \"Service Unavailable\",\n        });\n    }\n    const extraHeaders = (_b = options.headers) !== null && _b !== void 0 ? _b : {};\n    const prefix = options.urlPrefix ? join(options.urlPrefix) : \"\";\n    const url = new URL(req.url);\n    const pathname = decodeURIComponent(url.pathname);\n    if (prefix && !startsWith(pathname, prefix)) {\n        return new Response(\"Not Found\", {\n            status: 404,\n            statusText: \"Not Found\",\n            headers: extraHeaders,\n        });\n    }\n    let filename = stripStart(pathname.slice(prefix.length), \"/\");\n    if (filename === \"/\" || filename === \".\") {\n        filename = \"\";\n    }\n    if (pathname.endsWith(\"/\")) {\n        const indexHtml = filename ? join(filename, \"index.html\") : \"index.html\";\n        const indexHtm = filename ? join(filename, \"index.htm\") : \"index.htm\";\n        if (await exists(indexHtml, { root: kv })) {\n            const data = await readFile(indexHtml, { root: kv });\n            return await serveFile(data, {\n                filename: indexHtml,\n                reqHeaders: req.headers,\n                extraHeaders,\n                maxAge: (_c = options.maxAge) !== null && _c !== void 0 ? _c : 0,\n            });\n        }\n        else if (await exists(indexHtm, { root: kv })) {\n            const data = await readFile(indexHtm, { root: kv });\n            return await serveFile(data, {\n                filename: indexHtm,\n                reqHeaders: req.headers,\n                extraHeaders,\n                maxAge: (_d = options.maxAge) !== null && _d !== void 0 ? _d : 0,\n            });\n        }\n        else if (options.listDir) {\n            const entries = await readAsArray(readDir(filename, { root: kv }));\n            return renderDirectoryPage(pathname, entries, extraHeaders);\n        }\n        else {\n            return new Response(\"Forbidden\", {\n                status: 403,\n                statusText: \"Forbidden\",\n                headers: extraHeaders,\n            });\n        }\n    }\n    else if (filename) {\n        try {\n            const data = await readFile(filename, { root: kv });\n            return await serveFile(data, {\n                filename,\n                reqHeaders: req.headers,\n                extraHeaders,\n                maxAge: (_e = options.maxAge) !== null && _e !== void 0 ? _e : 0,\n            });\n        }\n        catch (err) {\n            if (((_f = as(err, Exception)) === null || _f === void 0 ? void 0 : _f.name) === \"NotFoundError\") {\n                return new Response(\"Not Found\", {\n                    status: 404,\n                    statusText: \"Not Found\",\n                    headers: extraHeaders,\n                });\n            }\n            else {\n                return new Response(\"Internal Server Error\", {\n                    status: 500,\n                    statusText: \"Internal Server Error\",\n                    headers: extraHeaders,\n                });\n            }\n        }\n    }\n    else {\n        return Response.redirect(req.url + \"/\", 301);\n    }\n}\nasync function serveFile(data, options) {\n    var _a, _b;\n    const { filename, reqHeaders, extraHeaders } = options;\n    const ext = extname(filename);\n    const type = (_a = getMIME(ext)) !== null && _a !== void 0 ? _a : \"\";\n    const rangeValue = reqHeaders.get(\"Range\");\n    let range;\n    if (rangeValue && data.byteLength) {\n        try {\n            range = parseRange(rangeValue);\n        }\n        catch (_c) {\n            return new Response(\"Invalid Range header\", {\n                status: 416,\n                statusText: \"Range Not Satisfiable\",\n                headers: extraHeaders,\n            });\n        }\n    }\n    const _etag = await etag(data);\n    const headers = new Headers({\n        ...extraHeaders,\n        \"Accept-Ranges\": \"bytes\",\n        \"Etag\": _etag,\n    });\n    const ifNoneMatchValue = reqHeaders.get(\"If-None-Match\");\n    const ifMatchValue = reqHeaders.get(\"If-Match\");\n    let modified = true;\n    if (ifNoneMatchValue) {\n        modified = ifNoneMatch(ifNoneMatchValue, _etag);\n    }\n    if (!modified) {\n        return new Response(null, {\n            status: 304,\n            statusText: \"Not Modified\",\n            headers,\n        });\n    }\n    else if (ifMatchValue && range && !ifMatch(ifMatchValue, _etag)) {\n        return new Response(\"Precondition Failed\", {\n            status: 412,\n            statusText: \"Precondition Failed\",\n            headers,\n        });\n    }\n    if (type) {\n        if (/^text\\/|^application\\/(json|yaml|toml|xml|javascript)$/.test(type)) {\n            headers.set(\"Content-Type\", type + \"; charset=utf-8\");\n        }\n        else {\n            headers.set(\"Content-Type\", type);\n        }\n    }\n    else {\n        headers.set(\"Content-Type\", \"application/octet-stream\");\n    }\n    if (options.maxAge) {\n        headers.set(\"Cache-Control\", `public, max-age=${options.maxAge}`);\n    }\n    if (range) {\n        const { ranges, suffix: suffixLength } = range;\n        let start;\n        let end;\n        if (ranges.length) {\n            ({ start } = ranges[0]);\n            end = Math.min((_b = ranges[0].end) !== null && _b !== void 0 ? _b : data.byteLength - 1, data.byteLength - 1);\n        }\n        else {\n            start = Math.max(data.byteLength - suffixLength, 0);\n            end = data.byteLength - 1;\n        }\n        const slice = data.subarray(start, end + 1);\n        headers.set(\"Content-Range\", `bytes ${start}-${end}/${data.byteLength}`);\n        headers.set(\"Content-Length\", String(end - start + 1));\n        return new Response(slice, {\n            status: 206,\n            statusText: \"Partial Content\",\n            headers,\n        });\n    }\n    else if (!data.byteLength) {\n        headers.set(\"Content-Length\", \"0\");\n        return new Response(\"\", {\n            status: 200,\n            statusText: \"OK\",\n            headers,\n        });\n    }\n    else {\n        headers.set(\"Content-Length\", String(data.byteLength));\n        return new Response(data, {\n            status: 200,\n            statusText: \"OK\",\n            headers,\n        });\n    }\n}\n//# sourceMappingURL=http.js.map"],"names":[],"mappings":"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"}