{
  "summary": "",
  "value": {
    "modules": [
      {
        "id": "fetch_users",
        "summary": "Fetch mock users from API",
        "value": {
          "type": "rawscript",
          "language": "bun",
          "content": "inline_script.fetch_users",
          "input_transforms": {}
        }
      },
      {
        "id": "filter_active_users",
        "summary": "Filter only active users",
        "value": {
          "type": "rawscript",
          "language": "bun",
          "content": "inline_script.filter_active_users",
          "input_transforms": {
            "users": {
              "type": "javascript",
              "expr": "results.fetch_users"
            }
          }
        }
      },
      {
        "id": "loop_users",
        "summary": "Loop through all active users",
        "value": {
          "type": "forloopflow",
          "iterator": {
            "type": "javascript",
            "expr": "results.filter_active_users"
          },
          "skip_failures": false,
          "modules": [
            {
              "id": "process_user",
              "summary": "Process user based on role",
              "value": {
                "type": "rawscript",
                "language": "bun",
                "content": "export async function main(user: any) { let action = ''; if (user.role === 'admin') action = 'Admin privileges'; else if (user.role === 'moderator') action = 'Moderator permissions'; else action = 'Standard access'; return { userId: user.id, userName: user.name, role: user.role, action: action }; }",
                "input_transforms": {
                  "user": {
                    "type": "javascript",
                    "expr": "flow_input.iter.value"
                  }
                }
              }
            }
          ]
        }
      },
      {
        "id": "return_results",
        "summary": "Return action taken for each user",
        "value": {
          "type": "rawscript",
          "language": "bun",
          "content": "inline_script.return_results",
          "input_transforms": {
            "actions": {
              "type": "javascript",
              "expr": "results.loop_users"
            }
          }
        }
      }
    ]
  },
  "schema": {
    "type": "object",
    "properties": {},
    "required": []
  }
}