import{_ as I,b as a,I as L,c as y,d as K,e as B,f as Y,g as J,h as q,i as $,j,k as z,l as X,m as b,n as M,E as o,S as N,o as Q,p as w,q as Z,D as V,s as E,T as x,t as tt,u as A,v as T,w as et,x as it,y as ot,z as st,A as R,B as k,C as S,F as nt,G as rt,H as dt,J as H}from"./index-BjOjUlC0.js";function t(){throw new Error("unsupported")}var _;class ht{constructor(){this.selectedEditors=[],this.isSelected=()=>!1,this.setSelection=t,this.isTransient=()=>!1,this.windowId=M.vscodeWindowId,this.createEditorActions=t,this.onDidFocus=o.None,this.onDidOpenEditorFail=o.None,this.whenRestored=Promise.resolve(),this.disposed=!1,this.setActive=t,this.notifyIndexChanged=t,this.relayout=t,this.dispose=t,this.toJSON=t,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.onDidChange=o.None,this.layout=t,this.onDidModelChange=o.None,this.onWillDispose=o.None,this.onDidActiveEditorChange=o.None,this.onWillCloseEditor=o.None,this.onDidCloseEditor=o.None,this.onWillMoveEditor=o.None,this.onWillOpenEditor=o.None,this.id=0,this.index=0,this.label="main",this.ariaLabel="main",this.activeEditorPane=void 0,this.activeEditor=null,this.previewEditor=null,this.count=0,this.isEmpty=!1,this.isLocked=!1,this.stickyCount=0,this.editors=[],this.getEditors=()=>[],this.findEditors=()=>[],this.getEditorByIndex=()=>{},this.getIndexOfEditor=t,this.openEditor=t,this.openEditors=t,this.isPinned=()=>!1,this.isSticky=()=>!1,this.isActive=()=>!1,this.contains=()=>!1,this.moveEditor=t,this.moveEditors=t,this.copyEditor=t,this.copyEditors=t,this.closeEditor=t,this.closeEditors=t,this.closeAllEditors=t,this.replaceEditors=t,this.pinEditor=()=>{},this.stickEditor=()=>{},this.unstickEditor=()=>{},this.lock=()=>{},this.isFirst=t,this.isLast=t}get groupsView(){return t()}notifyLabelChanged(){}get titleHeight(){return t()}get element(){return t()}get scopedContextKeyService(){return N.get(b)}focus(){}}const G=new ht;class at{constructor(i){this.editor=i,this.onDidChangeControl=o.None,this.onDidChangeSizeConstraints=o.None,this.onDidFocus=o.None,this.onDidBlur=o.None,this.input=void 0,this.options=void 0,this.group=G,this.scopedContextKeyService=void 0,this.getViewState=t,this.isVisible=t,this.hasFocus=t,this.getId=t,this.getTitle=t,this.focus=t}get minimumWidth(){return R.width}get maximumWidth(){return k.width}get minimumHeight(){return R.height}get maximumHeight(){return k.height}getControl(){return this.editor}}function ut(u,i,d){async function l(s,h,c){const e=T(s)?h:s.options;et(h)&&(c=h);const n=it(s)||T(s)?s.resource:void 0;if(n==null||!u.canHandleResource(n))return await i(s,h,c);let r;if(r=N.get(w).listCodeEditors().find(p=>p instanceof A&&p.getModel()!=null&&p.getModel().uri.toString()===n.toString()),r==null){const p=await i(s,h,c);if(p!=null)return p;const g=await u.createModelReference(n);if(r=await(d==null?void 0:d(g,e,c===ot)),r==null){g.dispose();return}}return e!=null&&st(e,r,1),((e==null?void 0:e.preserveFocus)??!1)||(r.focus(),r.getContainerDomNode().scrollIntoView()),new at(r)}return l}let W=class extends Q{constructor(i,d,l,s,h,c,e,n,r,v,p,g,m){super(void 0,l,s,h,c,e,n,r,v,p,g),this._isEditorPartVisible=d,this.openEditor=ut(m,this.openEditor.bind(this),i)}get activeTextEditorControl(){const i=N.get(w).getFocusedCodeEditor();return i!=null&&i instanceof Z?i:super.activeTextEditorControl}async openEditor(i,d,l){if(this._isEditorPartVisible())return await super.openEditor(i,d,l)}};W=I([a(2,L),a(3,y),a(4,K),a(5,B),a(6,Y),a(7,J),a(8,q),a(9,$),a(10,j),a(11,z),a(12,X)],W);class F{constructor(i,d,l){this.editor=i,this.input=d,this.group=l,this.onDidChangeControl=o.None,this.options=void 0,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.onDidChangeSizeConstraints=o.None,this.scopedContextKeyService=void 0,this.onDidFocus=this.editor.onDidFocusEditorWidget,this.onDidBlur=this.editor.onDidBlurEditorWidget}getControl(){return this.editor}getViewState(){}isVisible(){return!0}hasFocus(){return this.editor.hasWidgetFocus()}getId(){return this.editor.getId()}getTitle(){}focus(){this.editor.focus()}}let C=_=class extends V{constructor(i,d,l){super(),this.editor=i,this.scopedContextKeyService=l,this.active=!1,this.selectedEditors=[],this.isSelected=()=>!1,this.setSelection=t,this.isTransient=()=>!1,this.windowId=M.vscodeWindowId,this.onDidFocus=this.editor.onDidFocusEditorWidget,this.onDidOpenEditorFail=o.None,this.whenRestored=Promise.resolve(),this.disposed=!1,this.notifyIndexChanged=t,this.relayout=t,this.toJSON=t,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=0,this.maximumHeight=Number.POSITIVE_INFINITY,this.onDidChange=this.editor.onDidLayoutChange,this.layout=()=>this.editor.layout(),this._onDidModelChange=new E,this.onDidModelChange=this._onDidModelChange.event,this.onWillDispose=this.editor.onDidDispose,this._onDidActiveEditorChange=new E,this.onDidActiveEditorChange=this._onDidActiveEditorChange.event,this.onWillCloseEditor=o.None,this._onDidCloseEditor=new E,this.onDidCloseEditor=this._onDidCloseEditor.event,this.onWillMoveEditor=o.None,this._onWillOpenEditor=new E,this.onWillOpenEditor=this._onWillOpenEditor.event,this.id=--_.idCounter,this.index=-1,this.label=`standalone editor ${-this.id}`,this.ariaLabel=`standalone editor ${-this.id}`,this.previewEditor=null,this.isLocked=!0,this.stickyCount=0,this.getEditors=()=>this.editors,this.findEditors=e=>this.pane!=null&&e.toString()===this.pane.input.resource.toString()?[this.pane.input]:[],this.getEditorByIndex=e=>this.pane!=null&&e===0?this.pane.input:void 0,this.getIndexOfEditor=e=>this.pane!=null&&this.pane.input===e?0:-1,this.openEditor=async e=>{var n;if(!e.isDisposed()&&e instanceof x&&e.resource.toString()===((n=this.pane)==null?void 0:n.input.resource.toString()))return this.focus(),this.pane},this.openEditors=async e=>{if(e.length===1)return await this.openEditor(e[0].editor)},this.isPinned=()=>!1,this.isSticky=()=>!1,this.isActive=()=>this.editor.hasWidgetFocus(),this.contains=e=>this.pane!=null&&this.pane.input===e,this.moveEditor=t,this.moveEditors=t,this.copyEditor=t,this.copyEditors=t,this.closeEditor=t,this.closeEditors=t,this.closeAllEditors=t,this.replaceEditors=t,this.pinEditor=()=>{},this.stickEditor=()=>{},this.unstickEditor=()=>{},this.lock=()=>{},this.isFirst=t,this.isLast=t;const s=e=>{const n=d.createInstance(x,e,void 0,void 0,void 0,void 0);this._onWillOpenEditor.fire({editor:n,groupId:this.id}),this.pane=new F(i,n,this),this._onDidModelChange.fire({kind:5,editor:n,editorIndex:0}),this._onDidActiveEditorChange.fire({editor:n})},h=e=>{if(this.pane!=null&&this.pane.input.resource.toString()===e.toString()){const n=this.pane;this.pane=void 0,this._onDidModelChange.fire({kind:6,editorIndex:0}),this._onDidActiveEditorChange.fire({editor:void 0}),this._onDidCloseEditor.fire({context:tt.UNKNOWN,editor:n.input,groupId:this.id,index:0,sticky:!1})}};i.onDidChangeModel(e=>{e.oldModelUrl!=null&&h(e.oldModelUrl),e.newModelUrl!=null&&s(e.newModelUrl)}),this._register({dispose:()=>{const e=i.getModel();e!=null&&h(e.uri)}});const c=i.getModel();if(c!=null){const e=d.createInstance(x,c.uri,void 0,void 0,void 0,void 0);this.pane=new F(i,e,this)}}get groupsView(){return t()}notifyLabelChanged(){}createEditorActions(){return{actions:{primary:[],secondary:[]},onDidChange:o.None}}get titleHeight(){return t()}setActive(i){this.active=i}get element(){return this.editor.getContainerDomNode()}get activeEditorPane(){return this.pane}get activeEditor(){var i;return((i=this.pane)==null?void 0:i.input)??null}get count(){return this.pane!=null?1:0}get isEmpty(){return this.pane==null}get editors(){return this.pane!=null?[this.pane.input]:[]}focus(){this.editor.focus(),this.editor.getContainerDomNode().scrollIntoView()}};C.idCounter=0;C=_=I([a(1,y),a(2,b)],C);let O=class extends V{constructor(i,d,l){super(),this.delegate=i,this.instantiationService=l,this._serviceBrand=void 0,this.additionalGroups=[],this.activeGroupOverride=void 0,this.onDidCreateAuxiliaryEditorPart=this.delegate.onDidCreateAuxiliaryEditorPart,this.onDidChangeGroupMaximized=this.delegate.onDidChangeGroupMaximized,this._onDidChangeActiveGroup=new E,this.onDidChangeActiveGroup=o.any(this._onDidChangeActiveGroup.event,this.delegate.onDidChangeActiveGroup),this._onDidAddGroup=new E,this.onDidAddGroup=o.any(this._onDidAddGroup.event,this.delegate.onDidAddGroup),this._onDidRemoveGroup=new E,this.onDidRemoveGroup=o.any(this._onDidRemoveGroup.event,this.delegate.onDidRemoveGroup),this.onDidMoveGroup=this.delegate.onDidMoveGroup,this.onDidActivateGroup=this.delegate.onDidActivateGroup,this.onDidChangeGroupIndex=this.delegate.onDidChangeGroupIndex,this.onDidChangeGroupLocked=this.delegate.onDidChangeGroupLocked,this.getLayout=()=>this.delegate.getLayout(),this.getGroups=s=>[...this.delegate.getGroups(s),...this.additionalGroups],this.getGroup=s=>this.delegate.getGroup(s)??this.additionalGroups.find(h=>h.id===s),this.activateGroup=(...s)=>this.delegate.activateGroup(...s),this.getSize=(...s)=>this.delegate.getSize(...s),this.setSize=(...s)=>this.delegate.setSize(...s),this.arrangeGroups=(...s)=>this.delegate.arrangeGroups(...s),this.applyLayout=(...s)=>this.delegate.applyLayout(...s),this.setGroupOrientation=(...s)=>this.delegate.setGroupOrientation(...s),this.findGroup=(...s)=>this.delegate.findGroup(...s),this.addGroup=(...s)=>this.delegate.addGroup(...s),this.removeGroup=(...s)=>this.delegate.removeGroup(...s),this.moveGroup=(...s)=>this.delegate.moveGroup(...s),this.mergeGroup=(...s)=>this.delegate.mergeGroup(...s),this.mergeAllGroups=(...s)=>this.delegate.mergeAllGroups(...s),this.copyGroup=(...s)=>this.delegate.copyGroup(...s),this.onDidChangeEditorPartOptions=this.delegate.onDidChangeEditorPartOptions,setTimeout(()=>{const s=N.get(w),h=e=>{if(e instanceof A){let n;const r=f=>{const D=f!=null?this.additionalGroups.find(U=>U.editor===f):void 0;this.activeGroupOverride!==D&&(this.activeGroupOverride=D,this._onDidChangeActiveGroup.fire(this.activeGroup))},v=f=>{!d&&this.activeGroupOverride===this.additionalGroups.find(D=>D.editor===f)&&r(void 0)},p=()=>{n!=null&&window.clearTimeout(n),r(e)},g=()=>{n!=null&&window.clearTimeout(n),n=window.setTimeout(()=>{n=void 0,v(e)},100)};e.onDidDispose(()=>{v(e)}),e.onDidFocusEditorText(p),e.onDidFocusEditorWidget(p),e.onDidBlurEditorText(g),e.onDidBlurEditorWidget(g),e.hasWidgetFocus()&&p();const m=l.createInstance(C,e);this.additionalGroups.push(m),this._onDidAddGroup.fire(m)}},c=e=>{if(e instanceof A){const n=this.additionalGroups.find(r=>r.editor===e);n!=null&&(n.dispose(),this.activeGroupOverride===n&&(this.activeGroupOverride=void 0,this._onDidChangeActiveGroup.fire(this.activeGroup)),this.additionalGroups=this.additionalGroups.filter(r=>r!==n),this._onDidRemoveGroup.fire(n))}};this._register(s.onCodeEditorAdd(h)),this._register(s.onCodeEditorRemove(c)),s.listCodeEditors().forEach(h)})}getScopedInstantiationService(){return this.instantiationService}registerContextKeyProvider(i){return this.delegate.registerContextKeyProvider(i)}saveWorkingSet(i){return this.delegate.saveWorkingSet(i)}getWorkingSets(){return this.delegate.getWorkingSets()}applyWorkingSet(i){return this.delegate.applyWorkingSet(i)}deleteWorkingSet(i){return this.delegate.deleteWorkingSet(i)}get isReady(){return this.delegate.isReady}get whenReady(){return this.delegate.whenReady}get whenRestored(){return this.delegate.whenRestored}get hasRestorableState(){return this.delegate.hasRestorableState}get parts(){return this.delegate.parts}createAuxiliaryEditorPart(i){return this.delegate.createAuxiliaryEditorPart(i)}get mainPart(){return this.delegate.mainPart}getPart(i){return this.delegate.getPart(i)}toggleMaximizeGroup(i){return this.delegate.toggleMaximizeGroup(i)}toggleExpandGroup(i){return this.delegate.toggleExpandGroup(i)}createEditorDropTarget(i,d){return this.delegate.createEditorDropTarget(i,d)}get groups(){return[...this.additionalGroups,...this.delegate.groups]}get activeGroup(){return this.activeGroupOverride??this.delegate.activeGroup}get sideGroup(){return this.delegate.sideGroup}get count(){return this.delegate.count+this.additionalGroups.length}get orientation(){return this.delegate.orientation}get partOptions(){return this.delegate.partOptions}};O=I([a(2,y)],O);class lt{constructor(){this.onWillDispose=o.None,this.hasMaximizedGroup=()=>!1,this.windowId=M.vscodeWindowId,this.onDidLayout=o.None,this.onDidScroll=o.None,this.isReady=!0,this.whenReady=Promise.resolve(),this.whenRestored=Promise.resolve(),this.hasRestorableState=!1,this.centerLayout=t,this.isLayoutCentered=t,this.enforcePartOptions=t,this.onDidChangeActiveGroup=o.None,this.onDidAddGroup=o.None,this.onDidRemoveGroup=o.None,this.onDidMoveGroup=o.None,this.onDidActivateGroup=o.None,this.onDidChangeGroupIndex=o.None,this.onDidChangeGroupLocked=o.None,this.onDidChangeGroupMaximized=o.None,this.activeGroup=G,this.groups=[G],this.count=0,this.orientation=0,this.getGroups=()=>[],this.getGroup=()=>{},this.activateGroup=t,this.getSize=t,this.setSize=t,this.arrangeGroups=t,this.toggleMaximizeGroup=t,this.toggleExpandGroup=t,this.applyLayout=t,this.getLayout=t,this.setGroupOrientation=t,this.findGroup=()=>{},this.addGroup=t,this.removeGroup=t,this.moveGroup=t,this.mergeGroup=t,this.mergeAllGroups=t,this.copyGroup=t,this.partOptions=H,this.onDidChangeEditorPartOptions=o.None,this.createEditorDropTarget=t}get contentDimension(){return t()}get sideGroup(){return t()}}class pt{constructor(){this.getScopedInstantiationService=t,this.registerContextKeyProvider=t,this.saveWorkingSet=t,this.getWorkingSets=t,this.applyWorkingSet=t,this.deleteWorkingSet=t,this.onDidCreateAuxiliaryEditorPart=o.None,this.mainPart=new lt,this.activePart=this.mainPart,this.parts=[this.mainPart],this.getPart=t,this.createAuxiliaryEditorPart=t,this.onDidChangeGroupMaximized=o.None,this.toggleMaximizeGroup=t,this.toggleExpandGroup=t,this.partOptions=H,this.createEditorDropTarget=t,this._serviceBrand=void 0,this.getLayout=t,this.onDidChangeActiveGroup=o.None,this.onDidAddGroup=o.None,this.onDidRemoveGroup=o.None,this.onDidMoveGroup=o.None,this.onDidActivateGroup=o.None,this.onDidLayout=o.None,this.onDidScroll=o.None,this.onDidChangeGroupIndex=o.None,this.onDidChangeGroupLocked=o.None,this.activeGroup=G,this.groups=[G],this.count=0,this.orientation=0,this.isReady=!1,this.whenReady=Promise.resolve(),this.whenRestored=Promise.resolve(),this.hasRestorableState=!1,this.getGroups=()=>[],this.getGroup=()=>{},this.activateGroup=t,this.getSize=t,this.setSize=t,this.arrangeGroups=t,this.applyLayout=t,this.centerLayout=t,this.isLayoutCentered=()=>!1,this.setGroupOrientation=t,this.findGroup=()=>{},this.addGroup=t,this.removeGroup=t,this.moveGroup=t,this.mergeGroup=t,this.mergeAllGroups=t,this.copyGroup=t,this.onDidChangeEditorPartOptions=o.None,this.enforcePartOptions=t}get contentDimension(){return t()}get sideGroup(){return t()}}let P=class extends O{constructor(i){super(i.createInstance(pt),!0,i)}};P=I([a(0,y)],P);function mt(u){return{[w.toString()]:new S(nt,void 0,!0),[rt.toString()]:new S(W,[u,()=>!1],!0),[z.toString()]:new S(dt,[],!1),[L.toString()]:new S(P)}}export{W as MonacoEditorService,mt as default};
