(()=>{"use strict";var e={942:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,r="",i=0,o=-1,a=0,l=0;l<=e.length;++l){if(l<e.length)n=e.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(o===l-1||1===a);else if(o!==l-1&&2===a){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",i=0):i=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),o=l,a=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=l,a=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,l):r=e.slice(o+1,l),i=l-o-1;o=l,a=0}else 46===n&&-1!==a?++a:a=-1}return r}var r={resolve:function(){for(var e,r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a;o>=0?a=arguments[o]:(void 0===e&&(e=process.cwd()),a=e),t(a),0!==a.length&&(r=a+"/"+r,i=47===a.charCodeAt(0))}return r=n(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(t(e),0===e.length)return".";var r=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!r)).length||r||(e="."),e.length>0&&i&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var i=arguments[n];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":r.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=r.resolve(e))===(n=r.resolve(n)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var o=e.length,a=o-i,l=1;l<n.length&&47===n.charCodeAt(l);++l);for(var c=n.length-l,s=a<c?a:c,g=-1,u=0;u<=s;++u){if(u===s){if(c>s){if(47===n.charCodeAt(l+u))return n.slice(l+u+1);if(0===u)return n.slice(l+u)}else a>s&&(47===e.charCodeAt(i+u)?g=u:0===u&&(g=0));break}var f=e.charCodeAt(i+u);if(f!==n.charCodeAt(l+u))break;47===f&&(g=u)}var h="";for(u=i+g+1;u<=o;++u)u!==o&&47!==e.charCodeAt(u)||(0===h.length?h+="..":h+="/..");return h.length>0?h+n.slice(l+g):(l+=g,47===n.charCodeAt(l)&&++l,n.slice(l))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),r=47===n,i=-1,o=!0,a=e.length-1;a>=1;--a)if(47===(n=e.charCodeAt(a))){if(!o){i=a;break}}else o=!1;return-1===i?r?"/":".":r&&1===i?"//":e.slice(0,i)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var r,i=0,o=-1,a=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var l=n.length-1,c=-1;for(r=e.length-1;r>=0;--r){var s=e.charCodeAt(r);if(47===s){if(!a){i=r+1;break}}else-1===c&&(a=!1,c=r+1),l>=0&&(s===n.charCodeAt(l)?-1==--l&&(o=r):(l=-1,o=c))}return i===o?o=c:-1===o&&(o=e.length),e.slice(i,o)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!a){i=r+1;break}}else-1===o&&(a=!1,o=r+1);return-1===o?"":e.slice(i,o)},extname:function(e){t(e);for(var n=-1,r=0,i=-1,o=!0,a=0,l=e.length-1;l>=0;--l){var c=e.charCodeAt(l);if(47!==c)-1===i&&(o=!1,i=l+1),46===c?-1===n?n=l:1!==a&&(a=1):-1!==n&&(a=-1);else if(!o){r=l+1;break}}return-1===n||-1===i||0===a||1===a&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+"/"+r:r}(0,e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var r,i=e.charCodeAt(0),o=47===i;o?(n.root="/",r=1):r=0;for(var a=-1,l=0,c=-1,s=!0,g=e.length-1,u=0;g>=r;--g)if(47!==(i=e.charCodeAt(g)))-1===c&&(s=!1,c=g+1),46===i?-1===a?a=g:1!==u&&(u=1):-1!==a&&(u=-1);else if(!s){l=g+1;break}return-1===a||-1===c||0===u||1===u&&a===c-1&&a===l+1?-1!==c&&(n.base=n.name=0===l&&o?e.slice(1,c):e.slice(l,c)):(0===l&&o?(n.name=e.slice(1,a),n.base=e.slice(1,c)):(n.name=e.slice(l,a),n.base=e.slice(l,c)),n.ext=e.slice(a,c)),l>0?n.dir=e.slice(0,l-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r},256:function(e,t,n){var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&i(t,e,n[a]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){const t=l.window.createTextEditorDecorationType({opacity:"0.7"}),n=l.window.createTextEditorDecorationType({fontWeight:"bold"}),r=e=>{const r=b(e.document).filter(w),i=r.filter((e=>e.isContext)).map((e=>e.prefixRange)),o=r.filter((e=>!e.isContext)).map((e=>e.prefixRange));e.setDecorations(t,i),e.setDecorations(n,o)};l.window.activeTextEditor&&"search-result"===l.window.activeTextEditor.document.languageId&&r(l.window.activeTextEditor),e.subscriptions.push(l.languages.registerDocumentSymbolProvider(f,{provideDocumentSymbols:(e,t)=>b(e,t).filter(x).map((e=>new l.DocumentSymbol(e.path,"",l.SymbolKind.File,e.allLocations.map((({originSelectionRange:e})=>e)).reduce(((e,t)=>e.union(t)),e.location.originSelectionRange),e.location.originSelectionRange)))}),l.languages.registerCompletionItemProvider(f,{provideCompletionItems(e,t){const n=e.lineAt(t.line);if(t.line>3)return[];if(0===t.character||1===t.character&&"#"===n.text){const n=Array.from({length:h.length}).map(((t,n)=>e.lineAt(n).text));return h.filter((e=>n.every((t=>-1===t.indexOf(e))))).map((e=>({label:e,insertText:e.slice(t.character)+" "})))}return-1===n.text.indexOf("# Flags:")?[]:d.filter((e=>-1===n.text.indexOf(e))).map((e=>({label:e,insertText:e+" "})))}},"#"),l.languages.registerDefinitionProvider(f,{provideDefinition(e,t,n){const r=b(e,n)[t.line];if(!r)return[];if("file"===r.type)return r.allLocations.map((e=>({...e,originSelectionRange:r.location.originSelectionRange})));const i=r.locations.find((e=>e.originSelectionRange.contains(t)));if(!i)return[];const o=new l.Position(i.targetSelectionRange.start.line,i.targetSelectionRange.start.character+(t.character-i.originSelectionRange.start.character));return[{...i,targetSelectionRange:new l.Range(o,o)}]}}),l.languages.registerDocumentLinkProvider(f,{provideDocumentLinks:async(e,t)=>b(e,t).filter(x).map((({location:e})=>({range:e.originSelectionRange,target:e.targetUri})))}),l.window.onDidChangeActiveTextEditor((e=>{"search-result"===e?.document.languageId&&(p=void 0,v?.dispose(),v=l.workspace.onDidChangeTextDocument((t=>{t.document.uri===e.document.uri&&r(e)})),r(e))})),{dispose(){p=void 0,v?.dispose()}})};const l=a(n(398)),c=a(n(942)),s=/^(\S.*):$/,g=/^(\s+)(\d+)(: |  )(\s*)(.*)$/,u=/⟪ ([0-9]+) characters skipped ⟫/g,f={language:"search-result",exclusive:!0},h=["# Query:","# Flags:","# Including:","# Excluding:","# ContextLines:"],d=["RegExp","CaseSensitive","IgnoreExcludeSettings","WordMatch"];let p,v;function m(e,t){if(e.startsWith("(Settings) "))return l.Uri.file(e.slice(11)).with({scheme:"vscode-userdata"});if(c.isAbsolute(e))return/^[\\\/]Untitled-\d*$/.test(e)?l.Uri.file(e.slice(1)).with({scheme:"untitled",path:e.slice(1)}):l.Uri.file(e);if(0===e.indexOf("~/")){const t={}.HOME||{}.HOMEPATH||"";return l.Uri.file(c.join(t,e.slice(2)))}const n=(e,t)=>l.Uri.joinPath(e.uri,t);if(l.workspace.workspaceFolders){const r=/^(.*) • (.*)$/.exec(e);if(r){const[,e,t]=r,i=l.workspace.workspaceFolders.filter((t=>t.name===e))[0];if(i)return n(i,t)}else{if(1===l.workspace.workspaceFolders.length)return n(l.workspace.workspaceFolders[0],e);if("untitled"!==t.scheme){const r=l.workspace.workspaceFolders.filter((e=>t.toString().startsWith(e.uri.toString())))[0];if(r)return n(r,e)}}}console.error(`Unable to resolve path ${e}`)}const x=e=>"file"===e.type,w=e=>"result"===e.type;function b(e,t){if(p&&p.uri===e.uri&&p.version===e.version)return p.parse;const n=e.getText().split(/\r?\n/),r=[];let i,o;for(let a=0;a<n.length;a++){if(t?.isCancellationRequested)return[];const c=n[a],f=s.exec(c);if(f){const[,t]=f;if(i=m(t,e.uri),!i)continue;o=[];const n={targetRange:new l.Range(0,0,0,1),targetUri:i,originSelectionRange:new l.Range(a,0,a,c.length)};r[a]={type:"file",location:n,allLocations:o,path:t}}if(!i)continue;const h=g.exec(c);if(h){const[,e,t,n]=h,s=+t-1,g=(e+t+n).length,f=new l.Range(Math.max(s-3,0),0,s+3,c.length),d=[];let p=g,v=0;u.lastIndex=g;for(let e;e=u.exec(c);)d.push({targetRange:f,targetSelectionRange:new l.Range(s,v,s,v),targetUri:i,originSelectionRange:new l.Range(a,p,a,u.lastIndex-e[0].length)}),v+=u.lastIndex-p-e[0].length+Number(e[1]),p=u.lastIndex;p<c.length&&d.push({targetRange:f,targetSelectionRange:new l.Range(s,v,s,v),targetUri:i,originSelectionRange:new l.Range(a,p,a,c.length)}),n.includes(":")&&o?.push(...d);const m={targetRange:f,targetSelectionRange:new l.Range(s,0,s,1),targetUri:i,originSelectionRange:new l.Range(a,0,a,g-1)};d.push(m),r[a]={type:"result",locations:d,isContext:" "===n,prefixRange:new l.Range(a,0,a,g)}}}return p={version:e.version,parse:r,uri:e.uri},r}},398:e=>{e.exports=require("vscode")}},t={},n=function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(256),r=exports;for(var i in n)r[i]=n[i];n.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();
//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/undefined/extensions/search-result/dist/extension.js.map