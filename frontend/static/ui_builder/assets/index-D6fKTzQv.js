import{L as Ue,D as z,s as w,cg as v,ch as As,ci as Es,E as Z,ay as st,ce as qi,c7 as k,cj as _s,ck as G,cl as Ji,cm as Ht,cn as Ns,aF as Ts,co as W,_ as C,b as d,ax as nt,aw as ee,cp as es,cq as Ni,cr as M,c1 as Ms,cs as yt,c5 as he,ct as H,cu as Ft,cv as Pe,cw as Gt,cx as ke,cy as J,c as P,bW as ts,as as B,aB as g,b$ as K,c9 as ie,c8 as T,cz as Ti,bS as Te,bT as V,bB as E,ca as oe,cA as Vs,cB as Dt,cC as ot,$ as A,cD as Zt,cE as Q,cF as xs,cG as ks,cH as Ps,cI as Mi,cJ as is,cK as Qt,cL as qt,cM as Ls,cN as Bs,bR as at,cO as Me,cP as $,cQ as He,cR as Jt,ad as Wt,cS as Rs,cT as Os,cU as zs,cV as Ve,cW as ss,cX as Hs,e as Ne,cY as ns,cZ as Fs,c_ as R,c$ as Xe,d0 as Ge,d1 as os,d2 as We,d3 as fe,d4 as as,d5 as Gs,d6 as Ws,d7 as Us,n as p,cf as ae,bH as q,m as je,I as re,d8 as js,d9 as rs,da as Zs,db as Ys,dc as Ks,aX as At,j as Ze,dd as mt,de as Be,df as ei,dg as _,dh as cs,di as Xs,dj as Ri,bG as dt,f as $s,bF as ce,dk as Qs,bE as qs,aJ as ls,dl as Js,G as ut,dm as en,dn as tn,dp as Vi,dq as xe,d as sn,dr as nn,ds as Et,dt as xi,aH as x,du as ge,dv as ti,dw as le,dx as hs,dy as Oi,dz as on,dA as an,dB as rn,dC as bt,dD as cn,dE as ln,dF as hn,dG as dn,dH as un,dI as pt,dJ as Yt,x as ft,dK as D,dL as zi,dM as Kt,dN as fn,dO as gn,dP as ki,dQ as ii,dR as Hi,dS as mn,dT as bn,dU as pn,dV as wn,dW as Fi,dX as Ke,dY as vn,dZ as F,d_ as Cn,bN as ds,d$ as Sn,e0 as In,aE as wt,e1 as us,e2 as yn,bY as Dn,e3 as An,e4 as vt,e5 as En,e6 as Xt,e7 as _n,e8 as Nn,e9 as Tn,ea as Mn,eb as Vn,ec as xn,ed as kn,ee as Pn,ef as Ln,eg as Bn,eh as Rn,ei as Gi,ej as On,ek as fs,el as Pi,P as gs,em as zn,en as Hn,eo as Fn,ep as Li,eq as Ct,er as Gn,bZ as ms,b_ as bs,c0 as ps,es as Wn,et as Un,eu as jn,ev as Zn,ew as Yn,ex as Kn,Q as O,ey as Wi,bC as Xn,ez as ws,eA as $n,eB as Ui,eC as Qn,eD as ji,eE as qn,eF as Jn,eG as eo,eH as to,eI as io,eJ as so,eK as no,eL as oo,R as ao,eM as ro,eN as co,eO as lo,eP as ho,eQ as uo,eR as fo,eS as go,eT as mo,eU as bo,eV as Zi,C as $e,eW as vs,eX as Ut,eY as po,bt as wo,eZ as vo,e_ as Co,bd as Bi,cb as So,e$ as Cs,f0 as Io,f1 as yo,f2 as Do,f3 as Ao,f4 as Eo,f5 as _o,f6 as No,f7 as To,f8 as Mo,o as Vo,f9 as xo,fa as ko,fb as Po}from"./index-C_7xVZ2c.js";import{fg as Ma,fh as Va,fe as xa,fm as ka,fi as Pa,fj as La,fk as Ba,ff as Ra,fl as Oa,fc as za,fd as Ha}from"./index-C_7xVZ2c.js";var Lo=".monaco-workbench>.notifications-center{border-radius:4px;bottom:31px;display:none;overflow:hidden;position:absolute;right:8px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-center{bottom:8px}.monaco-workbench>.notifications-center.visible{display:block}.monaco-workbench>.notifications-center>.notifications-center-header{align-items:center;display:flex;height:35px;padding-left:8px;padding-right:5px}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-title{font-size:11px;text-transform:uppercase}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar{flex:1}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .actions-container{justify-content:flex-end}.monaco-workbench>.notifications-center .notifications-list-container .monaco-list-row:not(:last-child)>.notification-list-item{border-bottom:1px solid var(--vscode-notifications-border)}.monaco-workbench>.notifications-center .notifications-list-container .monaco-list-row:last-child{border-radius:0 0 4px 4px}.monaco-workbench>.notifications-center .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}";Ue(Lo,{});var Bo=".monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item{margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item:first-child,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item:first-child{margin-left:4px}";Ue(Bo,{});class Ro extends z{constructor(e,t){super(),this.item=e,this.onClose=t,this._onDidClose=this._register(new w),this.onDidClose=this._onDidClose.event,this._onDidChangeVisibility=this._register(new w),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.registerListeners()}registerListeners(){this._register(this.item.onDidChangeVisibility(e=>this._onDidChangeVisibility.fire(e))),Z.once(this.item.onDidClose)(()=>{this._onDidClose.fire(),this.dispose()})}get progress(){return this.item.progress}updateSeverity(e){this.item.updateSeverity(e)}updateMessage(e){this.item.updateMessage(e)}updateActions(e){this.item.updateActions(e)}close(){this.onClose(this.item),this.dispose()}}const Rt=class Rt extends z{constructor(){super(...arguments),this._onDidChangeNotification=this._register(new w),this.onDidChangeNotification=this._onDidChangeNotification.event,this._onDidChangeStatusMessage=this._register(new w),this.onDidChangeStatusMessage=this._onDidChangeStatusMessage.event,this._onDidChangeFilter=this._register(new w),this.onDidChangeFilter=this._onDidChangeFilter.event,this._notifications=[],this.filter={global:v.OFF,sources:new Map}}get notifications(){return this._notifications}get statusMessage(){return this._statusMessage}setFilter(e){let t=!1;typeof e.global=="number"&&(t=this.filter.global!==e.global,this.filter.global=e.global);let i=!1;e.sources&&(i=!Es(this.filter.sources,e.sources),this.filter.sources=e.sources),(t||i)&&this._onDidChangeFilter.fire({global:t?e.global:void 0,sources:i?e.sources:void 0})}addNotification(e){const t=this.createViewItem(e);if(!t)return Rt.NO_OP_NOTIFICATION;const i=this.findNotification(t);return i==null||i.close(),this._notifications.splice(0,0,t),this._onDidChangeNotification.fire({item:t,index:0,kind:0}),new Ro(t,s=>this.onClose(s))}onClose(e){const t=this.findNotification(e);t&&t!==e?t.close():e.close()}findNotification(e){return this._notifications.find(t=>t.equals(e))}createViewItem(e){const t=rt.create(e,this.filter);if(!t)return;const i=(o,a)=>{const r=this._notifications.indexOf(t);r>=0&&this._onDidChangeNotification.fire({item:t,index:r,kind:o,detail:a})},s=t.onDidChangeExpansion(()=>i(2)),n=t.onDidChangeContent(o=>i(1,o.kind));return Z.once(t.onDidClose)(()=>{s.dispose(),n.dispose();const o=this._notifications.indexOf(t);o>=0&&(this._notifications.splice(o,1),this._onDidChangeNotification.fire({item:t,index:o,kind:3}))}),t}showStatusMessage(e,t){const i=zo.create(e,t);return i?(this._statusMessage=i,this._onDidChangeStatusMessage.fire({kind:0,item:i}),st(()=>{this._statusMessage===i&&(this._statusMessage=void 0,this._onDidChangeStatusMessage.fire({kind:1,item:i}))})):z.None}};Rt.NO_OP_NOTIFICATION=new As;let Yi=Rt;function St(u){return u instanceof rt}class Oo extends z{constructor(){super(),this._onDidChange=this._register(new w),this.onDidChange=this._onDidChange.event,this._state=Object.create(null)}get state(){return this._state}infinite(){this._state.infinite||(this._state.infinite=!0,this._state.total=void 0,this._state.worked=void 0,this._state.done=void 0,this._onDidChange.fire())}done(){this._state.done||(this._state.done=!0,this._state.infinite=void 0,this._state.total=void 0,this._state.worked=void 0,this._onDidChange.fire())}total(e){this._state.total!==e&&(this._state.total=e,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire())}worked(e){typeof this._state.worked=="number"?this._state.worked+=e:this._state.worked=e,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire()}}const se=class se extends z{static create(e,t){if(!e||!e.message||qi(e.message))return;let i;typeof e.severity=="number"?i=e.severity:i=k.Info;const s=se.parseNotificationMessage(e.message);if(!s)return;let n;e.actions?n=e.actions:_s(e.message)&&(n={primary:e.message.actions});let o=e.priority??G.DEFAULT;return o===G.DEFAULT&&i!==k.Error&&(t.global===v.ERROR?o=G.SILENT:Ji(e.source)&&t.sources.get(e.source.id)===v.ERROR&&(o=G.SILENT)),new se(e.id,i,e.sticky,o,s,e.source,e.progress,n)}static parseNotificationMessage(e){let t;if(e instanceof Error?t=Ht(e,!1):typeof e=="string"&&(t=e),!t)return;const i=t;t.length>se.MAX_MESSAGE_LENGTH&&(t=`${t.substr(0,se.MAX_MESSAGE_LENGTH)}...`),t=t.replace(/(\r\n|\n|\r)/gm," ").trim();const s=Ns(t);return{raw:i,linkedText:s,original:e}}constructor(e,t,i,s,n,o,a,r){super(),this.id=e,this._severity=t,this._sticky=i,this._priority=s,this._message=n,this._source=o,this._visible=!1,this._onDidChangeExpansion=this._register(new w),this.onDidChangeExpansion=this._onDidChangeExpansion.event,this._onDidClose=this._register(new w),this.onDidClose=this._onDidClose.event,this._onDidChangeContent=this._register(new w),this.onDidChangeContent=this._onDidChangeContent.event,this._onDidChangeVisibility=this._register(new w),this.onDidChangeVisibility=this._onDidChangeVisibility.event,a&&this.setProgress(a),this.setActions(r)}setProgress(e){e.infinite?this.progress.infinite():e.total&&(this.progress.total(e.total),e.worked&&this.progress.worked(e.worked))}setActions(e={primary:[],secondary:[]}){this._actions={primary:Array.isArray(e.primary)?e.primary:[],secondary:Array.isArray(e.secondary)?e.secondary:[]},this._expanded=e.primary&&e.primary.length>0}get canCollapse(){return!this.hasActions}get expanded(){return!!this._expanded}get severity(){return this._severity}get sticky(){if(this._sticky)return!0;const e=this.hasActions;return!!(e&&this._severity===k.Error||!e&&this._expanded||this._progress&&!this._progress.state.done)}get priority(){return this._priority}get hasActions(){return!this._actions||!this._actions.primary?!1:this._actions.primary.length>0}get hasProgress(){return!!this._progress}get progress(){return this._progress||(this._progress=this._register(new Oo),this._register(this._progress.onDidChange(()=>this._onDidChangeContent.fire({kind:3})))),this._progress}get message(){return this._message}get source(){return typeof this._source=="string"?this._source:this._source?this._source.label:void 0}get sourceId(){return this._source&&typeof this._source!="string"&&"id"in this._source?this._source.id:void 0}get actions(){return this._actions}get visible(){return this._visible}updateSeverity(e){e!==this._severity&&(this._severity=e,this._onDidChangeContent.fire({kind:0}))}updateMessage(e){const t=se.parseNotificationMessage(e);!t||t.raw===this._message.raw||(this._message=t,this._onDidChangeContent.fire({kind:1}))}updateActions(e){this.setActions(e),this._onDidChangeContent.fire({kind:2})}updateVisibility(e){this._visible!==e&&(this._visible=e,this._onDidChangeVisibility.fire(e))}expand(){this._expanded||!this.canCollapse||(this._expanded=!0,this._onDidChangeExpansion.fire())}collapse(e){!this._expanded||!this.canCollapse||(this._expanded=!1,e||this._onDidChangeExpansion.fire())}toggle(){this._expanded?this.collapse():this.expand()}close(){this._onDidClose.fire(),this.dispose()}equals(e){if(this.hasProgress||e.hasProgress)return!1;if(typeof this.id=="string"||typeof e.id=="string")return this.id===e.id;if(typeof this._source=="object"){if(this._source.label!==e.source||this._source.id!==e.sourceId)return!1}else if(this._source!==e.source)return!1;if(this._message.raw!==e.message.raw)return!1;const t=this._actions&&this._actions.primary||[],i=e.actions&&e.actions.primary||[];return Ts(t,i,(s,n)=>s.id+s.label===n.id+n.label)}};se.MAX_MESSAGE_LENGTH=1e3;let rt=se;class _t extends W{constructor(e,t){super(e,t.label,void 0,!0,async()=>{t.run(),this._onDidRun.fire()}),this._onDidRun=this._register(new w),this.onDidRun=this._onDidRun.event,this._keepOpen=!!t.keepOpen,this._menu=!t.isSecondary&&t.menu?t.menu.map((i,s)=>new _t(`${e}.${s}`,i)):void 0}get menu(){return this._menu}get keepOpen(){return this._keepOpen}}class zo{static create(e,t){if(!e||qi(e))return;let i;if(e instanceof Error?i=Ht(e,!1):typeof e=="string"&&(i=e),!!i)return{message:i,options:t}}}function Nt(u,e,t){return{id:es(u.toString()).toString(),silent:t,source:e||"core"}}let si=class extends z{constructor(e,t){super(),this.telemetryService=e,this.notificationService=t,this.registerListeners()}registerListeners(){this._register(this.notificationService.onDidAddNotification(e=>{const t=e.source&&typeof e.source!="string"?e.source.id:e.source;this.telemetryService.publicLog2("notification:show",Nt(e.message,t,e.priority===G.SILENT))})),this._register(this.notificationService.onDidRemoveNotification(e=>{const t=e.source&&typeof e.source!="string"?e.source.id:e.source;this.telemetryService.publicLog2("notification:close",Nt(e.message,t,e.priority===G.SILENT))}))}};si=C([d(0,nt),d(1,ee)],si);const ni="notifications.showList",ct="notifications.hideList",Ho="notifications.toggleList",$t="notifications.hideToasts",Ki="notifications.focusToasts",Fo="notifications.focusNextToast",Go="notifications.focusPreviousToast",Wo="notifications.focusFirstToast",Uo="notifications.focusLastToast",oi="notification.collapse",ai="notification.expand",Xi="notification.acceptPrimaryAction",jo="notification.toggle",ri="notification.clear",Tt="notifications.clearAll",Mt="notifications.toggleDoNotDisturbMode",Vt="notifications.toggleDoNotDisturbModeBySource";function ue(u,e){if(St(e))return e;const t=u.lastFocusedList;if(t instanceof Ti){let i=t.getFocusedElements()[0];if(St(i)||t.isDOMFocused()&&(i=t.element(0)),St(i))return i}}function Zo(u,e,t){M.registerCommandAndKeybindingRule({id:ni,weight:200,primary:Ms(2089,3116),handler:()=>{e.hide(),u.show()}}),M.registerCommandAndKeybindingRule({id:ct,weight:250,when:yt,primary:9,handler:s=>{const n=s.get(nt);for(const o of t.notifications)o.visible&&n.publicLog2("notification:hide",Nt(o.message.original,o.sourceId,o.priority===G.SILENT));u.hide()}}),he.registerCommand(Ho,()=>{u.isVisible?u.hide():(e.hide(),u.show())}),M.registerCommandAndKeybindingRule({id:ri,weight:200,when:H,primary:20,mac:{primary:2049},handler:(s,n)=>{const o=s.get(Ft),a=ue(s.get(Pe),n);a&&!a.hasProgress&&(a.close(),o.playSignal(Gt.clear))}}),M.registerCommandAndKeybindingRule({id:ai,weight:200,when:H,primary:17,handler:(s,n)=>{const o=ue(s.get(Pe),n);o==null||o.expand()}}),M.registerCommandAndKeybindingRule({id:Xi,weight:200,when:ke.or(H,J),primary:3103,handler:s=>{var r;const n=s.get(P).createInstance(lt),o=ue(s.get(Pe))||t.notifications.at(0);if(!o)return;const a=(r=o.actions)!=null&&r.primary?o.actions.primary.at(0):void 0;a&&(n.run(a,o),o.close())}}),M.registerCommandAndKeybindingRule({id:oi,weight:200,when:H,primary:15,handler:(s,n)=>{const o=ue(s.get(Pe),n);o==null||o.collapse()}}),M.registerCommandAndKeybindingRule({id:jo,weight:200,when:H,primary:10,secondary:[3],handler:s=>{const n=ue(s.get(Pe));n==null||n.toggle()}}),he.registerCommand($t,s=>{const n=s.get(nt);for(const o of t.notifications)o.visible&&n.publicLog2("notification:hide",Nt(o.message.original,o.sourceId,o.priority===G.SILENT));e.hide()}),M.registerKeybindingRule({id:$t,weight:150,when:J,primary:9}),M.registerKeybindingRule({id:$t,weight:300,when:ke.and(J,H),primary:9}),he.registerCommand(Ki,()=>e.focus()),M.registerCommandAndKeybindingRule({id:Fo,weight:200,when:ke.and(H,J),primary:18,handler:()=>{e.focusNext()}}),M.registerCommandAndKeybindingRule({id:Go,weight:200,when:ke.and(H,J),primary:16,handler:()=>{e.focusPrevious()}}),M.registerCommandAndKeybindingRule({id:Wo,weight:200,when:ke.and(H,J),primary:11,secondary:[14],handler:()=>{e.focusFirst()}}),M.registerCommandAndKeybindingRule({id:Uo,weight:200,when:ke.and(H,J),primary:12,secondary:[13],handler:()=>{e.focusLast()}}),he.registerCommand(Tt,()=>u.clearAll()),he.registerCommand(Mt,s=>{const n=s.get(ee);n.setFilter(n.getFilter()===v.ERROR?v.OFF:v.ERROR)}),he.registerCommand(Vt,s=>{const n=s.get(ee),o=s.get(ts),a=n.getFilters().sort((h,f)=>h.label.localeCompare(f.label)),r=new B,c=r.add(o.createQuickPick());c.items=a.map(h=>({id:h.id,label:h.label,tooltip:`${h.label} (${h.id})`,filter:h.filter})),c.canSelectMany=!0,c.placeholder=g(3146,"Select sources to enable all notifications from"),c.selectedItems=c.items.filter(h=>h.filter===v.OFF),c.show(),r.add(c.onDidAccept(async()=>{for(const h of c.items)n.setFilter({id:h.id,label:h.label,filter:c.selectedItems.includes(h)?v.OFF:v.ERROR});c.hide()})),r.add(c.onDidHide(()=>r.dispose()))});const i=K(3147,"Notifications");ie.appendMenuItem(T.CommandPalette,{command:{id:ni,title:K(3148,"Show Notifications"),category:i}}),ie.appendMenuItem(T.CommandPalette,{command:{id:ct,title:K(3149,"Hide Notifications"),category:i},when:yt}),ie.appendMenuItem(T.CommandPalette,{command:{id:Tt,title:K(3150,"Clear All Notifications"),category:i}}),ie.appendMenuItem(T.CommandPalette,{command:{id:Xi,title:K(3151,"Accept Notification Primary Action"),category:i}}),ie.appendMenuItem(T.CommandPalette,{command:{id:Mt,title:K(3152,"Toggle Do Not Disturb Mode"),category:i}}),ie.appendMenuItem(T.CommandPalette,{command:{id:Vt,title:K(3153,"Toggle Do Not Disturb Mode By Source..."),category:i}}),ie.appendMenuItem(T.CommandPalette,{command:{id:Ki,title:K(3154,"Focus Notification Toast"),category:i},when:J})}let lt=class extends Ni{constructor(e,t){super(),this.telemetryService=e,this.notificationService=t}async runAction(e,t){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.id,from:"message"}),St(t)&&this.telemetryService.publicLog2("notification:actionExecuted",{id:es(t.message.original.toString()).toString(),actionLabel:e.label,source:t.sourceId||"core",silent:t.priority===G.SILENT});try{await super.runAction(e,t)}catch(i){this.notificationService.error(i)}}};lt=C([d(0,nt),d(1,ee)],lt);var Yo=".monaco-workbench .notifications-list-container{background:var(--vscode-notifications-background);color:var(--vscode-notifications-foreground);outline-color:var(--vscode-contrastBorder)}.monaco-workbench .notifications-list-container .notification-list-item{box-sizing:border-box;display:flex;flex-direction:column;flex-direction:column-reverse;height:100%;padding:10px 5px}.monaco-workbench .notifications-list-container .notification-offset-helper{word-wrap:break-word;line-height:22px;opacity:0;position:absolute}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-main-row{display:flex;flex-grow:1}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-icon{align-items:center;background-position:50%;background-repeat:no-repeat;display:flex;flex:0 0 16px;font-size:18px;height:22px;margin-left:4px;margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message{flex:1;line-height:22px;overflow:hidden;text-overflow:ellipsis;user-select:text;-webkit-user-select:text}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a{color:var(--vscode-notificationLink-foreground)}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a:focus{outline-color:var(--vscode-focusBorder);outline-style:solid;outline-width:1px}.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-message{word-wrap:break-word;white-space:normal}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container{display:none;height:22px}.monaco-workbench .notifications-list-container .monaco-list-row.focused .notification-list-item .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .monaco-list:focus-within .notification-list-item .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item:hover .notification-list-item-toolbar-container{display:block}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-details-row{align-items:center;display:none;overflow:hidden;padding-left:5px}.monaco-workbench .notifications-list-container .notification-list-item.expanded>.notification-list-item-details-row{display:flex}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-source{flex:1;font-size:12px;overflow:hidden;text-overflow:ellipsis}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container{display:flex;overflow:hidden}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button,.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button-dropdown{margin:4px 5px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-button{outline-offset:2px!important}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-text-button{display:inline-block;font-size:12px;overflow:hidden;padding:4px 10px;text-overflow:ellipsis;width:fit-content}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-dropdown-button{padding:5px}.monaco-workbench .notifications-list-container .progress-bit{bottom:0}";Ue(Yo,{});const Ko=Te("notifications-clear",V.close,g(7348,"Icon for the clear action in notifications.")),Xo=Te("notifications-clear-all",V.clearAll,g(7349,"Icon for the clear all action in notifications.")),$o=Te("notifications-hide",V.chevronDown,g(7350,"Icon for the hide action in notifications.")),Qo=Te("notifications-expand",V.chevronUp,g(7351,"Icon for the expand action in notifications.")),qo=Te("notifications-collapse",V.chevronDown,g(7352,"Icon for the collapse action in notifications.")),Jo=Te("notifications-configure",V.gear,g(7353,"Icon for the configure action in notifications.")),Ss=Te("notifications-do-not-disturb",V.bellSlash,g(7354,"Icon for the mute all action in notifications."));var me;let Qe=(me=class extends W{constructor(e,t,i){super(e,t,E.asClassName(Ko)),this.commandService=i}async run(e){this.commandService.executeCommand(ri,e)}},me.ID=ri,me.LABEL=g(7355,"Clear Notification"),me);Qe=C([d(2,oe)],Qe);var be;let qe=(be=class extends W{constructor(e,t,i){super(e,t,E.asClassName(Xo)),this.commandService=i}async run(){this.commandService.executeCommand(Tt)}},be.ID=Tt,be.LABEL=g(7356,"Clear All Notifications"),be);qe=C([d(2,oe)],qe);var pe;let xt=(pe=class extends W{constructor(e,t,i){super(e,t,E.asClassName(Ss)),this.commandService=i}async run(){this.commandService.executeCommand(Mt)}},pe.ID=Mt,pe.LABEL=g(7357,"Toggle Do Not Disturb Mode"),pe);xt=C([d(2,oe)],xt);var we;let kt=(we=class extends W{constructor(e,t,i){super(e,t),this.commandService=i}async run(){this.commandService.executeCommand(Vt)}},we.ID=Vt,we.LABEL=g(7358,"Toggle Do Not Disturb Mode By Source..."),we);kt=C([d(2,oe)],kt);const Ot=class Ot extends W{constructor(e,t){super(e,t,E.asClassName(Ss))}};Ot.ID="workbench.action.configureDoNotDisturbMode",Ot.LABEL=g(7359,"Configure Do Not Disturb...");let Re=Ot;var ve;let Je=(ve=class extends W{constructor(e,t,i){super(e,t,E.asClassName($o)),this.commandService=i}async run(){this.commandService.executeCommand(ct)}},ve.ID=ct,ve.LABEL=g(7360,"Hide Notifications"),ve);Je=C([d(2,oe)],Je);var Ce;let et=(Ce=class extends W{constructor(e,t,i){super(e,t,E.asClassName(Qo)),this.commandService=i}async run(e){this.commandService.executeCommand(ai,e)}},Ce.ID=ai,Ce.LABEL=g(7361,"Expand Notification"),Ce);et=C([d(2,oe)],et);var Se;let tt=(Se=class extends W{constructor(e,t,i){super(e,t,E.asClassName(qo)),this.commandService=i}async run(e){this.commandService.executeCommand(oi,e)}},Se.ID=oi,Se.LABEL=g(7362,"Collapse Notification"),Se);tt=C([d(2,oe)],tt);const zt=class zt extends W{constructor(e,t,i){super(e,t,E.asClassName(Jo)),this.notification=i}};zt.ID="workbench.action.configureNotification",zt.LABEL=g(7363,"More Actions...");let Fe=zt;var Ie;let it=(Ie=class extends W{constructor(e,t,i){super(e,t),this.clipboardService=i}run(e){return this.clipboardService.writeText(e.message.raw)}},Ie.ID="workbench.action.copyNotificationMessage",Ie.LABEL=g(7364,"Copy Text"),Ie);it=C([d(2,Vs)],it);var ci,Y;const X=class X{constructor(e){this.offsetHelper=this.createOffsetHelper(e)}createOffsetHelper(e){const t=document.createElement("div");return t.classList.add("notification-offset-helper"),e.appendChild(t),t}getHeight(e){if(!e.expanded)return X.ROW_HEIGHT;let t=X.ROW_HEIGHT;const i=this.computePreferredHeight(e);if(X.LINE_HEIGHT<i){const n=i-X.LINE_HEIGHT;t+=n}return(e.source||Dt(e.actions&&e.actions.primary))&&(t+=X.ROW_HEIGHT),t===X.ROW_HEIGHT&&e.collapse(!0),t}computePreferredHeight(e){let t=0;e.hasProgress||t++,e.canCollapse&&t++,Dt(e.actions&&e.actions.secondary)&&t++,this.offsetHelper.style.width=`${450-(40+t*30-Math.max(t-1,0)*4)}px`;const i=Is.render(e.message);this.offsetHelper.appendChild(i);const s=Math.max(this.offsetHelper.offsetHeight,this.offsetHelper.scrollHeight);return ot(this.offsetHelper),s}getTemplateId(e){if(e instanceof rt)return Pt.TEMPLATE_ID;throw new Error("unknown element type: "+e)}};X.ROW_HEIGHT=42,X.LINE_HEIGHT=22;let li=X;class Is{static render(e,t){const i=document.createElement("span");for(const s of e.linkedText.nodes)if(typeof s=="string")i.appendChild(document.createTextNode(s));else{let n=s.title;!n&&s.href.startsWith("command:")?n=g(10776,"Click to execute command '{0}'",s.href.substr(8)):n||(n=s.href);const o=A("a",{href:s.href,title:n,tabIndex:0},s.label);if(t){const a=b=>{Hs(b)&&He.stop(b,!0),t.callback(s.href)},r=t.toDispose.add(new Zt(o,Q.CLICK)).event,c=t.toDispose.add(new Zt(o,Q.KEY_DOWN)).event,h=Z.chain(c,b=>b.filter(m=>{const S=new xs(m);return S.equals(10)||S.equals(3)}));t.toDispose.add(ks.addTarget(o));const f=t.toDispose.add(new Zt(o,Ps.Tap)).event;Z.any(r,f,h)(a,null,t.toDispose)}i.appendChild(o)}return i}}var ye;let Pt=(ye=class{constructor(e,t,i,s){this.actionRunner=e,this.contextMenuService=t,this.instantiationService=i,this.notificationService=s}get templateId(){return ci.TEMPLATE_ID}renderTemplate(e){const t=Object.create(null);t.toDispose=new B,t.container=document.createElement("div"),t.container.classList.add("notification-list-item"),t.mainRow=document.createElement("div"),t.mainRow.classList.add("notification-list-item-main-row"),t.icon=document.createElement("div"),t.icon.classList.add("notification-list-item-icon","codicon"),t.message=document.createElement("div"),t.message.classList.add("notification-list-item-message");const i=this,s=document.createElement("div");return s.classList.add("notification-list-item-toolbar-container"),t.toolbar=new Mi(s,{ariaLabel:g(10777,"Notification Actions"),actionViewItemProvider:(n,o)=>{if(n instanceof Fe)return t.toDispose.add(new is(n,{getActions(){var c,h,f;const a=[],r={id:n.notification.sourceId,label:n.notification.source};if(Ji(r)){const b=i.notificationService.getFilter(r)===v.ERROR;a.push(Qt({id:r.id,label:b?g(10778,"Turn On All Notifications from '{0}'",r.label):g(10779,"Turn Off Info and Warning Notifications from '{0}'",r.label),run:()=>i.notificationService.setFilter({...r,filter:b?v.OFF:v.ERROR})})),(h=(c=n.notification.actions)==null?void 0:c.secondary)!=null&&h.length&&a.push(new qt)}return Array.isArray((f=n.notification.actions)==null?void 0:f.secondary)&&a.push(...n.notification.actions.secondary),a}},this.contextMenuService,{...o,actionRunner:this.actionRunner,classNames:n.class}))},actionRunner:this.actionRunner}),t.toDispose.add(t.toolbar),t.detailsRow=document.createElement("div"),t.detailsRow.classList.add("notification-list-item-details-row"),t.source=document.createElement("div"),t.source.classList.add("notification-list-item-source"),t.buttonsContainer=document.createElement("div"),t.buttonsContainer.classList.add("notification-list-item-buttons-container"),e.appendChild(t.container),t.container.appendChild(t.detailsRow),t.detailsRow.appendChild(t.source),t.detailsRow.appendChild(t.buttonsContainer),t.container.appendChild(t.mainRow),t.mainRow.appendChild(t.icon),t.mainRow.appendChild(t.message),t.mainRow.appendChild(s),t.progress=new Ls(e,Bs),t.toDispose.add(t.progress),t.renderer=this.instantiationService.createInstance(hi,t,this.actionRunner),t.toDispose.add(t.renderer),t}renderElement(e,t,i){i.renderer.setInput(e)}disposeTemplate(e){at(e.toDispose)}},ci=ye,ye.TEMPLATE_ID="notification",ye);Pt=ci=C([d(1,Me),d(2,P),d(3,ee)],Pt);var De;let hi=(De=class extends z{constructor(e,t,i,s,n,o,a){super(),this.template=e,this.actionRunner=t,this.openerService=i,this.instantiationService=s,this.keybindingService=n,this.contextMenuService=o,this.hoverService=a,this.inputDisposables=this._register(new B),Y.closeNotificationAction||(Y.closeNotificationAction=s.createInstance(Qe,Qe.ID,Qe.LABEL),Y.expandNotificationAction=s.createInstance(et,et.ID,et.LABEL),Y.collapseNotificationAction=s.createInstance(tt,tt.ID,tt.LABEL))}setInput(e){this.inputDisposables.clear(),this.render(e)}render(e){this.template.container.classList.toggle("expanded",e.expanded),this.inputDisposables.add($(this.template.container,Q.MOUSE_UP,n=>{n.button===1&&He.stop(n,!0)})),this.inputDisposables.add($(this.template.container,Q.AUXCLICK,n=>{!e.hasProgress&&n.button===1&&(He.stop(n,!0),e.close())})),this.renderSeverity(e);const t=this.inputDisposables.add(this.hoverService.setupManagedHover(Jt("mouse"),this.template.message,"")),i=this.renderMessage(e,t);this.renderSecondaryActions(e,i);const s=this.inputDisposables.add(this.hoverService.setupManagedHover(Jt("mouse"),this.template.source,""));this.renderSource(e,s),this.renderButtons(e),this.renderProgress(e),this.inputDisposables.add(e.onDidChangeContent(n=>{switch(n.kind){case 0:this.renderSeverity(e);break;case 3:this.renderProgress(e);break;case 1:this.renderMessage(e,t);break}}))}renderSeverity(e){Y.SEVERITIES.forEach(t=>{e.severity!==t&&this.template.icon.classList.remove(...E.asClassNameArray(this.toSeverityIcon(t)))}),this.template.icon.classList.add(...E.asClassNameArray(this.toSeverityIcon(e.severity)))}renderMessage(e,t){ot(this.template.message),this.template.message.appendChild(Is.render(e.message,{callback:s=>this.openerService.open(Wt.parse(s),{allowCommands:!0}),toDispose:this.inputDisposables}));const i=e.canCollapse&&!e.expanded&&this.template.message.scrollWidth>this.template.message.clientWidth;return t.update(i?this.template.message.textContent+"":""),i}renderSecondaryActions(e,t){var n;const i=[];if(Dt((n=e.actions)==null?void 0:n.secondary)){const o=this.instantiationService.createInstance(Fe,Fe.ID,Fe.LABEL,e);i.push(o),this.inputDisposables.add(o)}let s=!1;e.canCollapse&&(e.expanded||e.source||t)&&(s=!0),s&&i.push(e.expanded?Y.collapseNotificationAction:Y.expandNotificationAction),e.hasProgress||i.push(Y.closeNotificationAction),this.template.toolbar.clear(),this.template.toolbar.context=e,i.forEach(o=>this.template.toolbar.push(o,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(o)}))}renderSource(e,t){e.expanded&&e.source?(this.template.source.textContent=g(10780,"Source: {0}",e.source),t.update(e.source)):(this.template.source.textContent="",t.update(""))}renderButtons(e){ot(this.template.buttonsContainer);const t=e.actions?e.actions.primary:void 0;if(e.expanded&&Dt(t)){const i=this,s=new class extends Ni{async runAction(o){i.actionRunner.run(o,e),(!(o instanceof _t)||!o.keepOpen)&&e.close()}},n=this.inputDisposables.add(new Rs(this.template.buttonsContainer));for(let o=0;o<t.length;o++){const a=t[o],r={title:!0,secondary:o>0,...Os},c=a instanceof _t?a.menu:void 0,h=this.inputDisposables.add(c?n.addButtonWithDropdown({...r,contextMenuProvider:this.contextMenuService,actions:c,actionRunner:s}):n.addButton(r));h.label=a.label,this.inputDisposables.add(h.onDidClick(f=>{f&&He.stop(f,!0),s.run(a)}))}}}renderProgress(e){if(!e.hasProgress){this.template.progress.stop().hide();return}const t=e.progress.state;t.infinite?this.template.progress.infinite().show():typeof t.total=="number"||typeof t.worked=="number"?(typeof t.total=="number"&&!this.template.progress.hasTotal()&&this.template.progress.total(t.total),typeof t.worked=="number"&&this.template.progress.setWorked(t.worked).show()):this.template.progress.done().hide()}toSeverityIcon(e){switch(e){case k.Warning:return V.warning;case k.Error:return V.error}return V.info}getKeybindingLabel(e){const t=this.keybindingService.lookupKeybinding(e.id);return t?t.getLabel():null}},Y=De,De.SEVERITIES=[k.Info,k.Warning,k.Error],De);hi=Y=C([d(2,zs),d(3,P),d(4,Ve),d(5,Me),d(6,ss)],hi);let Lt=class extends z{constructor(e,t,i,s){super(),this.container=e,this.options=t,this.instantiationService=i,this.contextMenuService=s,this.viewModel=[]}show(){this.isVisible||(this.list||this.createNotificationsList(),this.isVisible=!0)}createNotificationsList(){this.listContainer=document.createElement("div"),this.listContainer.classList.add("notifications-list-container");const e=this._register(this.instantiationService.createInstance(lt)),t=this.instantiationService.createInstance(Pt,e),i=this.listDelegate=new li(this.listContainer),s=this.options,n=this.list=this._register(this.instantiationService.createInstance(Ti,"NotificationsList",this.listContainer,i,[t],{...s,setRowLineHeight:!1,horizontalScrolling:!1,overrideStyles:{listBackground:ns},accessibilityProvider:this.instantiationService.createInstance(di,s)})),o=this._register(this.instantiationService.createInstance(it,it.ID,it.LABEL));this._register(n.onContextMenu(r=>{r.element&&this.contextMenuService.showContextMenu({getAnchor:()=>r.anchor,getActions:()=>[o],getActionsContext:()=>r.element,actionRunner:e})})),this._register(n.onMouseDblClick(r=>r.element.toggle()));const a=this._register(Fs(n.getHTMLElement()));this._register(a.onDidBlur(()=>{R(this.listContainer).document.hasFocus()&&n.setFocus([])})),H.bindTo(n.contextKeyService),this._register(n.onDidChangeSelection(r=>{r.indexes.length>0&&n.setSelection([])})),this.container.appendChild(this.listContainer)}updateNotificationsList(e,t,i=[]){const[s,n]=Xe(this.list,this.listContainer),o=Ge(n),a=s.getFocus()[0],r=this.viewModel[a];let c=null;if(typeof a=="number"&&(c=s.getRelativeTop(a)),this.viewModel.splice(e,t,...i),s.splice(e,t,i),s.layout(),this.viewModel.length===0)this.hide();else if(typeof a=="number"){let h=0;if(r){let f=this.viewModel.indexOf(r);f===-1&&(f=a-1),f<this.viewModel.length&&f>=0&&(h=f)}typeof c=="number"&&s.reveal(h,c),s.setFocus([h])}this.isVisible&&o&&s.domFocus()}updateNotificationHeight(e){const t=this.viewModel.indexOf(e);if(t===-1)return;const[i,s]=Xe(this.list,this.listDelegate);i.updateElementHeight(t,s.getHeight(e)),i.layout()}hide(){!this.isVisible||!this.list||(this.isVisible=!1,this.list.splice(0,this.viewModel.length),this.viewModel=[])}focusFirst(){this.list&&(this.list.focusFirst(),this.list.domFocus())}hasFocus(){return this.listContainer?Ge(this.listContainer):!1}layout(e,t){this.listContainer&&this.list&&(this.listContainer.style.width=`${e}px`,typeof t=="number"&&(this.list.getHTMLElement().style.maxHeight=`${t}px`),this.list.layout())}dispose(){this.hide(),super.dispose()}};Lt=C([d(2,P),d(3,Me)],Lt);let di=class{constructor(e,t,i){this._options=e,this._keybindingService=t,this._configurationService=i}getAriaLabel(e){var s;let t;const i=(s=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:s.getAriaLabel();return this._configurationService.getValue("accessibility.verbosity.notification")&&(t=i?g(7341,"Inspect the response in the accessible view with {0}",i):g(7342,"Inspect the response in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding")),e.source?t?g(7345,"{0}, source: {1}, notification, {2}",e.message.raw,e.source,t):g(7346,"{0}, source: {1}, notification",e.message.raw,e.source):t?g(7343,"{0}, notification, {1}",e.message.raw,t):g(7344,"{0}, notification",e.message.raw)}getWidgetAriaLabel(){return this._options.widgetAriaLabel??g(7347,"Notifications List")}getRole(){return"dialog"}};di=C([d(1,Ve),d(2,Ne)],di);var Le,ne;let ui=(ne=class extends os{constructor(e,t,i,s,n,o,a,r,c,h,f){super(i),this.container=e,this.model=t,this.instantiationService=s,this.layoutService=n,this.contextKeyService=o,this.editorGroupService=a,this.keybindingService=r,this.notificationService=c,this.accessibilitySignalService=h,this.contextMenuService=f,this._onDidChangeVisibility=this._register(new w),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.notificationsCenterVisibleContextKey=yt.bindTo(this.contextKeyService),this.notificationsCenterVisibleContextKey=yt.bindTo(o),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(e=>this.onDidChangeNotification(e))),this._register(this.layoutService.onDidLayoutMainContainer(e=>this.layout(We.lift(e)))),this._register(this.notificationService.onDidChangeFilter(()=>this.onDidChangeFilter()))}onDidChangeFilter(){this.notificationService.getFilter()===v.ERROR&&this.hide()}get isVisible(){return!!this._isVisible}show(){if(this._isVisible){const i=fe(this.notificationsList);i.show(),i.focusFirst();return}this.notificationsCenterContainer||this.create(),this.updateTitle();const[e,t]=Xe(this.notificationsList,this.notificationsCenterContainer);this._isVisible=!0,t.classList.add("visible"),e.show(),this.layout(this.workbenchDimensions),e.updateNotificationsList(0,0,this.model.notifications),e.focusFirst(),this.updateStyles(),this.model.notifications.forEach(i=>i.updateVisibility(!0)),this.notificationsCenterVisibleContextKey.set(!0),this._onDidChangeVisibility.fire()}updateTitle(){const[e,t]=Xe(this.notificationsCenterTitle,this.clearAllAction);this.model.notifications.length===0?(e.textContent=g(3155,"No new notifications"),t.enabled=!1):(e.textContent=g(3156,"Notifications"),t.enabled=this.model.notifications.some(i=>!i.hasProgress))}create(){this.notificationsCenterContainer=document.createElement("div"),this.notificationsCenterContainer.classList.add("notifications-center"),this.notificationsCenterHeader=document.createElement("div"),this.notificationsCenterHeader.classList.add("notifications-center-header"),this.notificationsCenterContainer.appendChild(this.notificationsCenterHeader),this.notificationsCenterTitle=document.createElement("span"),this.notificationsCenterTitle.classList.add("notifications-center-header-title"),this.notificationsCenterHeader.appendChild(this.notificationsCenterTitle);const e=document.createElement("div");e.classList.add("notifications-center-header-toolbar"),this.notificationsCenterHeader.appendChild(e);const t=this._register(this.instantiationService.createInstance(lt)),i=this,s=this._register(new Mi(e,{ariaLabel:g(3157,"Notification Center Actions"),actionRunner:t,actionViewItemProvider:(o,a)=>{if(o.id===Re.ID)return this._register(this.instantiationService.createInstance(is,o,{getActions(){const r=[Qt({id:xt.ID,label:i.notificationService.getFilter()===v.OFF?g(3158,"Enable Do Not Disturb Mode"):g(3159,"Disable Do Not Disturb Mode"),run:()=>i.notificationService.setFilter(i.notificationService.getFilter()===v.OFF?v.ERROR:v.OFF)})],c=i.notificationService.getFilters().sort((h,f)=>h.label.localeCompare(f.label));for(const h of c.slice(0,Le.MAX_NOTIFICATION_SOURCES))r.length===1&&r.push(new qt),r.push(Qt({id:`${xt.ID}.${h.id}`,label:h.label,checked:h.filter!==v.ERROR,run:()=>i.notificationService.setFilter({...h,filter:h.filter===v.ERROR?v.OFF:v.ERROR})}));return c.length>Le.MAX_NOTIFICATION_SOURCES&&(r.push(new qt),r.push(i._register(i.instantiationService.createInstance(kt,kt.ID,g(3160,"More…"))))),r}},this.contextMenuService,{...a,actionRunner:t,classNames:o.class,keybindingProvider:r=>this.keybindingService.lookupKeybinding(r.id)}))}}));this.clearAllAction=this._register(this.instantiationService.createInstance(qe,qe.ID,qe.LABEL)),s.push(this.clearAllAction,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(this.clearAllAction)}),this.configureDoNotDisturbAction=this._register(this.instantiationService.createInstance(Re,Re.ID,Re.LABEL)),s.push(this.configureDoNotDisturbAction,{icon:!0,label:!1});const n=this._register(this.instantiationService.createInstance(Je,Je.ID,Je.LABEL));s.push(n,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(n)}),this.notificationsList=this.instantiationService.createInstance(Lt,this.notificationsCenterContainer,{widgetAriaLabel:g(3161,"Notifications Center")}),this.container.appendChild(this.notificationsCenterContainer)}getKeybindingLabel(e){const t=this.keybindingService.lookupKeybinding(e.id);return t?t.getLabel():null}onDidChangeNotification(e){if(!this._isVisible)return;let t=!1;const[i,s]=Xe(this.notificationsList,this.notificationsCenterContainer);switch(e.kind){case 0:i.updateNotificationsList(e.index,0,[e.item]),e.item.updateVisibility(!0);break;case 1:switch(e.detail){case 2:i.updateNotificationsList(e.index,1,[e.item]);break;case 1:e.item.expanded&&i.updateNotificationHeight(e.item);break}break;case 2:i.updateNotificationsList(e.index,1,[e.item]);break;case 3:t=Ge(s),i.updateNotificationsList(e.index,1),e.item.updateVisibility(!1);break}this.updateTitle(),this.model.notifications.length===0&&(this.hide(),t&&this.editorGroupService.activeGroup.focus())}hide(){if(!this._isVisible||!this.notificationsCenterContainer||!this.notificationsList)return;const e=Ge(this.notificationsCenterContainer);this._isVisible=!1,this.notificationsCenterContainer.classList.remove("visible"),this.notificationsList.hide(),this.model.notifications.forEach(t=>t.updateVisibility(!1)),this.notificationsCenterVisibleContextKey.set(!1),this._onDidChangeVisibility.fire(),e&&this.editorGroupService.activeGroup.focus()}updateStyles(){if(this.notificationsCenterContainer&&this.notificationsCenterHeader){const e=this.getColor(as);this.notificationsCenterContainer.style.boxShadow=e?`0 0 8px 2px ${e}`:"";const t=this.getColor(Gs);this.notificationsCenterContainer.style.border=t?`1px solid ${t}`:"";const i=this.getColor(Ws);this.notificationsCenterHeader.style.color=i??"";const s=this.getColor(Us);this.notificationsCenterHeader.style.background=s??""}}layout(e){if(this.workbenchDimensions=e,this._isVisible&&this.notificationsCenterContainer){const t=Le.MAX_DIMENSIONS.width,i=Le.MAX_DIMENSIONS.height;let s=t,n=i;this.workbenchDimensions&&(s=this.workbenchDimensions.width,s-=2*8,n=this.workbenchDimensions.height-35,this.layoutService.isVisible("workbench.parts.statusbar",p)&&(n-=22),this.layoutService.isVisible("workbench.parts.titlebar",p)&&(n-=22),n-=2*12),fe(this.notificationsList).layout(Math.min(t,s),Math.min(i,n))}}clearAll(){this.hide();for(const e of[...this.model.notifications])e.hasProgress||e.close(),this.accessibilitySignalService.playSignal(Gt.clear)}},Le=ne,ne.MAX_DIMENSIONS=new We(450,400),ne.MAX_NOTIFICATION_SOURCES=10,ne);ui=Le=C([d(2,ae),d(3,P),d(4,q),d(5,je),d(6,re),d(7,Ve),d(8,ee),d(9,Ft),d(10,Me)],ui);class ea extends z{constructor(e){super(),this.model=e;for(const t of e.notifications)this.triggerAriaAlert(t);this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(e=>this.onDidChangeNotification(e)))}onDidChangeNotification(e){e.kind===0&&(this.triggerAriaAlert(e.item),e.item.severity===k.Error&&(e.item.message.original instanceof Error?console.error(e.item.message.original):console.error(Ht(e.item.message.linkedText.toString(),!0))))}triggerAriaAlert(e){if(e.priority===G.SILENT)return;const t=e.onDidChangeContent(i=>{i.kind===1&&this.doTriggerAriaAlert(e)});Z.once(e.onDidClose)(()=>t.dispose()),this.doTriggerAriaAlert(e)}doTriggerAriaAlert(e){let t;e.severity===k.Error?t=g(3162,"Error: {0}",e.message.linkedText.toString()):e.severity===k.Warning?t=g(3163,"Warning: {0}",e.message.linkedText.toString()):t=g(3164,"Info: {0}",e.message.linkedText.toString()),js(t)}}let fi=class extends z{constructor(e,t,i){super(),this.model=e,this.statusbarService=t,this.notificationService=i,this.newNotificationsCount=0,this.isNotificationsCenterVisible=!1,this.isNotificationsToastsVisible=!1,this.updateNotificationsCenterStatusItem(),e.statusMessage&&this.doSetStatusMessage(e.statusMessage),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(e=>this.onDidChangeNotification(e))),this._register(this.model.onDidChangeStatusMessage(e=>this.onDidChangeStatusMessage(e))),this._register(this.notificationService.onDidChangeFilter(()=>this.updateNotificationsCenterStatusItem()))}onDidChangeNotification(e){this.isNotificationsCenterVisible||(e.kind===0?this.newNotificationsCount++:e.kind===3&&this.newNotificationsCount>0&&this.newNotificationsCount--),this.updateNotificationsCenterStatusItem()}updateNotificationsCenterStatusItem(){let e=0;if(!this.isNotificationsCenterVisible&&!this.isNotificationsToastsVisible)for(const i of this.model.notifications)i.hasProgress&&e++;let t={name:g(3165,"Notifications"),text:`${e>0||this.newNotificationsCount>0?"$(bell-dot)":"$(bell)"}`,ariaLabel:g(3165,"Notifications"),command:this.isNotificationsCenterVisible?ct:ni,tooltip:this.getTooltip(e),showBeak:this.isNotificationsCenterVisible};this.notificationService.getFilter()===v.ERROR&&(t={...t,text:`${e>0||this.newNotificationsCount>0?"$(bell-slash-dot)":"$(bell-slash)"}`,ariaLabel:g(3166,"Do Not Disturb"),tooltip:g(3167,"Do Not Disturb Mode is Enabled")}),this.notificationsCenterStatusItem?this.notificationsCenterStatusItem.update(t):this.notificationsCenterStatusItem=this.statusbarService.addEntry(t,"status.notifications",1,-Number.MAX_VALUE)}getTooltip(e){return this.isNotificationsCenterVisible?g(3168,"Hide Notifications"):this.model.notifications.length===0?g(3169,"No Notifications"):e===0?this.newNotificationsCount===0?g(3170,"No New Notifications"):this.newNotificationsCount===1?g(3171,"1 New Notification"):g(3172,"{0} New Notifications",this.newNotificationsCount):this.newNotificationsCount===0?g(3173,"No New Notifications ({0} in progress)",e):this.newNotificationsCount===1?g(3174,"1 New Notification ({0} in progress)",e):g(3175,"{0} New Notifications ({1} in progress)",this.newNotificationsCount,e)}update(e,t){let i=!1;this.isNotificationsCenterVisible!==e&&(this.isNotificationsCenterVisible=e,this.newNotificationsCount=0,i=!0),this.isNotificationsToastsVisible!==t&&(this.isNotificationsToastsVisible=t,i=!0),i&&this.updateNotificationsCenterStatusItem()}onDidChangeStatusMessage(e){const t=e.item;switch(e.kind){case 0:this.doSetStatusMessage(t);break;case 1:this.currentStatusMessage&&this.currentStatusMessage[0]===t&&(at(this.currentStatusMessage[1]),this.currentStatusMessage=void 0);break}}doSetStatusMessage(e){const t=e.message,i=e.options&&typeof e.options.showAfter=="number"?e.options.showAfter:0,s=e.options&&typeof e.options.hideAfter=="number"?e.options.hideAfter:-1;this.currentStatusMessage&&at(this.currentStatusMessage[1]);let n,o=setTimeout(()=>{n=this.statusbarService.addEntry({name:g(3176,"Status Message"),text:t,ariaLabel:t},"status.message",0,-Number.MAX_VALUE),o=null},i),a;const r={dispose:()=>{o&&clearTimeout(o),a&&clearTimeout(a),n==null||n.dispose()}};s>0&&(a=setTimeout(()=>r.dispose(),s)),this.currentStatusMessage=[e,r]}};fi=C([d(1,rs),d(2,ee)],fi);var ta=".monaco-workbench>.notifications-toasts{bottom:26px;display:none;overflow:hidden;position:absolute;right:3px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-toasts{bottom:3px}.monaco-workbench>.notifications-toasts.visible{display:flex;flex-direction:column}.monaco-workbench>.notifications-toasts .notification-toast-container{overflow:hidden}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast{margin:8px;opacity:0;transform:translate3d(0,100%,0);transition:transform .3s ease-out,opacity .3s ease-out}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-list-row,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-list:not(.element-focused):focus:before,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-scrollable-element,.monaco-workbench>.notifications-toasts .notifications-list-container{border-radius:4px}.monaco-workbench.reduce-motion>.notifications-toasts .notification-toast-container>.notification-toast{transition:transform 0ms ease-out,opacity 0ms ease-out}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in{opacity:1;transform:none}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in-done{opacity:1;transform:none;transition:none}.monaco-workbench>.notifications-toasts .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}";Ue(ta,{});var de,U;(function(u){u[u.HIDDEN_OR_VISIBLE=0]="HIDDEN_OR_VISIBLE",u[u.HIDDEN=1]="HIDDEN",u[u.VISIBLE=2]="VISIBLE"})(U||(U={}));var j;let gi=(j=class extends os{get isVisible(){return!!this._isVisible}constructor(e,t,i,s,n,o,a,r,c){super(n),this.container=e,this.model=t,this.instantiationService=i,this.layoutService=s,this.editorGroupService=o,this.contextKeyService=a,this.lifecycleService=r,this.hostService=c,this._onDidChangeVisibility=this._register(new w),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._isVisible=!1,this.mapNotificationToToast=new Map,this.mapNotificationToDisposable=new Map,this.notificationsToastsVisibleContextKey=J.bindTo(this.contextKeyService),this.addedToastsIntervalCounter=new Zs(de.SPAM_PROTECTION.interval),this.registerListeners()}registerListeners(){this._register(this.layoutService.onDidLayoutMainContainer(e=>this.layout(We.lift(e)))),this.lifecycleService.when(3).then(()=>{this.model.notifications.forEach(e=>this.addToast(e)),this._register(this.model.onDidChangeNotification(e=>this.onDidChangeNotification(e)))}),this._register(this.model.onDidChangeFilter(({global:e,sources:t})=>{if(e===v.ERROR)this.hide();else if(t)for(const[i]of this.mapNotificationToToast)typeof i.sourceId=="string"&&t.get(i.sourceId)===v.ERROR&&i.severity!==k.Error&&i.priority!==G.URGENT&&this.removeToast(i)}))}onDidChangeNotification(e){switch(e.kind){case 0:return this.addToast(e.item);case 3:return this.removeToast(e.item)}}addToast(e){if(this.isNotificationsCenterVisible||e.priority===G.SILENT||this.addedToastsIntervalCounter.increment()>de.SPAM_PROTECTION.limit)return;const t=new B;this.mapNotificationToDisposable.set(e,t),t.add(Ys(R(this.container),()=>this.doAddToast(e,t)))}doAddToast(e,t){let i=this.notificationsToastsContainer;i||(i=this.notificationsToastsContainer=document.createElement("div"),i.classList.add("notifications-toasts"),this.container.appendChild(i)),i.classList.add("visible");const s=document.createElement("div");s.classList.add("notification-toast-container");const n=i.firstChild;n?i.insertBefore(s,n):i.appendChild(s);const o=document.createElement("div");o.classList.add("notification-toast"),s.appendChild(o);const a=this.instantiationService.createInstance(Lt,o,{verticalScrollMode:2,widgetAriaLabel:e.source?g(3144,"{0}, source: {1}, notification",e.message.raw,e.source):g(3143,"{0}, notification",e.message.raw)});t.add(a);const r={item:e,list:a,container:s,toast:o};this.mapNotificationToToast.set(e,r),t.add(st(()=>this.updateToastVisibility(r,!1))),a.show();const c=this.computeMaxDimensions();this.layoutLists(c.width),a.updateNotificationsList(0,0,[e]),this.layoutContainer(c.height),t.add(e.onDidChangeExpansion(()=>{a.updateNotificationsList(0,1,[e])})),t.add(e.onDidChangeContent(h=>{switch(h.kind){case 2:a.updateNotificationsList(0,1,[e]);break;case 1:e.expanded&&a.updateNotificationHeight(e);break}})),Z.once(e.onDidClose)(()=>{this.removeToast(e)}),this.purgeNotification(e,s,a,t),this.updateStyles(),this.notificationsToastsVisibleContextKey.set(!0),o.classList.add("notification-fade-in"),t.add($(o,"transitionend",()=>{o.classList.remove("notification-fade-in"),o.classList.add("notification-fade-in-done")})),e.updateVisibility(!0),this._isVisible||(this._isVisible=!0,this._onDidChangeVisibility.fire())}purgeNotification(e,t,i,s){let n=!1;s.add($(t,Q.MOUSE_OVER,()=>n=!0)),s.add($(t,Q.MOUSE_OUT,()=>n=!1));let o,a;const r=()=>{o=setTimeout(()=>{this.hostService.hasFocus?e.sticky||i.hasFocus()||n?r():this.removeToast(e):a||(a=this.hostService.onDidChangeFocus(c=>{c&&r()}),s.add(a))},de.PURGE_TIMEOUT[e.severity])};r(),s.add(st(()=>clearTimeout(o)))}removeToast(e){let t=!1;const i=this.mapNotificationToToast.get(e);i&&(Ge(i.container)&&(t=!(this.focusNext()||this.focusPrevious())),this.mapNotificationToToast.delete(e));const s=this.mapNotificationToDisposable.get(e);s&&(at(s),this.mapNotificationToDisposable.delete(e)),this.mapNotificationToToast.size>0?this.layout(this.workbenchDimensions):(this.doHide(),t&&this.editorGroupService.activeGroup.focus())}removeToasts(){this.mapNotificationToToast.clear(),this.mapNotificationToDisposable.forEach(e=>at(e)),this.mapNotificationToDisposable.clear(),this.doHide()}doHide(){var e;(e=this.notificationsToastsContainer)==null||e.classList.remove("visible"),this.notificationsToastsVisibleContextKey.set(!1),this._isVisible&&(this._isVisible=!1,this._onDidChangeVisibility.fire())}hide(){const e=this.notificationsToastsContainer?Ge(this.notificationsToastsContainer):!1;this.removeToasts(),e&&this.editorGroupService.activeGroup.focus()}focus(){const e=this.getToasts(U.VISIBLE);return e.length>0?(e[0].list.focusFirst(),!0):!1}focusNext(){const e=this.getToasts(U.VISIBLE);for(let t=0;t<e.length;t++)if(e[t].list.hasFocus()){const s=e[t+1];if(s)return s.list.focusFirst(),!0;break}return!1}focusPrevious(){const e=this.getToasts(U.VISIBLE);for(let t=0;t<e.length;t++)if(e[t].list.hasFocus()){const s=e[t-1];if(s)return s.list.focusFirst(),!0;break}return!1}focusFirst(){const e=this.getToasts(U.VISIBLE)[0];return e?(e.list.focusFirst(),!0):!1}focusLast(){const e=this.getToasts(U.VISIBLE);return e.length>0?(e[e.length-1].list.focusFirst(),!0):!1}update(e){this.isNotificationsCenterVisible!==e&&(this.isNotificationsCenterVisible=e,this.isNotificationsCenterVisible&&this.removeToasts())}updateStyles(){this.mapNotificationToToast.forEach(({toast:e})=>{const t=this.getColor(ns);e.style.background=t||"";const i=this.getColor(as);e.style.boxShadow=i?`0 0 8px 2px ${i}`:"";const s=this.getColor(Ks);e.style.border=s?`1px solid ${s}`:""})}getToasts(e){const t=[];return this.mapNotificationToToast.forEach(i=>{switch(e){case U.HIDDEN_OR_VISIBLE:t.push(i);break;case U.HIDDEN:this.isToastInDOM(i)||t.push(i);break;case U.VISIBLE:this.isToastInDOM(i)&&t.push(i);break}}),t.reverse()}layout(e){this.workbenchDimensions=e;const t=this.computeMaxDimensions();t.height&&this.layoutContainer(t.height),this.layoutLists(t.width)}computeMaxDimensions(){const e=de.MAX_WIDTH;let t=e,i;return this.workbenchDimensions&&(t=this.workbenchDimensions.width,t-=2*8,i=this.workbenchDimensions.height,this.layoutService.isVisible("workbench.parts.statusbar",p)&&(i-=22),this.layoutService.isVisible("workbench.parts.titlebar",p)&&(i-=22),i-=2*12),i=typeof i=="number"?Math.round(i*.618):0,new We(Math.min(e,t),i)}layoutLists(e){this.mapNotificationToToast.forEach(({list:t})=>t.layout(e))}layoutContainer(e){let t=0;for(const i of this.getToasts(U.HIDDEN_OR_VISIBLE)){i.container.style.opacity="0",this.updateToastVisibility(i,!0),e-=i.container.offsetHeight;let s=!1;t===de.MAX_NOTIFICATIONS?s=!1:e>=0&&(s=!0),this.updateToastVisibility(i,s),i.container.style.opacity="",s&&t++}}updateToastVisibility(e,t){if(this.isToastInDOM(e)===t)return;const i=fe(this.notificationsToastsContainer);t?i.appendChild(e.container):e.container.remove(),e.item.updateVisibility(t)}isToastInDOM(e){return!!e.container.parentElement}},de=j,j.MAX_WIDTH=450,j.MAX_NOTIFICATIONS=3,j.PURGE_TIMEOUT={[k.Info]:15e3,[k.Warning]:18e3,[k.Error]:2e4},j.SPAM_PROTECTION={interval:800,limit:j.MAX_NOTIFICATIONS},j);gi=de=C([d(2,P),d(3,q),d(4,ae),d(5,re),d(6,je),d(7,At),d(8,Ze)],gi);var I;(function(u){u.SIDEBAR_HIDDEN="nosidebar",u.MAIN_EDITOR_AREA_HIDDEN="nomaineditorarea",u.PANEL_HIDDEN="nopanel",u.AUXILIARYBAR_HIDDEN="noauxiliarybar",u.STATUSBAR_HIDDEN="nostatusbar",u.FULLSCREEN="fullscreen",u.MAXIMIZED="maximized",u.WINDOW_BORDER="border"})(I||(I={}));const ia=["workbench.activityBar.location","window.commandCenter","workbench.editor.editorActionsLocation","workbench.layoutControl.enabled","window.menuBarVisibility","window.titleBarStyle","window.customTitleBarVisibility"];class sa extends z{get activeContainer(){return this.getContainerFromDocument(cs())}get containers(){const e=[];for(const{window:t}of Xs())e.push(this.getContainerFromDocument(t.document));return e}getContainerFromDocument(e){return e===this.mainContainer.ownerDocument?this.mainContainer:e.body.getElementsByClassName("monaco-workbench")[0]}whenContainerStylesLoaded(e){return this.containerStylesLoaded.get(e.vscodeWindowId)}get mainContainerDimension(){return this._mainContainerDimension}get activeContainerDimension(){return this.getContainerDimension(this.activeContainer)}getContainerDimension(e){return e===this.mainContainer?this.mainContainerDimension:ei(e)}get mainContainerOffset(){return this.computeContainerOffset(p)}get activeContainerOffset(){return this.computeContainerOffset(R(this.activeContainer))}computeContainerOffset(e){let t=0,i=0;this.isVisible("workbench.parts.banner")&&(t=this.getPart("workbench.parts.banner").maximumHeight,i=t);const s=this.isVisible("workbench.parts.titlebar",e);return s&&(t+=this.getPart("workbench.parts.titlebar").maximumHeight,i=t),s&&this.configurationService.getValue("window.commandCenter")!==!1&&(i=6),{top:t,quickPickTop:i}}constructor(e){super(),this.parent=e,this._onDidChangeZenMode=this._register(new w),this.onDidChangeZenMode=this._onDidChangeZenMode.event,this._onDidChangeMainEditorCenteredLayout=this._register(new w),this.onDidChangeMainEditorCenteredLayout=this._onDidChangeMainEditorCenteredLayout.event,this._onDidChangePanelAlignment=this._register(new w),this.onDidChangePanelAlignment=this._onDidChangePanelAlignment.event,this._onDidChangeWindowMaximized=this._register(new w),this.onDidChangeWindowMaximized=this._onDidChangeWindowMaximized.event,this._onDidChangePanelPosition=this._register(new w),this.onDidChangePanelPosition=this._onDidChangePanelPosition.event,this._onDidChangePartVisibility=this._register(new w),this.onDidChangePartVisibility=this._onDidChangePartVisibility.event,this._onDidChangeNotificationsVisibility=this._register(new w),this.onDidChangeNotificationsVisibility=this._onDidChangeNotificationsVisibility.event,this._onDidLayoutMainContainer=this._register(new w),this.onDidLayoutMainContainer=this._onDidLayoutMainContainer.event,this._onDidLayoutActiveContainer=this._register(new w),this.onDidLayoutActiveContainer=this._onDidLayoutActiveContainer.event,this._onDidLayoutContainer=this._register(new w),this.onDidLayoutContainer=this._onDidLayoutContainer.event,this._onDidAddContainer=this._register(new w),this.onDidAddContainer=this._onDidAddContainer.event,this._onDidChangeActiveContainer=this._register(new w),this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event,this.mainContainer=document.createElement("div"),this.containerStylesLoaded=new Map,this.parts=new Map,this.initialized=!1,this.disposed=!1,this._openedDefaultEditors=!1,this.whenReadyPromise=new Ri,this.whenReady=this.whenReadyPromise.p,this.whenRestoredPromise=new Ri,this.whenRestored=this.whenRestoredPromise.p,this.restored=!1}initLayout(e){this.environmentService=e.get(dt),this.configurationService=e.get(Ne),this.hostService=e.get(Ze),this.contextService=e.get($s),this.storageService=e.get(ce),this.workingCopyBackupService=e.get(Qs),this.themeService=e.get(ae),this.extensionService=e.get(qs),this.logService=e.get(ls),this.telemetryService=e.get(nt),this.auxiliaryWindowService=e.get(Js),this.editorService=e.get(ut),this.mainPartEditorService=this.editorService.createScoped("main",this._store),this.editorGroupService=e.get(re),this.paneCompositeService=e.get(en),this.viewDescriptorService=e.get(tn),this.titleService=e.get(Vi),this.notificationService=e.get(ee),this.statusBarService=e.get(rs),e.get(xe),this.registerLayoutListeners(),this.initLayoutState(e.get(At),e.get(sn))}registerLayoutListeners(){const e=()=>{this.isVisible("workbench.parts.editor",p)||this.toggleMaximizedPanel()};this.editorGroupService.whenRestored.then(()=>{this._register(this.mainPartEditorService.onDidVisibleEditorsChange(e)),this._register(this.editorGroupService.mainPart.onDidActivateGroup(e)),this._register(this.mainPartEditorService.onDidActiveEditorChange(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(l.MAIN_EDITOR_CENTERED))))}),this._register(this.configurationService.onDidChangeConfiguration(i=>{if([...ia,L.SIDEBAR_POSITION,L.STATUSBAR_VISIBLE].some(s=>i.affectsConfiguration(s))){const s=i.affectsConfiguration("workbench.editor.editorActionsLocation")&&this.configurationService.getValue("workbench.editor.editorActionsLocation")==="titleBar";let n=!1;if(i.affectsConfiguration("workbench.activityBar.location")){const o=this.configurationService.getValue("workbench.activityBar.location");n=o==="top"||o==="bottom"}(n||s)&&this.configurationService.getValue("window.customTitleBarVisibility")==="never"&&this.configurationService.updateValue("window.customTitleBarVisibility","auto"),this.doUpdateLayoutConfiguration()}})),this._register(nn(i=>this.onFullscreenChanged(i))),this._register(this.editorGroupService.mainPart.onDidAddGroup(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(l.MAIN_EDITOR_CENTERED)))),this._register(this.editorGroupService.mainPart.onDidRemoveGroup(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(l.MAIN_EDITOR_CENTERED)))),this._register(this.editorGroupService.mainPart.onDidChangeGroupMaximized(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(l.MAIN_EDITOR_CENTERED)))),this._register($(this.mainContainer,Q.SCROLL,()=>this.mainContainer.scrollTop=0)),(Et||xi||x)&&!ge(this.configurationService)&&this._register(this.titleService.onMenubarVisibilityChange(i=>this.onMenubarToggled(i))),this._register(this.themeService.onDidColorThemeChange(()=>this.updateWindowsBorder())),this._register(this.hostService.onDidChangeFocus(i=>this.onWindowFocusChanged(i))),this._register(this.hostService.onDidChangeActiveWindow(()=>this.onActiveWindowChanged())),x&&typeof navigator.windowControlsOverlay=="object"&&this._register($(navigator.windowControlsOverlay,"geometrychange",()=>this.onDidChangeWCO())),this._register(this.auxiliaryWindowService.onDidOpenAuxiliaryWindow(({window:i,disposables:s})=>{const n=i.window.vscodeWindowId;this.containerStylesLoaded.set(n,i.whenStylesHaveLoaded),i.whenStylesHaveLoaded.then(()=>this.containerStylesLoaded.delete(n)),s.add(st(()=>this.containerStylesLoaded.delete(n)));const o=s.add(new B);this._onDidAddContainer.fire({container:i.container,disposables:o}),s.add(i.onDidLayout(a=>this.handleContainerDidLayout(i.container,a)))}))}onMenubarToggled(e){if(e!==this.state.runtime.menuBar.toggled){this.state.runtime.menuBar.toggled=e;const t=ti(this.configurationService);x&&t==="toggle"?this.workbenchGrid.setViewVisible(this.titleBarPartView,le(this.configurationService,p,this.state.runtime.menuBar.toggled)):this.state.runtime.mainWindowFullscreen&&(t==="toggle"||t==="classic")&&this.workbenchGrid.setViewVisible(this.titleBarPartView,le(this.configurationService,p,this.state.runtime.menuBar.toggled)),this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}}handleContainerDidLayout(e,t){e===this.mainContainer&&this._onDidLayoutMainContainer.fire(t),hs(e)&&this._onDidLayoutActiveContainer.fire(t),this._onDidLayoutContainer.fire({container:e,dimension:t})}onFullscreenChanged(e){e===p.vscodeWindowId&&(this.state.runtime.mainWindowFullscreen=Oi(p),this.state.runtime.mainWindowFullscreen?this.mainContainer.classList.add(I.FULLSCREEN):(this.mainContainer.classList.remove(I.FULLSCREEN),this.stateModel.getRuntimeValue(l.ZEN_MODE_EXIT_INFO).transitionedToFullScreen&&this.isZenModeActive()&&this.toggleZenMode()),this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen,this.workbenchGrid.setViewVisible(this.titleBarPartView,le(this.configurationService,p,this.state.runtime.menuBar.toggled)),this.updateWindowsBorder(!0))}onActiveWindowChanged(){const e=this.getActiveContainerId();this.state.runtime.activeContainerId!==e&&(this.state.runtime.activeContainerId=e,this.updateWindowsBorder(),this._onDidChangeActiveContainer.fire())}onWindowFocusChanged(e){this.state.runtime.hasFocus!==e&&(this.state.runtime.hasFocus=e,this.updateWindowsBorder())}getActiveContainerId(){const e=this.activeContainer;return R(e).vscodeWindowId}doUpdateLayoutConfiguration(e){this.updateCustomTitleBarVisibility(),this.updateMenubarVisibility(!!e),this.editorGroupService.whenRestored.then(()=>{this.centerMainEditorLayout(this.stateModel.getRuntimeValue(l.MAIN_EDITOR_CENTERED),e)})}setSideBarPosition(e){const t=this.getPart("workbench.parts.activitybar"),i=this.getPart("workbench.parts.sidebar"),s=this.getPart("workbench.parts.auxiliarybar"),n=e===0?"left":"right",o=e===1?"left":"right",a=this.getPanelAlignment(),r=this.getPanelPosition();this.stateModel.setRuntimeValue(l.SIDEBAR_POSITON,e);const c=fe(t.getContainer()),h=fe(i.getContainer()),f=fe(s.getContainer());c.classList.remove(o),h.classList.remove(o),c.classList.add(n),h.classList.add(n),f.classList.remove(n),f.classList.add(o),t.updateStyles(),i.updateStyles(),s.updateStyles(),this.adjustPartPositions(e,a,r)}updateWindowsBorder(e=!1){if(x||Et||on(this.configurationService)||ge(this.configurationService))return;const t=this.themeService.getColorTheme(),i=t.getColor(an),s=t.getColor(rn),n=this.hasMainWindowBorder();for(const o of this.containers){const a=o===this.mainContainer,r=this.activeContainer===o,c=bt(R(o));let h=!1;if(!this.state.runtime.mainWindowFullscreen&&!this.state.runtime.maximized.has(c)&&(i||s)){h=!0;const f=r&&this.state.runtime.hasFocus?i:s??i;o.style.setProperty("--window-border-color",(f==null?void 0:f.toString())??"transparent")}a&&(this.state.runtime.mainWindowBorder=h),o.classList.toggle(I.WINDOW_BORDER,h)}!e&&n!==this.hasMainWindowBorder()&&this.layout()}initLayoutState(e,t){var o,a,r,c;this.stateModel=new mi(this.storageService,this.configurationService,this.contextService,this.parent),this.stateModel.load(),this.stateModel.getRuntimeValue(l.PANEL_HIDDEN)&&this.stateModel.getRuntimeValue(l.EDITOR_HIDDEN)&&this.stateModel.setRuntimeValue(l.EDITOR_HIDDEN,!1),this._register(this.stateModel.onDidChangeState(h=>{h.key===l.ACTIVITYBAR_HIDDEN&&this.setActivityBarHidden(h.value),h.key===l.STATUSBAR_HIDDEN&&this.setStatusBarHidden(h.value),h.key===l.SIDEBAR_POSITON&&this.setSideBarPosition(h.value),h.key===l.PANEL_POSITION&&this.setPanelPosition(h.value),h.key===l.PANEL_ALIGNMENT&&this.setPanelAlignment(h.value),this.doUpdateLayoutConfiguration()}));const i=this.getInitialEditorsState();i&&this.logService.trace("Initial editor state",i);const s={layout:{editors:i==null?void 0:i.layout},editor:{restoreEditors:this.shouldRestoreEditors(this.contextService,i),editorsToOpen:this.resolveEditorsToOpen(t,i)},views:{defaults:this.getDefaultLayoutViews(this.environmentService,this.storageService),containerToRestore:{}}},n={activeContainerId:this.getActiveContainerId(),mainWindowFullscreen:Oi(p),hasFocus:this.hostService.hasFocus,maximized:new Set,mainWindowBorder:!1,menuBar:{toggled:!1},zenMode:{transitionDisposables:new cn}};if(this.state={initialization:s,runtime:n},this.isVisible("workbench.parts.sidebar")){let h;!this.environmentService.isBuilt||e.startupKind===3||this.environmentService.isExtensionDevelopment&&!this.environmentService.extensionTestsLocationURI?h=this.storageService.get(ln.activeViewletSettingsKey,1,(o=this.viewDescriptorService.getDefaultViewContainer(0))==null?void 0:o.id):h=(a=this.viewDescriptorService.getDefaultViewContainer(0))==null?void 0:a.id,h?this.state.initialization.views.containerToRestore.sideBar=h:this.stateModel.setRuntimeValue(l.SIDEBAR_HIDDEN,!0)}if(this.isVisible("workbench.parts.panel")){const h=this.storageService.get(hn.activePanelSettingsKey,1,(r=this.viewDescriptorService.getDefaultViewContainer(1))==null?void 0:r.id);h?this.state.initialization.views.containerToRestore.panel=h:this.stateModel.setRuntimeValue(l.PANEL_HIDDEN,!0)}if(this.isVisible("workbench.parts.auxiliarybar")){let h=this.storageService.get(dn.activePanelSettingsKey,1,(c=this.viewDescriptorService.getDefaultViewContainer(2))==null?void 0:c.id);h?(h==="workbench.panel.chatSidebar"&&(h="workbench.panel.chat"),this.state.initialization.views.containerToRestore.auxiliaryBar=h):this.stateModel.setRuntimeValue(l.AUXILIARYBAR_HIDDEN,!0)}this.updateWindowsBorder(!0)}getDefaultLayoutViews(e,t){var n;const i=(n=e.options)==null?void 0:n.defaultLayout;if(!i||!i.force&&!t.isNew(1))return;const{views:s}=i;if(s!=null&&s.length)return s.map(o=>o.id)}shouldRestoreEditors(e,t){return un(e.getWorkspace())?!1:!!(this.configurationService.getValue("window.restoreWindows")==="preserve")||t===void 0}willRestoreEditors(){return this.state.initialization.editor.restoreEditors}async resolveEditorsToOpen(e,t){var i;if(t){const s=pt(await Yt(t.filesToMerge,e,this.logService));if(s.length===4&&ft(s[0])&&ft(s[1])&&ft(s[2])&&ft(s[3]))return[{editor:{input1:{resource:s[0].resource},input2:{resource:s[1].resource},base:{resource:s[2].resource},result:{resource:s[3].resource},options:{pinned:!0}}}];const n=pt(await Yt(t.filesToDiff,e,this.logService));if(n.length===2)return[{editor:{original:{resource:n[0].resource},modified:{resource:n[1].resource},options:{pinned:!0}}}];const o=[],a=await Yt(t.filesToOpenOrCreate,e,this.logService);for(let r=0;r<a.length;r++){const c=a[r];c&&o.push({editor:c,viewColumn:(i=t.filesToOpenOrCreate)==null?void 0:i[r].viewColumn})}return o}else if(this.contextService.getWorkbenchState()===1&&this.configurationService.getValue("workbench.startupEditor")==="newUntitledFile")return this.editorGroupService.hasRestorableState?[]:await this.workingCopyBackupService.hasBackups()?[]:[{editor:{resource:void 0}}];return[]}get openedDefaultEditors(){return this._openedDefaultEditors}getInitialEditorsState(){var n,o,a,r,c;const e=(n=this.environmentService.options)==null?void 0:n.defaultLayout;if(((o=e==null?void 0:e.editors)!=null&&o.length||(a=e==null?void 0:e.layout)!=null&&a.editors)&&(e.force||this.storageService.isNew(1)))return this._openedDefaultEditors=!0,{layout:(r=e.layout)==null?void 0:r.editors,filesToOpenOrCreate:(c=e==null?void 0:e.editors)==null?void 0:c.map(h=>({viewColumn:h.viewColumn,fileUri:Wt.revive(h.uri),openOnlyIfExists:h.openOnlyIfExists,options:h.options}))};const{filesToOpenOrCreate:t,filesToDiff:i,filesToMerge:s}=this.environmentService;if(t||i||s)return{filesToOpenOrCreate:t,filesToDiff:i,filesToMerge:s}}isRestored(){return this.restored}restoreParts(){const e=[],t=[];e.push((async()=>{var r;D("code/willRestoreEditors"),await this.editorGroupService.whenReady,D("code/restoreEditors/editorGroupsReady"),(r=this.state.initialization.layout)!=null&&r.editors&&this.editorGroupService.mainPart.applyLayout(this.state.initialization.layout.editors);const o=await this.state.initialization.editor.editorsToOpen;D("code/restoreEditors/editorsToOpenResolved");let a;if(o.length){const c=this.editorGroupService.mainPart.getGroups(2),h=new Map;for(const f of o){const b=c[(f.viewColumn??1)-1];let m=h.get(b.id);m||(m=new Set,h.set(b.id,m)),m.add(f.editor)}a=Promise.all(Array.from(h).map(async([f,b])=>{try{await this.editorService.openEditors(Array.from(b),f,{validateTrust:!0})}catch(m){this.logService.error(m)}}))}t.push(Promise.all([a==null?void 0:a.finally(()=>D("code/restoreEditors/editorsOpened")),this.editorGroupService.whenRestored.finally(()=>D("code/restoreEditors/editorGroupsRestored"))]).finally(()=>{D("code/didRestoreEditors")}))})());const i=(async()=>{var o;if((o=this.state.initialization.views.defaults)!=null&&o.length){D("code/willOpenDefaultViews");const a=[],r=f=>{var m;const b=this.viewDescriptorService.getViewLocationById(f.id);if(b!==null){const S=this.viewDescriptorService.getViewContainerByViewId(f.id);if(S){f.order>=(((m=a==null?void 0:a[b])==null?void 0:m.order)??0)&&(a[b]={id:S.id,order:f.order});const y=this.viewDescriptorService.getViewContainerModel(S);return y.setCollapsed(f.id,!1),y.setVisible(f.id,!0),!0}}return!1},c=[...this.state.initialization.views.defaults].reverse().map((f,b)=>({id:f,order:b}));let h=c.length;for(;h;)h--,r(c[h])&&c.splice(h,1);if(c.length){await this.extensionService.whenInstalledExtensionsRegistered();let f=c.length;for(;f;)f--,r(c[f])&&c.splice(f,1)}a[0]&&(this.state.initialization.views.containerToRestore.sideBar=a[0].id),a[1]&&(this.state.initialization.views.containerToRestore.panel=a[1].id),a[2]&&(this.state.initialization.views.containerToRestore.auxiliaryBar=a[2].id),D("code/didOpenDefaultViews")}})();e.push(i),e.push((async()=>{var a;if(await i,!this.state.initialization.views.containerToRestore.sideBar)return;D("code/willRestoreViewlet"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.sideBar,0)||await this.paneCompositeService.openPaneComposite((a=this.viewDescriptorService.getDefaultViewContainer(0))==null?void 0:a.id,0),D("code/didRestoreViewlet")})()),e.push((async()=>{var a;if(await i,!this.state.initialization.views.containerToRestore.panel)return;D("code/willRestorePanel"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.panel,1)||await this.paneCompositeService.openPaneComposite((a=this.viewDescriptorService.getDefaultViewContainer(1))==null?void 0:a.id,1),D("code/didRestorePanel")})()),e.push((async()=>{var a;if(await i,!this.state.initialization.views.containerToRestore.auxiliaryBar)return;D("code/willRestoreAuxiliaryBar"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.auxiliaryBar,2)||await this.paneCompositeService.openPaneComposite((a=this.viewDescriptorService.getDefaultViewContainer(2))==null?void 0:a.id,2),D("code/didRestoreAuxiliaryBar")})());const s=this.isZenModeActive(),n=$i(this.configurationService).restore;s&&(this.setZenModeActive(!n),this.toggleZenMode(!1,!0)),this.stateModel.getRuntimeValue(l.MAIN_EDITOR_CENTERED)&&this.centerMainEditorLayout(!0,!0),zi.settled(e).finally(()=>{this.whenReadyPromise.complete(),zi.settled(t).finally(()=>{this.restored=!0,this.whenRestoredPromise.complete()})})}registerPart(e){const t=e.getId();return this.parts.set(t,e),st(()=>this.parts.delete(t))}getPart(e){const t=this.parts.get(e);if(!t)throw new Error(`Unknown part ${e}`);return t}registerNotifications(e){this._register(e.onDidChangeNotificationsVisibility(t=>this._onDidChangeNotificationsVisibility.fire(t)))}hasFocus(e){const t=this.getContainer(Kt(),e);if(!t)return!1;const i=fn();return i?gn(i,t):!1}focusPart(e,t=p){var s,n,o;const i=this.getContainer(t,e)??this.mainContainer;switch(e){case"workbench.parts.editor":this.editorGroupService.getPart(i).activeGroup.focus();break;case"workbench.parts.panel":{(s=this.paneCompositeService.getActivePaneComposite(1))==null||s.focus();break}case"workbench.parts.sidebar":{(n=this.paneCompositeService.getActivePaneComposite(0))==null||n.focus();break}case"workbench.parts.auxiliarybar":{(o=this.paneCompositeService.getActivePaneComposite(2))==null||o.focus();break}case"workbench.parts.activitybar":this.getPart("workbench.parts.sidebar").focusActivityBar();break;case"workbench.parts.statusbar":this.statusBarService.getPart(i).focus();break;default:i==null||i.focus()}}getContainer(e,t){if(typeof t>"u")return this.getContainerFromDocument(e.document);if(e===p)return this.getPart(t).getContainer();let i;if(t==="workbench.parts.editor"?i=this.editorGroupService.getPart(this.getContainerFromDocument(e.document)):t==="workbench.parts.statusbar"?i=this.statusBarService.getPart(this.getContainerFromDocument(e.document)):t==="workbench.parts.titlebar"&&(i=this.titleService.getPart(this.getContainerFromDocument(e.document))),i instanceof ki)return i.getContainer()}isVisible(e,t=p){if(t!==p&&e==="workbench.parts.editor")return!0;if(this.initialized)switch(e){case"workbench.parts.titlebar":return this.workbenchGrid.isViewVisible(this.titleBarPartView);case"workbench.parts.sidebar":return!this.stateModel.getRuntimeValue(l.SIDEBAR_HIDDEN);case"workbench.parts.panel":return!this.stateModel.getRuntimeValue(l.PANEL_HIDDEN);case"workbench.parts.auxiliarybar":return!this.stateModel.getRuntimeValue(l.AUXILIARYBAR_HIDDEN);case"workbench.parts.statusbar":return!this.stateModel.getRuntimeValue(l.STATUSBAR_HIDDEN);case"workbench.parts.activitybar":return!this.stateModel.getRuntimeValue(l.ACTIVITYBAR_HIDDEN);case"workbench.parts.editor":return!this.stateModel.getRuntimeValue(l.EDITOR_HIDDEN);case"workbench.parts.banner":return this.workbenchGrid.isViewVisible(this.bannerPartView);default:return!1}switch(e){case"workbench.parts.titlebar":return le(this.configurationService,p,this.state.runtime.menuBar.toggled);case"workbench.parts.sidebar":return!this.stateModel.getRuntimeValue(l.SIDEBAR_HIDDEN);case"workbench.parts.panel":return!this.stateModel.getRuntimeValue(l.PANEL_HIDDEN);case"workbench.parts.auxiliarybar":return!this.stateModel.getRuntimeValue(l.AUXILIARYBAR_HIDDEN);case"workbench.parts.statusbar":return!this.stateModel.getRuntimeValue(l.STATUSBAR_HIDDEN);case"workbench.parts.activitybar":return!this.stateModel.getRuntimeValue(l.ACTIVITYBAR_HIDDEN);case"workbench.parts.editor":return!this.stateModel.getRuntimeValue(l.EDITOR_HIDDEN);default:return!1}}shouldShowBannerFirst(){return x&&!ii()}focus(){this.focusPart("workbench.parts.editor",R(this.activeContainer))}focusPanelOrEditor(){const e=this.paneCompositeService.getActivePaneComposite(1);(this.hasFocus("workbench.parts.panel")||!this.isVisible("workbench.parts.editor"))&&e?e.focus():this.focus()}getMaximumEditorDimensions(e){const t=R(e),i=this.getContainerDimension(e);if(e===this.mainContainer){const s=_(this.getPanelPosition()),n=(this.isVisible("workbench.parts.activitybar")?this.activityBarPartView.minimumWidth:0)+(this.isVisible("workbench.parts.sidebar")?this.sideBarPartView.minimumWidth:0)+(this.isVisible("workbench.parts.panel")&&!s?this.panelPartView.minimumWidth:0)+(this.isVisible("workbench.parts.auxiliarybar")?this.auxiliaryBarPartView.minimumWidth:0),o=(this.isVisible("workbench.parts.titlebar",t)?this.titleBarPartView.minimumHeight:0)+(this.isVisible("workbench.parts.statusbar",t)?this.statusBarPartView.minimumHeight:0)+(this.isVisible("workbench.parts.panel")&&s?this.panelPartView.minimumHeight:0),a=i.width-n,r=i.height-o;return{width:a,height:r}}else{const s=(this.isVisible("workbench.parts.titlebar",t)?this.titleBarPartView.minimumHeight:0)+(this.isVisible("workbench.parts.statusbar",t)?this.statusBarPartView.minimumHeight:0);return{width:i.width,height:i.height-s}}}isZenModeActive(){return this.stateModel.getRuntimeValue(l.ZEN_MODE_ACTIVE)}setZenModeActive(e){this.stateModel.setRuntimeValue(l.ZEN_MODE_ACTIVE,e)}toggleZenMode(e,t=!1){this.setZenModeActive(!this.isZenModeActive()),this.state.runtime.zenMode.transitionDisposables.clearAndDisposeAll();const i=a=>{for(const r of this.mainPartEditorService.visibleTextEditorControls){if(!a&&Cn(r)&&r.hasModel()){const c=r.getModel();a=this.configurationService.getValue("editor.lineNumbers",{resource:c.uri,overrideIdentifier:c.getLanguageId()})}a||(a=this.configurationService.getValue("editor.lineNumbers")),r.updateOptions({lineNumbers:a})}};let s=!1;const n=$i(this.configurationService),o=this.stateModel.getRuntimeValue(l.ZEN_MODE_EXIT_INFO);this.isZenModeActive()?(s=!this.state.runtime.mainWindowFullscreen&&n.fullScreen&&!Hi,t||(o.transitionedToFullScreen=s,o.transitionedToCenteredEditorLayout=!this.isMainEditorLayoutCentered()&&n.centerLayout,o.handleNotificationsDoNotDisturbMode=this.notificationService.getFilter()===v.OFF,o.wasVisible.sideBar=this.isVisible("workbench.parts.sidebar"),o.wasVisible.panel=this.isVisible("workbench.parts.panel"),o.wasVisible.auxiliaryBar=this.isVisible("workbench.parts.auxiliarybar"),this.stateModel.setRuntimeValue(l.ZEN_MODE_EXIT_INFO,o)),this.setPanelHidden(!0,!0),this.setAuxiliaryBarHidden(!0,!0),this.setSideBarHidden(!0,!0),n.hideActivityBar&&this.setActivityBarHidden(!0,!0),n.hideStatusBar&&this.setStatusBarHidden(!0,!0),n.hideLineNumbers&&(i("off"),this.state.runtime.zenMode.transitionDisposables.set("zenMode.hideLineNumbers",this.mainPartEditorService.onDidVisibleEditorsChange(()=>i("off")))),n.showTabs!==this.editorGroupService.partOptions.showTabs&&this.state.runtime.zenMode.transitionDisposables.set("zenMode.showTabs",this.editorGroupService.mainPart.enforcePartOptions({showTabs:n.showTabs})),n.silentNotifications&&o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(v.ERROR),n.centerLayout&&this.centerMainEditorLayout(!0,!0),this.state.runtime.zenMode.transitionDisposables.set("configurationChange",this.configurationService.onDidChangeConfiguration(a=>{if(a.affectsConfiguration("zenMode.hideActivityBar")){const r=this.configurationService.getValue("zenMode.hideActivityBar");this.setActivityBarHidden(r,!0)}if(a.affectsConfiguration("zenMode.hideStatusBar")){const r=this.configurationService.getValue("zenMode.hideStatusBar");this.setStatusBarHidden(r,!0)}if(a.affectsConfiguration("zenMode.centerLayout")){const r=this.configurationService.getValue("zenMode.centerLayout");this.centerMainEditorLayout(r,!0)}if(a.affectsConfiguration("zenMode.showTabs")){const r=this.configurationService.getValue("zenMode.showTabs")??"multiple";this.state.runtime.zenMode.transitionDisposables.set("zenMode.showTabs",this.editorGroupService.mainPart.enforcePartOptions({showTabs:r}))}if(a.affectsConfiguration("zenMode.silentNotifications")){const r=!!this.configurationService.getValue("zenMode.silentNotifications");o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(r?v.ERROR:v.OFF)}if(a.affectsConfiguration("zenMode.hideLineNumbers")){const r=this.configurationService.getValue("zenMode.hideLineNumbers")?"off":void 0;i(r),this.state.runtime.zenMode.transitionDisposables.set("zenMode.hideLineNumbers",this.mainPartEditorService.onDidVisibleEditorsChange(()=>i(r)))}}))):(o.wasVisible.panel&&this.setPanelHidden(!1,!0),o.wasVisible.auxiliaryBar&&this.setAuxiliaryBarHidden(!1,!0),o.wasVisible.sideBar&&this.setSideBarHidden(!1,!0),this.stateModel.getRuntimeValue(l.ACTIVITYBAR_HIDDEN,!0)||this.setActivityBarHidden(!1,!0),this.stateModel.getRuntimeValue(l.STATUSBAR_HIDDEN,!0)||this.setStatusBarHidden(!1,!0),o.transitionedToCenteredEditorLayout&&this.centerMainEditorLayout(!1,!0),o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(v.OFF),i(),this.focus(),s=o.transitionedToFullScreen&&this.state.runtime.mainWindowFullscreen),e||this.layout(),s&&this.hostService.toggleFullScreen(p),this._onDidChangeZenMode.fire(this.isZenModeActive())}setStatusBarHidden(e,t){this.stateModel.setRuntimeValue(l.STATUSBAR_HIDDEN,e),e?this.mainContainer.classList.add(I.STATUSBAR_HIDDEN):this.mainContainer.classList.remove(I.STATUSBAR_HIDDEN),this.workbenchGrid.setViewVisible(this.statusBarPartView,!e)}createWorkbenchLayout(){const e=this.getPart("workbench.parts.titlebar"),t=this.getPart("workbench.parts.banner"),i=this.getPart("workbench.parts.editor"),s=this.getPart("workbench.parts.activitybar"),n=this.getPart("workbench.parts.panel"),o=this.getPart("workbench.parts.auxiliarybar"),a=this.getPart("workbench.parts.sidebar"),r=this.getPart("workbench.parts.statusbar");this.titleBarPartView=e,this.bannerPartView=t,this.sideBarPartView=a,this.activityBarPartView=s,this.editorPartView=i,this.panelPartView=n,this.auxiliaryBarPartView=o,this.statusBarPartView=r;const c={"workbench.parts.activitybar":this.activityBarPartView,"workbench.parts.banner":this.bannerPartView,"workbench.parts.titlebar":this.titleBarPartView,"workbench.parts.editor":this.editorPartView,"workbench.parts.panel":this.panelPartView,"workbench.parts.sidebar":this.sideBarPartView,"workbench.parts.statusbar":this.statusBarPartView,"workbench.parts.auxiliarybar":this.auxiliaryBarPartView},h=({type:b})=>c[b],f=mn.deserialize(this.createGridDescriptor(),{fromJSON:h},{proportionalLayout:!1});this.mainContainer.prepend(f.element),this.mainContainer.setAttribute("role","application"),this.workbenchGrid=f,this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen;for(const b of[e,i,s,n,a,r,o,t])this._register(b.onDidVisibilityChange(m=>{b===a?this.setSideBarHidden(!m,!0):b===n?this.setPanelHidden(!m,!0):b===o?this.setAuxiliaryBarHidden(!m,!0):b===i&&this.setEditorHidden(!m,!0),this._onDidChangePartVisibility.fire(),this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}));this._register(this.storageService.onWillSaveState(b=>{const m=this.stateModel.getRuntimeValue(l.SIDEBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView):this.workbenchGrid.getViewSize(this.sideBarPartView).width;this.stateModel.setInitializationValue(l.SIDEBAR_SIZE,m);const S=this.stateModel.getRuntimeValue(l.PANEL_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView):_(this.stateModel.getRuntimeValue(l.PANEL_POSITION))?this.workbenchGrid.getViewSize(this.panelPartView).height:this.workbenchGrid.getViewSize(this.panelPartView).width;this.stateModel.setInitializationValue(l.PANEL_SIZE,S);const y=this.stateModel.getRuntimeValue(l.AUXILIARYBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView):this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width;this.stateModel.setInitializationValue(l.AUXILIARYBAR_SIZE,y),this.stateModel.save(!0,!0)}))}layout(){this.disposed||(this._mainContainerDimension=ei(this.state.runtime.mainWindowFullscreen?p.document.body:this.parent),this.logService.trace(`Layout#layout, height: ${this._mainContainerDimension.height}, width: ${this._mainContainerDimension.width}`),bn(this.mainContainer,0,0,0,0,"relative"),pn(this.mainContainer,this._mainContainerDimension.width,this._mainContainerDimension.height),this.workbenchGrid.layout(this._mainContainerDimension.width,this._mainContainerDimension.height),this.initialized=!0,this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension))}isMainEditorLayoutCentered(){return this.stateModel.getRuntimeValue(l.MAIN_EDITOR_CENTERED)}centerMainEditorLayout(e,t){this.stateModel.setRuntimeValue(l.MAIN_EDITOR_CENTERED,e);const i=this.mainPartEditorService.activeEditor;let s=!1;i instanceof wn?s=this.configurationService.getValue("diffEditor.renderSideBySide"):i!=null&&i.hasCapability(256)&&(s=!0),this.configurationService.getValue("workbench.editor.centeredLayoutAutoResize")&&(this.editorGroupService.mainPart.groups.length>1&&!this.editorGroupService.mainPart.hasMaximizedGroup()||s)&&(e=!1),this.editorGroupService.mainPart.isLayoutCentered()!==e&&(this.editorGroupService.mainPart.centerLayout(e),t||this.layout()),this._onDidChangeMainEditorCenteredLayout.fire(this.stateModel.getRuntimeValue(l.MAIN_EDITOR_CENTERED))}resizePart(e,t,i){const s=Math.sign(t)*Fi(Kt(),Math.abs(t)),n=Math.sign(i)*Fi(Kt(),Math.abs(i));let o;switch(e){case"workbench.parts.sidebar":o=this.workbenchGrid.getViewSize(this.sideBarPartView),this.workbenchGrid.resizeView(this.sideBarPartView,{width:o.width+s,height:o.height});break;case"workbench.parts.panel":o=this.workbenchGrid.getViewSize(this.panelPartView),this.workbenchGrid.resizeView(this.panelPartView,{width:o.width+(_(this.getPanelPosition())?0:s),height:o.height+(_(this.getPanelPosition())?n:0)});break;case"workbench.parts.auxiliarybar":o=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView),this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{width:o.width+s,height:o.height});break;case"workbench.parts.editor":if(o=this.workbenchGrid.getViewSize(this.editorPartView),this.editorGroupService.mainPart.count===1)this.workbenchGrid.resizeView(this.editorPartView,{width:o.width+s,height:o.height+n});else{const a=this.editorGroupService.mainPart.activeGroup,{width:r,height:c}=this.editorGroupService.mainPart.getSize(a);this.editorGroupService.mainPart.setSize(a,{width:r+s,height:c+n});const{width:h,height:f}=this.editorGroupService.mainPart.getSize(a);(n&&c===f||s&&r===h)&&this.workbenchGrid.resizeView(this.editorPartView,{width:o.width+(s&&r===h?s:0),height:o.height+(n&&c===f?n:0)})}break;default:return}}setActivityBarHidden(e,t){this.stateModel.setRuntimeValue(l.ACTIVITYBAR_HIDDEN,e),this.workbenchGrid.setViewVisible(this.activityBarPartView,!e)}setBannerHidden(e){this.workbenchGrid.setViewVisible(this.bannerPartView,!e)}setEditorHidden(e,t){this.stateModel.setRuntimeValue(l.EDITOR_HIDDEN,e),e?this.mainContainer.classList.add(I.MAIN_EDITOR_AREA_HIDDEN):this.mainContainer.classList.remove(I.MAIN_EDITOR_AREA_HIDDEN),this.workbenchGrid.setViewVisible(this.editorPartView,!e),e&&!this.isVisible("workbench.parts.panel")&&this.setPanelHidden(!1,!0)}getLayoutClasses(){return pt([this.isVisible("workbench.parts.sidebar")?void 0:I.SIDEBAR_HIDDEN,this.isVisible("workbench.parts.editor",p)?void 0:I.MAIN_EDITOR_AREA_HIDDEN,this.isVisible("workbench.parts.panel")?void 0:I.PANEL_HIDDEN,this.isVisible("workbench.parts.auxiliarybar")?void 0:I.AUXILIARYBAR_HIDDEN,this.isVisible("workbench.parts.statusbar")?void 0:I.STATUSBAR_HIDDEN,this.state.runtime.mainWindowFullscreen?I.FULLSCREEN:void 0])}setSideBarHidden(e,t){var i;if(this.stateModel.setRuntimeValue(l.SIDEBAR_HIDDEN,e),e?this.mainContainer.classList.add(I.SIDEBAR_HIDDEN):this.mainContainer.classList.remove(I.SIDEBAR_HIDDEN),e&&this.paneCompositeService.getActivePaneComposite(0))this.paneCompositeService.hideActivePaneComposite(0),this.focusPanelOrEditor();else if(!e&&!this.paneCompositeService.getActivePaneComposite(0)){const s=this.paneCompositeService.getLastActivePaneCompositeId(0);s&&(this.paneCompositeService.openPaneComposite(s,0,!0)||this.paneCompositeService.openPaneComposite((i=this.viewDescriptorService.getDefaultViewContainer(0))==null?void 0:i.id,0,!0))}this.workbenchGrid.setViewVisible(this.sideBarPartView,!e)}hasViews(e){const t=this.viewDescriptorService.getViewContainerById(e);if(!t)return!1;const i=this.viewDescriptorService.getViewContainerModel(t);return i?i.activeViewDescriptors.length>=1:!1}adjustPartPositions(e,t,i){const s=!_(i),n=s||!(t==="center"||e===0&&t==="right"||e===1&&t==="left"),o=s||!(t==="center"||e===1&&t==="right"||e===0&&t==="left"),a=this.isVisible("workbench.parts.panel")?this.workbenchGrid.getViewSize(this.panelPartView).width:Ke.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView)??this.panelPartView.minimumWidth),r=this.isVisible("workbench.parts.panel")?this.workbenchGrid.getViewSize(this.panelPartView).height:Ke.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView)??this.panelPartView.minimumHeight),c=this.isVisible("workbench.parts.sidebar")?this.workbenchGrid.getViewSize(this.sideBarPartView).width:Ke.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView)??this.sideBarPartView.minimumWidth),h=this.isVisible("workbench.parts.auxiliarybar")?this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width:Ke.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView)??this.auxiliaryBarPartView.minimumWidth);e===0?(this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,0]),this.workbenchGrid.moveView(this.sideBarPartView,c,n?this.editorPartView:this.activityBarPartView,n?2:3),o?this.workbenchGrid.moveView(this.auxiliaryBarPartView,h,this.editorPartView,3):this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,-1])):(this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,-1]),this.workbenchGrid.moveView(this.sideBarPartView,c,n?this.editorPartView:this.activityBarPartView,n?3:2),o?this.workbenchGrid.moveView(this.auxiliaryBarPartView,h,this.editorPartView,2):this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,0])),s&&(this.workbenchGrid.moveView(this.panelPartView,a,this.editorPartView,i===0?2:3),this.workbenchGrid.resizeView(this.panelPartView,{height:r,width:a})),this.isVisible("workbench.parts.sidebar")&&this.workbenchGrid.resizeView(this.sideBarPartView,{height:this.workbenchGrid.getViewSize(this.sideBarPartView).height,width:c}),this.isVisible("workbench.parts.auxiliarybar")&&this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{height:this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).height,width:h})}setPanelAlignment(e,t){_(this.getPanelPosition())||this.setPanelPosition(2),e!=="center"&&this.isPanelMaximized()&&this.toggleMaximizedPanel(),this.stateModel.setRuntimeValue(l.PANEL_ALIGNMENT,e),this.adjustPartPositions(this.getSideBarPosition(),e,this.getPanelPosition()),this._onDidChangePanelAlignment.fire(e)}setPanelHidden(e,t){var a;if(!this.workbenchGrid)return;const i=!this.isVisible("workbench.parts.panel");this.stateModel.setRuntimeValue(l.PANEL_HIDDEN,e);const s=this.isPanelMaximized(),n=this.panelOpensMaximized();e?this.mainContainer.classList.add(I.PANEL_HIDDEN):this.mainContainer.classList.remove(I.PANEL_HIDDEN);let o=!1;if(e&&this.paneCompositeService.getActivePaneComposite(1))this.paneCompositeService.hideActivePaneComposite(1),o=!Hi;else if(!e&&!this.paneCompositeService.getActivePaneComposite(1)){let r=this.paneCompositeService.getLastActivePaneCompositeId(1);if((!r||!this.hasViews(r))&&(r=(a=this.viewDescriptorService.getViewContainersByLocation(1).find(c=>this.hasViews(c.id)))==null?void 0:a.id),r){const c=!t;this.paneCompositeService.openPaneComposite(r,1,c)}}e&&s&&this.toggleMaximizedPanel(),i!==e&&(this.workbenchGrid.setViewVisible(this.panelPartView,!e),e?this.stateModel.setRuntimeValue(l.PANEL_WAS_LAST_MAXIMIZED,s):!t&&s!==n&&this.toggleMaximizedPanel(),o&&this.editorGroupService.mainPart.activeGroup.focus())}toggleMaximizedPanel(){const e=this.workbenchGrid.getViewSize(this.panelPartView),t=this.getPanelPosition(),i=this.isPanelMaximized();i?(this.setEditorHidden(!1),this.workbenchGrid.resizeView(this.panelPartView,{width:_(t)?e.width:this.stateModel.getRuntimeValue(l.PANEL_LAST_NON_MAXIMIZED_WIDTH),height:_(t)?this.stateModel.getRuntimeValue(l.PANEL_LAST_NON_MAXIMIZED_HEIGHT):e.height})):(this.isVisible("workbench.parts.panel")&&(_(t)?this.stateModel.setRuntimeValue(l.PANEL_LAST_NON_MAXIMIZED_HEIGHT,e.height):this.stateModel.setRuntimeValue(l.PANEL_LAST_NON_MAXIMIZED_WIDTH,e.width)),this.setEditorHidden(!0)),this.stateModel.setRuntimeValue(l.PANEL_WAS_LAST_MAXIMIZED,!i)}panelOpensMaximized(){if(this.getPanelAlignment()!=="center"&&_(this.getPanelPosition()))return!1;const e=vn(this.configurationService.getValue(ht.PANEL_OPENS_MAXIMIZED)),t=this.stateModel.getRuntimeValue(l.PANEL_WAS_LAST_MAXIMIZED);return e===0||e===2&&t}setAuxiliaryBarHidden(e,t){var i;if(this.stateModel.setRuntimeValue(l.AUXILIARYBAR_HIDDEN,e),e?this.mainContainer.classList.add(I.AUXILIARYBAR_HIDDEN):this.mainContainer.classList.remove(I.AUXILIARYBAR_HIDDEN),e&&this.paneCompositeService.getActivePaneComposite(2))this.paneCompositeService.hideActivePaneComposite(2),this.focusPanelOrEditor();else if(!e&&!this.paneCompositeService.getActivePaneComposite(2)){let s=this.paneCompositeService.getLastActivePaneCompositeId(2);if((!s||!this.hasViews(s))&&(s=(i=this.viewDescriptorService.getViewContainersByLocation(2).find(n=>this.hasViews(n.id)))==null?void 0:i.id),s){const n=!t;this.paneCompositeService.openPaneComposite(s,2,n)}}this.workbenchGrid.setViewVisible(this.auxiliaryBarPartView,!e)}setPartHidden(e,t,i=p){switch(t){case"workbench.parts.activitybar":return this.setActivityBarHidden(e);case"workbench.parts.sidebar":return this.setSideBarHidden(e);case"workbench.parts.editor":return this.setEditorHidden(e);case"workbench.parts.banner":return this.setBannerHidden(e);case"workbench.parts.auxiliarybar":return this.setAuxiliaryBarHidden(e);case"workbench.parts.panel":return this.setPanelHidden(e)}}hasMainWindowBorder(){return this.state.runtime.mainWindowBorder}getMainWindowBorderRadius(){return this.state.runtime.mainWindowBorder&&F?"5px":void 0}isPanelMaximized(){return(this.getPanelAlignment()==="center"||!_(this.getPanelPosition()))&&!this.isVisible("workbench.parts.editor",p)}getSideBarPosition(){return this.stateModel.getRuntimeValue(l.SIDEBAR_POSITON)}getPanelAlignment(){return this.stateModel.getRuntimeValue(l.PANEL_ALIGNMENT)}updateMenubarVisibility(e){const t=le(this.configurationService,p,this.state.runtime.menuBar.toggled);!e&&this.workbenchGrid&&t!==this.isVisible("workbench.parts.titlebar",p)&&this.workbenchGrid.setViewVisible(this.titleBarPartView,t)}updateCustomTitleBarVisibility(){const e=le(this.configurationService,p,this.state.runtime.menuBar.toggled),t=this.isVisible("workbench.parts.titlebar");e!==t&&this.workbenchGrid.setViewVisible(this.titleBarPartView,e)}toggleMenuBar(){let e=ti(this.configurationService);typeof e!="string"&&(e="classic");let t;e==="visible"||e==="classic"?t=ge(this.configurationService)?"toggle":"compact":t="classic",this.configurationService.updateValue("window.menuBarVisibility",t)}getPanelPosition(){return this.stateModel.getRuntimeValue(l.PANEL_POSITION)}setPanelPosition(e){this.isVisible("workbench.parts.panel")||this.setPanelHidden(!1);const t=this.getPart("workbench.parts.panel"),i=Be(this.getPanelPosition()),s=Be(e),n=fe(t.getContainer());n.classList.remove(i),n.classList.add(s),t.updateStyles();const o=this.workbenchGrid.getViewSize(this.panelPartView),a=this.workbenchGrid.getViewSize(this.sideBarPartView),r=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView);let c=!this.isVisible("workbench.parts.editor",p);s!==i&&!c&&(_(e)?this.stateModel.setRuntimeValue(l.PANEL_LAST_NON_MAXIMIZED_WIDTH,o.width):_(mt(i))&&this.stateModel.setRuntimeValue(l.PANEL_LAST_NON_MAXIMIZED_HEIGHT,o.height)),_(e)&&this.getPanelAlignment()!=="center"&&c&&(this.toggleMaximizedPanel(),c=!1),this.stateModel.setRuntimeValue(l.PANEL_POSITION,e);const h=this.isVisible("workbench.parts.sidebar"),f=this.isVisible("workbench.parts.auxiliarybar");e===2?this.workbenchGrid.moveView(this.panelPartView,c?o.height:this.stateModel.getRuntimeValue(l.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,1):e===3?this.workbenchGrid.moveView(this.panelPartView,c?o.height:this.stateModel.getRuntimeValue(l.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,0):e===1?this.workbenchGrid.moveView(this.panelPartView,c?o.width:this.stateModel.getRuntimeValue(l.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,3):this.workbenchGrid.moveView(this.panelPartView,c?o.width:this.stateModel.getRuntimeValue(l.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,2),this.workbenchGrid.resizeView(this.sideBarPartView,a),h||this.setSideBarHidden(!0),this.workbenchGrid.resizeView(this.auxiliaryBarPartView,r),f||this.setAuxiliaryBarHidden(!0),_(e)&&this.adjustPartPositions(this.getSideBarPosition(),this.getPanelAlignment(),e),this._onDidChangePanelPosition.fire(s)}isWindowMaximized(e){return this.state.runtime.maximized.has(bt(e))}updateWindowMaximizedState(e,t){this.mainContainer.classList.toggle(I.MAXIMIZED,t);const i=bt(e);t!==this.state.runtime.maximized.has(i)&&(t?this.state.runtime.maximized.add(i):this.state.runtime.maximized.delete(i),this.updateWindowsBorder(),this._onDidChangeWindowMaximized.fire({windowId:i,maximized:t}))}getVisibleNeighborPart(e,t){if(!this.workbenchGrid||!this.isVisible(e,p))return;const i=this.workbenchGrid.getNeighborViews(this.getPart(e),t,!1);if(i)for(const s of i){const n=["workbench.parts.activitybar","workbench.parts.editor","workbench.parts.panel","workbench.parts.auxiliarybar","workbench.parts.sidebar","workbench.parts.statusbar","workbench.parts.titlebar"].find(o=>this.getPart(o)===s&&this.isVisible(o,p));if(n!==void 0)return n}}onDidChangeWCO(){const e=this.workbenchGrid.getNeighborViews(this.titleBarPartView,0,!1).length>0,t=this.shouldShowBannerFirst();e!==t&&this.workbenchGrid.moveView(this.bannerPartView,Ke.Distribute,this.titleBarPartView,t?0:1),this.workbenchGrid.setViewVisible(this.titleBarPartView,le(this.configurationService,p,this.state.runtime.menuBar.toggled))}arrangeEditorNodes(e,t,i){if(!e.sideBar&&!e.auxiliaryBar)return e.editor.size=t,e.editor;const s=[e.editor];return e.editor.size=i,e.sideBar&&(this.stateModel.getRuntimeValue(l.SIDEBAR_POSITON)===0?s.splice(0,0,e.sideBar):s.push(e.sideBar),e.editor.size-=this.stateModel.getRuntimeValue(l.SIDEBAR_HIDDEN)?0:e.sideBar.size),e.auxiliaryBar&&(this.stateModel.getRuntimeValue(l.SIDEBAR_POSITON)===1?s.splice(0,0,e.auxiliaryBar):s.push(e.auxiliaryBar),e.editor.size-=this.stateModel.getRuntimeValue(l.AUXILIARYBAR_HIDDEN)?0:e.auxiliaryBar.size),{type:"branch",data:s,size:t}}arrangeMiddleSectionNodes(e,t,i){const s=this.stateModel.getRuntimeValue(l.ACTIVITYBAR_HIDDEN)?0:e.activityBar.size,n=this.stateModel.getRuntimeValue(l.SIDEBAR_HIDDEN)?0:e.sideBar.size,o=this.stateModel.getRuntimeValue(l.AUXILIARYBAR_HIDDEN)?0:e.auxiliaryBar.size,a=this.stateModel.getInitializationValue(l.PANEL_SIZE)?0:e.panel.size,r=this.stateModel.getRuntimeValue(l.PANEL_POSITION),c=this.stateModel.getRuntimeValue(l.SIDEBAR_POSITON),h=[];if(!_(r))h.push(e.editor),e.editor.size=t-s-n-a-o,r===1?h.push(e.panel):h.splice(0,0,e.panel),c===0?(h.push(e.auxiliaryBar),h.splice(0,0,e.sideBar),h.splice(0,0,e.activityBar)):(h.splice(0,0,e.auxiliaryBar),h.push(e.sideBar),h.push(e.activityBar));else{const f=this.stateModel.getRuntimeValue(l.PANEL_ALIGNMENT),b=!(f==="center"||c===0&&f==="right"||c===1&&f==="left"),m=!(f==="center"||c===1&&f==="right"||c===0&&f==="left"),S=t-s-(b?0:n)-(m?0:o),y=this.arrangeEditorNodes({editor:e.editor,sideBar:b?e.sideBar:void 0,auxiliaryBar:m?e.auxiliaryBar:void 0},i-a,S);h.push({type:"branch",data:r===2?[y,e.panel]:[e.panel,y],size:S}),b||(c===0?h.splice(0,0,e.sideBar):h.push(e.sideBar)),m||(c===1?h.splice(0,0,e.auxiliaryBar):h.push(e.auxiliaryBar)),c===0?h.splice(0,0,e.activityBar):h.push(e.activityBar)}return h}createGridDescriptor(){const{width:e,height:t}=this.stateModel.getInitializationValue(l.GRID_SIZE),i=this.stateModel.getInitializationValue(l.SIDEBAR_SIZE),s=this.stateModel.getInitializationValue(l.AUXILIARYBAR_SIZE),n=this.stateModel.getInitializationValue(l.PANEL_SIZE),o=this.titleBarPartView.minimumHeight,a=this.bannerPartView.minimumHeight,r=this.statusBarPartView.minimumHeight,c=this.activityBarPartView.minimumWidth,h=t-o-r,f=[{type:"leaf",data:{type:"workbench.parts.titlebar"},size:o,visible:this.isVisible("workbench.parts.titlebar",p)},{type:"leaf",data:{type:"workbench.parts.banner"},size:a,visible:!1}],b={type:"leaf",data:{type:"workbench.parts.activitybar"},size:c,visible:!this.stateModel.getRuntimeValue(l.ACTIVITYBAR_HIDDEN)},m={type:"leaf",data:{type:"workbench.parts.sidebar"},size:i,visible:!this.stateModel.getRuntimeValue(l.SIDEBAR_HIDDEN)},S={type:"leaf",data:{type:"workbench.parts.auxiliarybar"},size:s,visible:this.isVisible("workbench.parts.auxiliarybar")},y={type:"leaf",data:{type:"workbench.parts.editor"},size:0,visible:!this.stateModel.getRuntimeValue(l.EDITOR_HIDDEN)},te={type:"leaf",data:{type:"workbench.parts.panel"},size:n,visible:!this.stateModel.getRuntimeValue(l.PANEL_HIDDEN)},Ye=this.arrangeMiddleSectionNodes({activityBar:b,auxiliaryBar:S,editor:y,panel:te,sideBar:m},e,h),jt={root:{type:"branch",size:e,data:[...this.shouldShowBannerFirst()?f.reverse():f,{type:"branch",data:Ye,size:h},{type:"leaf",data:{type:"workbench.parts.statusbar"},size:r,visible:!this.stateModel.getRuntimeValue(l.STATUSBAR_HIDDEN)}]},orientation:0,width:e,height:t},Ds={activityBarVisible:!this.stateModel.getRuntimeValue(l.ACTIVITYBAR_HIDDEN),sideBarVisible:!this.stateModel.getRuntimeValue(l.SIDEBAR_HIDDEN),auxiliaryBarVisible:!this.stateModel.getRuntimeValue(l.AUXILIARYBAR_HIDDEN),panelVisible:!this.stateModel.getRuntimeValue(l.PANEL_HIDDEN),statusbarVisible:!this.stateModel.getRuntimeValue(l.STATUSBAR_HIDDEN),sideBarPosition:Be(this.stateModel.getRuntimeValue(l.SIDEBAR_POSITON)),panelPosition:Be(this.stateModel.getRuntimeValue(l.PANEL_POSITION))};return this.telemetryService.publicLog2("startupLayout",Ds),jt}dispose(){super.dispose(),this.disposed=!0}}function $i(u){return u.getValue(ht.ZEN_MODE_CONFIG)}class ys{constructor(e,t,i,s){this.name=e,this.scope=t,this.target=i,this.defaultValue=s}}class N extends ys{constructor(e,t,i,s,n){super(e,t,i,s),this.zenModeIgnore=n,this.runtime=!0}}class gt extends ys{constructor(){super(...arguments),this.runtime=!1}}const l={MAIN_EDITOR_CENTERED:new N("editor.centered",1,1,!1),ZEN_MODE_ACTIVE:new N("zenMode.active",1,1,!1),ZEN_MODE_EXIT_INFO:new N("zenMode.exitInfo",1,1,{transitionedToCenteredEditorLayout:!1,transitionedToFullScreen:!1,handleNotificationsDoNotDisturbMode:!1,wasVisible:{auxiliaryBar:!1,panel:!1,sideBar:!1}}),GRID_SIZE:new gt("grid.size",0,1,{width:800,height:600}),SIDEBAR_SIZE:new gt("sideBar.size",0,1,200),AUXILIARYBAR_SIZE:new gt("auxiliaryBar.size",0,1,200),PANEL_SIZE:new gt("panel.size",0,1,300),PANEL_LAST_NON_MAXIMIZED_HEIGHT:new N("panel.lastNonMaximizedHeight",0,1,300),PANEL_LAST_NON_MAXIMIZED_WIDTH:new N("panel.lastNonMaximizedWidth",0,1,300),PANEL_WAS_LAST_MAXIMIZED:new N("panel.wasLastMaximized",1,1,!1),SIDEBAR_POSITON:new N("sideBar.position",1,1,0),PANEL_POSITION:new N("panel.position",1,1,2),PANEL_ALIGNMENT:new N("panel.alignment",0,0,"center"),ACTIVITYBAR_HIDDEN:new N("activityBar.hidden",1,1,!1,!0),SIDEBAR_HIDDEN:new N("sideBar.hidden",1,1,!1),EDITOR_HIDDEN:new N("editor.hidden",1,1,!1),PANEL_HIDDEN:new N("panel.hidden",1,1,!0),AUXILIARYBAR_HIDDEN:new N("auxiliaryBar.hidden",1,1,!0),STATUSBAR_HIDDEN:new N("statusBar.hidden",1,1,!1,!0)};var ht;(function(u){u.PANEL_POSITION="workbench.panel.defaultLocation",u.PANEL_OPENS_MAXIMIZED="workbench.panel.opensMaximized",u.ZEN_MODE_CONFIG="zenMode",u.EDITOR_CENTERED_LAYOUT_AUTO_RESIZE="workbench.editor.centeredLayoutAutoResize"})(ht||(ht={}));var L;(function(u){u.STATUSBAR_VISIBLE="workbench.statusBar.visible",u.SIDEBAR_POSITION="workbench.sideBar.location"})(L||(L={}));const Oe=class Oe extends z{constructor(e,t,i,s){super(),this.storageService=e,this.configurationService=t,this.contextService=i,this.container=s,this._onDidChangeState=this._register(new w),this.onDidChangeState=this._onDidChangeState.event,this.stateCache=new Map,this._register(this.configurationService.onDidChangeConfiguration(n=>this.updateStateFromLegacySettings(n)))}updateStateFromLegacySettings(e){e.affectsConfiguration("workbench.activityBar.location")&&this.setRuntimeValueAndFire(l.ACTIVITYBAR_HIDDEN,this.isActivityBarHidden()),e.affectsConfiguration(L.STATUSBAR_VISIBLE)&&this.setRuntimeValueAndFire(l.STATUSBAR_HIDDEN,!this.configurationService.getValue(L.STATUSBAR_VISIBLE)),e.affectsConfiguration(L.SIDEBAR_POSITION)&&this.setRuntimeValueAndFire(l.SIDEBAR_POSITON,mt(this.configurationService.getValue(L.SIDEBAR_POSITION)??"left"))}updateLegacySettingsFromState(e,t){const i=this.getRuntimeValue(l.ZEN_MODE_ACTIVE);e.zenModeIgnore&&i||(e===l.ACTIVITYBAR_HIDDEN?this.configurationService.updateValue("workbench.activityBar.location",t?"hidden":void 0):e===l.STATUSBAR_HIDDEN?this.configurationService.updateValue(L.STATUSBAR_VISIBLE,!t):e===l.SIDEBAR_POSITON&&this.configurationService.updateValue(L.SIDEBAR_POSITION,Be(t)))}load(){let e;for(e in l){const i=l[e],s=this.loadKeyFromStorage(i);s!==void 0&&this.stateCache.set(i.name,s)}this.stateCache.set(l.ACTIVITYBAR_HIDDEN.name,this.isActivityBarHidden()),this.stateCache.set(l.STATUSBAR_HIDDEN.name,!this.configurationService.getValue(L.STATUSBAR_VISIBLE)),this.stateCache.set(l.SIDEBAR_POSITON.name,mt(this.configurationService.getValue(L.SIDEBAR_POSITION)??"left"));const t=ei(this.container);l.PANEL_POSITION.defaultValue=mt(this.configurationService.getValue(ht.PANEL_POSITION)??"bottom"),l.GRID_SIZE.defaultValue={height:t.height,width:t.width},l.SIDEBAR_SIZE.defaultValue=Math.min(300,t.width/4),l.AUXILIARYBAR_SIZE.defaultValue=Math.min(300,t.width/4),l.PANEL_SIZE.defaultValue=this.stateCache.get(l.PANEL_POSITION.name)??_(l.PANEL_POSITION.defaultValue)?t.height/3:t.width/4,l.SIDEBAR_HIDDEN.defaultValue=this.contextService.getWorkbenchState()===1;for(e in l){const i=l[e];this.stateCache.get(i.name)===void 0&&this.stateCache.set(i.name,i.defaultValue)}this._register(this.storageService.onDidChangeValue(0,void 0,this._register(new B))(i=>{let s;for(s in l){const n=l[s];if(n instanceof N&&n.scope===0&&n.target===0&&`${Oe.STORAGE_PREFIX}${n.name}`===i.key){const o=this.loadKeyFromStorage(n)??n.defaultValue;this.stateCache.get(n.name)!==o&&(this.stateCache.set(n.name,o),this._onDidChangeState.fire({key:n,value:o}))}}}))}save(e,t){let i;const s=this.getRuntimeValue(l.ZEN_MODE_ACTIVE);for(i in l){const n=l[i];if(e&&n.scope===1||t&&n.scope===0){if(s&&n instanceof N&&n.zenModeIgnore)continue;this.saveKeyToStorage(n)}}}getInitializationValue(e){return this.stateCache.get(e.name)}setInitializationValue(e,t){this.stateCache.set(e.name,t)}getRuntimeValue(e,t){if(t)switch(e){case l.ACTIVITYBAR_HIDDEN:this.stateCache.set(e.name,this.isActivityBarHidden());break;case l.STATUSBAR_HIDDEN:this.stateCache.set(e.name,!this.configurationService.getValue(L.STATUSBAR_VISIBLE));break;case l.SIDEBAR_POSITON:this.stateCache.set(e.name,this.configurationService.getValue(L.SIDEBAR_POSITION)??"left");break}return this.stateCache.get(e.name)}setRuntimeValue(e,t){this.stateCache.set(e.name,t);const i=this.getRuntimeValue(l.ZEN_MODE_ACTIVE);e.scope===0&&(!i||!e.zenModeIgnore)&&(this.saveKeyToStorage(e),this.updateLegacySettingsFromState(e,t))}isActivityBarHidden(){const e=this.configurationService.getValue("workbench.activityBar.visible");return e!==void 0?!e:this.configurationService.getValue("workbench.activityBar.location")!=="default"}setRuntimeValueAndFire(e,t){this.stateCache.get(e.name)!==t&&(this.setRuntimeValue(e,t),this._onDidChangeState.fire({key:e,value:t}))}saveKeyToStorage(e){const t=this.stateCache.get(e.name);this.storageService.store(`${Oe.STORAGE_PREFIX}${e.name}`,typeof t=="object"?JSON.stringify(t):t,e.scope,e.target)}loadKeyFromStorage(e){let t=this.storageService.get(`${Oe.STORAGE_PREFIX}${e.name}`,e.scope);if(t!==void 0)switch(typeof e.defaultValue){case"boolean":t=t==="true";break;case"number":t=parseInt(t);break;case"object":t=JSON.parse(t);break}return t}};Oe.STORAGE_PREFIX="workbench.";let mi=Oe;const na=5e3;let bi=class extends z{constructor(e,t,i){super(),this._accessibilitySignalService=i,this._scheduler=new ds(()=>{this._signalLoop=this._accessibilitySignalService.playSignalLoop(Gt.progress,t??na)},e),this._scheduler.schedule()}dispose(){var e;super.dispose(),(e=this._signalLoop)==null||e.dispose(),this._scheduler.dispose()}};bi=C([d(2,Ft)],bi);class oa{constructor(){this.priority=90,this.name="notifications",this.when=H,this.type="view"}getProvider(e){const t=e.get(Sn),i=e.get(Pe),s=e.get(oe),n=e.get(Ft);function o(){const a=ue(i);if(!a)return;s.executeCommand("notifications.showList");let r;const c=i.lastFocusedList;if(c instanceof Ti&&(r=c.indexOf(a)),r===void 0)return;function h(){if(s.executeCommand("notifications.showList"),c&&r!==void 0){c.domFocus();try{c.setFocus([r])}catch{}}}function f(){const m=ue(i),S=m==null?void 0:m.message.original.toString();if(m)return m.source?g(8878,"{0} Source: {1}",S,m.source):g(8879,"{0}",S)}const b=f();if(b)return a.onDidClose(()=>t.next()),new In("notification",{type:"view"},()=>b,()=>h(),"accessibility.verbosity.notification",void 0,aa(a,n),()=>{if(c)return h(),c.focusNext(),f()},()=>{if(c)return h(),c.focusPrevious(),f()})}return o()}}function aa(u,e){let t;if(u.actions&&(t=[],u.actions.primary&&t.push(...u.actions.primary),u.actions.secondary&&t.push(...u.actions.secondary)),t)for(const s of t){s.class=E.asClassName(V.bell);const n=s.run;s.run=()=>{n(),u.close()}}const i=t==null?void 0:t.find(s=>s.label.includes("Manage Extension"));return i&&(i.class=E.asClassName(V.gear)),t&&t.push({id:"clearNotification",label:g(8880,"Clear Notification"),tooltip:g(8880,"Clear Notification"),run:()=>{u.close(),e.playSignal(Gt.clear)},enabled:!0,class:E.asClassName(V.clearAll)}),t}class ra extends sa{constructor(e,t,i,s){super(e),this.options=t,this.serviceCollection=i,this._onWillShutdown=this._register(new w),this.onWillShutdown=this._onWillShutdown.event,this._onDidShutdown=this._register(new w),this.onDidShutdown=this._onDidShutdown.event,this.previousUnexpectedError={message:void 0,time:0},D("code/willStartWorkbench"),this.registerErrorHandler(s)}registerErrorHandler(e){p.addEventListener("unhandledrejection",t=>{wt(t.reason),t.preventDefault()}),us(t=>this.handleUnexpectedError(t,e))}handleUnexpectedError(e,t){const i=Ht(e,!0);if(!i)return;const s=Date.now();i===this.previousUnexpectedError.message&&s-this.previousUnexpectedError.time<=1e3||(this.previousUnexpectedError.time=s,this.previousUnexpectedError.message=i,t.error(i))}startup(){try{this._register(yn(175));const e=this.initServices(this.serviceCollection);return e.invokeFunction(t=>{const i=t.get(At),s=t.get(ce),n=t.get(Ne),o=t.get(Ze),a=t.get(Dn),r=t.get(ee);this.initLayout(t),this.registerListeners(i,s,n,o,a),this.renderWorkbench(e,r,s,n),this.createWorkbenchLayout(),this.layout(),this.restore(i)}),e}catch(e){throw wt(e),e}}initServices(e){e.set(q,this);const t=Rn();for(const[s,n]of t)e.set(s,n);const i=new An(e,!0);return i.invokeFunction(s=>{const n=s.get(At),o=s.get(Ne);typeof o.acquireInstantiationService=="function"&&o.acquireInstantiationService(i),n.phase=2}),i}registerListeners(e,t,i,s,n){this._register(i.onDidChangeConfiguration(o=>this.updateFontAliasing(o,i))),vt?this._register(t.onWillSaveState(o=>{o.reason===En.SHUTDOWN&&this.storeFontInfo(t)})):this._register(e.onWillShutdown(()=>this.storeFontInfo(t))),this._register(e.onWillShutdown(o=>this._onWillShutdown.fire(o))),this._register(e.onDidShutdown(()=>{this._onDidShutdown.fire(),this.dispose()})),this._register(s.onDidChangeFocus(o=>{o||t.flush()})),this._register(n.onWillShowDialog(()=>this.mainContainer.classList.add("modal-dialog-visible"))),this._register(n.onDidShowDialog(()=>this.mainContainer.classList.remove("modal-dialog-visible")))}updateFontAliasing(e,t){if(!F||e&&!e.affectsConfiguration("workbench.fontAliasing"))return;const i=t.getValue("workbench.fontAliasing");if(this.fontAliasing===i)return;this.fontAliasing=i;const s=["antialiased","none","auto"];this.mainContainer.classList.remove(...s.map(n=>`monaco-font-aliasing-${n}`)),s.some(n=>n===i)&&this.mainContainer.classList.add(`monaco-font-aliasing-${i}`)}restoreFontInfo(e,t){const i=e.get("editorFontInfo",-1);if(i)try{const s=JSON.parse(i);Array.isArray(s)&&Xt.restoreFontInfo(p,s)}catch{}Xt.readFontInfo(p,_n.createFromRawSettings(t.getValue("editor"),Nn.getInstance(p).value))}storeFontInfo(e){const t=Xt.serializeFontInfo(p);t&&e.store("editorFontInfo",JSON.stringify(t),-1,1)}renderWorkbench(e,t,i,s){var a;Tn(this.mainContainer),Mn((r,c)=>e.createInstance(bi,r,c));const n=Et?"windows":xi?"linux":"mac",o=pt(["monaco-workbench",n,x?"web":void 0,Vn?"chromium":xn?"firefox":kn?"safari":void 0,...this.getLayoutClasses(),...(a=this.options)!=null&&a.extraClasses?this.options.extraClasses:[]]);this.mainContainer.classList.add(...o),p.document.body.classList.add(n),x&&p.document.body.classList.add("web"),this.updateFontAliasing(void 0,s),this.restoreFontInfo(i,s);for(const{id:r,role:c,classes:h,options:f}of[{id:"workbench.parts.titlebar",role:"none",classes:["titlebar"]},{id:"workbench.parts.banner",role:"banner",classes:["banner"]},{id:"workbench.parts.activitybar",role:"none",classes:["activitybar",this.getSideBarPosition()===0?"left":"right"]},{id:"workbench.parts.sidebar",role:"none",classes:["sidebar",this.getSideBarPosition()===0?"left":"right"]},{id:"workbench.parts.editor",role:"main",classes:["editor"],options:{restorePreviousState:this.willRestoreEditors()}},{id:"workbench.parts.panel",role:"none",classes:["panel","basepanel",Be(this.getPanelPosition())]},{id:"workbench.parts.auxiliarybar",role:"none",classes:["auxiliarybar","basepanel",this.getSideBarPosition()===0?"right":"left"]},{id:"workbench.parts.statusbar",role:"status",classes:["statusbar"]}]){const b=this.createPart(r,c,h);D(`code/willCreatePart/${r}`),this.getPart(r).create(b,f),D(`code/didCreatePart/${r}`)}this.createNotificationsHandlers(e,t),this.parent.appendChild(this.mainContainer)}createPart(e,t,i){const s=document.createElement(t==="status"?"footer":"div");return s.classList.add("part",...i),s.id=e,s.setAttribute("role",t),t==="status"&&s.setAttribute("aria-live","off"),s}createNotificationsHandlers(e,t){const i=this._register(e.createInstance(ui,this.mainContainer,t.model)),s=this._register(e.createInstance(gi,this.mainContainer,t.model));this._register(e.createInstance(ea,t.model));const n=e.createInstance(fi,t.model);this._register(e.createInstance(si)),this._register(i.onDidChangeVisibility(()=>{n.update(i.isVisible,s.isVisible),s.update(i.isVisible)})),this._register(s.onDidChangeVisibility(()=>{n.update(i.isVisible,s.isVisible)})),Zo(i,s,t.model),Pn.register(new oa),this.registerNotifications({onDidChangeNotificationsVisibility:Z.map(Z.any(s.onDidChangeVisibility,i.onDidChangeVisibility),()=>s.isVisible||i.isVisible)})}restore(e){try{this.restoreParts()}catch(t){wt(t)}this.whenReady.finally(()=>Promise.race([this.whenRestored,Ln(2e3)]).finally(()=>{function t(){D("code/didStartWorkbench"),performance.measure("perf: workbench create & restore","code/didLoadWorkbenchMain","code/didStartWorkbench")}this.isRestored()?t():this.whenRestored.finally(()=>t()),e.phase=3,this._register(new ds(()=>{this._register(Bn(p,()=>e.phase=4,2500))},2500)).schedule()}))}}var ca='.monaco-workbench .part.titlebar{display:flex;flex-direction:row}.monaco-workbench.mac .part.titlebar{flex-direction:row-reverse}.monaco-workbench .part.titlebar>.titlebar-container{align-items:center;box-sizing:border-box;display:flex;flex-grow:1;flex-shrink:1;height:100%;justify-content:space-between;overflow:hidden;user-select:none;-webkit-user-select:none;width:100%}.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom{zoom:calc(1/var(--zoom-factor))}.monaco-workbench.mac .part.titlebar>.titlebar-container{line-height:22px}.monaco-workbench.linux .part.titlebar>.titlebar-container,.monaco-workbench.web .part.titlebar>.titlebar-container,.monaco-workbench.windows .part.titlebar>.titlebar-container{justify-content:left;line-height:22px}.monaco-workbench.web.safari .part.titlebar,.monaco-workbench.web.safari .part.titlebar>.titlebar-container{overflow:visible}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-drag-region{-webkit-app-region:drag;display:block;height:100%;left:0;position:absolute;top:0;width:100%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right{align-items:center;display:flex;height:100%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left{flex-grow:2;justify-content:flex-start;order:0;width:20%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center{justify-content:center;margin:0 10px;max-width:fit-content;min-width:0;order:1;width:60%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right{flex-grow:2;justify-content:flex-end;min-width:min-content;order:2;width:20%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title{flex:0 1 auto;font-size:12px;margin-left:auto;margin-right:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench.linux .part.titlebar>.titlebar-container>.titlebar-center>.window-title,.monaco-workbench.web .part.titlebar>.titlebar-container>.titlebar-center>.window-title,.monaco-workbench.windows .part.titlebar>.titlebar-container>.titlebar-center>.window-title{cursor:default}.monaco-workbench.linux .part.titlebar>.titlebar-container>.titlebar-center>.window-title{font-size:inherit}.monaco-workbench .part.titlebar>.titlebar-container .monaco-toolbar .actions-container{gap:4px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center{-webkit-app-region:no-drag;z-index:2500}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center.hide{visibility:hidden}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item.monaco-dropdown-with-primary .action-label,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:var(--vscode-titleBar-activeForeground)}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item.monaco-dropdown-with-primary .action-label,.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center{align-items:stretch;background-color:var(--vscode-commandCenter-background);border:1px solid var(--vscode-commandCenter-border);border-bottom-left-radius:6px;border-bottom-right-radius:6px;border-top-left-radius:6px;border-top-right-radius:6px;color:var(--vscode-commandCenter-foreground);display:flex;height:22px;margin:0 6px;max-width:600px;overflow:hidden;width:38vw}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick{display:flex;justify-content:start;margin:auto;max-width:600px;overflow:hidden}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-icon{color:var(--vscode-commandCenter-foreground);font-size:14px;margin:auto 3px;opacity:.8}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-icon{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-label{overflow:hidden;text-overflow:ellipsis}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center.multiple{justify-content:flex-start;padding:0 12px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center.multiple.active .action-label{background-color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center:only-child{margin-left:0}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center{border-color:var(--vscode-commandCenter-inactiveBorder)!important;color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .codicon-copilot{font-size:14px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center:HOVER{background-color:var(--vscode-commandCenter-activeBackground);border-color:var(--vscode-commandCenter-activeBorder);color:var(--vscode-commandCenter-activeForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.menubar{flex-wrap:nowrap;min-width:36px;order:2;z-index:2500}.monaco-workbench.web .part.titlebar>.titlebar-container>.titlebar-left>.menubar{margin-left:4px}.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom .menubar .menubar-menu-button>.menubar-menu-items-holder.monaco-menu-container,.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom .monaco-toolbar .dropdown-action-container{zoom:var(--zoom-factor)}.monaco-workbench.linux .part.titlebar>.titlebar-container>.resizer,.monaco-workbench.windows .part.titlebar>.titlebar-container>.resizer{-webkit-app-region:no-drag;height:4px;position:absolute;top:0;width:100%}.monaco-workbench.linux.fullscreen .part.titlebar>.titlebar-container>.resizer,.monaco-workbench.windows.fullscreen .part.titlebar>.titlebar-container>.resizer{display:none}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon{flex-shrink:0;height:100%;order:1;position:relative;width:35px;z-index:2500}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon:not(.codicon){background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMDI0IDEwMjRIMFYwaDEwMjR2MTAyNHoiIHN0eWxlPSJmaWxsOiNmNmY2ZjY7ZmlsbC1vcGFjaXR5OjAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTAyNCA4NS4zMzN2ODUzLjMzM0gwVjg1LjMzM2gxMDI0eiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjxwYXRoIGQ9Ik0wIDg1LjMzM2gyOTguNjY3djg1My4zMzNIMFY4NS4zMzN6bTEwMjQgMHY4NTMuMzMzSDM4NFY4NS4zMzNoNjQwem0tNTU0LjY2NyAxNjBoMzQxLjMzM3YtNjRINDY5LjMzM3Y2NHptMzQxLjMzNCA1MzMuMzM0SDQ2OS4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0xMjgtMTQ5LjMzNEg1OTcuMzMzdjY0aDM0MS4zMzNsLjAwMS02NHptMC0xNDkuMzMzSDU5Ny4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0wLTE0OS4zMzNINTk3LjMzM3Y2NGgzNDEuMzMzbC4wMDEtNjR6IiBzdHlsZT0iZmlsbDojMTY3YWJmIi8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:16px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon.codicon{line-height:30px}.monaco-workbench.fullscreen .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon{display:none}.monaco-workbench .part.titlebar>.titlebar-container .window-appicon>.home-bar-icon-badge{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMDI0IDEwMjRIMFYwaDEwMjR2MTAyNHoiIHN0eWxlPSJmaWxsOiNmNmY2ZjY7ZmlsbC1vcGFjaXR5OjAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTAyNCA4NS4zMzN2ODUzLjMzM0gwVjg1LjMzM2gxMDI0eiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjxwYXRoIGQ9Ik0wIDg1LjMzM2gyOTguNjY3djg1My4zMzNIMFY4NS4zMzN6bTEwMjQgMHY4NTMuMzMzSDM4NFY4NS4zMzNoNjQwem0tNTU0LjY2NyAxNjBoMzQxLjMzM3YtNjRINDY5LjMzM3Y2NHptMzQxLjMzNCA1MzMuMzM0SDQ2OS4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0xMjgtMTQ5LjMzNEg1OTcuMzMzdjY0aDM0MS4zMzNsLjAwMS02NHptMC0xNDkuMzMzSDU5Ny4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0wLTE0OS4zMzNINTk3LjMzM3Y2NGgzNDEuMzMzbC4wMDEtNjR6IiBzdHlsZT0iZmlsbDojMTY3YWJmIi8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:8px;border-left:1px solid transparent;border-top:1px solid transparent;bottom:6px;height:8px;pointer-events:none;position:absolute;right:9px;width:8px;z-index:1}.monaco-workbench .part.titlebar .window-controls-container{-webkit-app-region:no-drag;display:flex;flex-grow:0;flex-shrink:0;height:100%;text-align:center;width:0;z-index:3000}.monaco-workbench.fullscreen .part.titlebar .window-controls-container{background-color:transparent;display:none}.monaco-workbench.web .part.titlebar .titlebar-right .window-controls-container{height:env(titlebar-area-height,35px);width:calc(100vw - env(titlebar-area-width, 100vw) - env(titlebar-area-x, 0px))}.monaco-workbench.web .part.titlebar .titlebar-left .window-controls-container{height:env(titlebar-area-height,35px);width:env(titlebar-area-x,0)}.monaco-workbench.web.mac .part.titlebar .titlebar-left .window-controls-container{order:0}.monaco-workbench.web.mac .part.titlebar .titlebar-right .window-controls-container{order:1}.monaco-workbench:not(.web):not(.mac) .part.titlebar .window-controls-container{width:calc(138px/var(--zoom-factor, 1))}.monaco-workbench:not(.web):not(.mac) .part.titlebar .titlebar-container.counter-zoom .window-controls-container{width:138px}.monaco-workbench.linux:not(.web) .part.titlebar .titlebar-container.counter-zoom .window-controls-container.wco-enabled,.monaco-workbench.linux:not(.web) .part.titlebar .window-controls-container.wco-enabled{width:calc(100vw - env(titlebar-area-width, 100vw) - env(titlebar-area-x, 0px))}.monaco-workbench:not(.web):not(.mac) .part.titlebar .titlebar-container:not(.counter-zoom) .window-controls-container *{zoom:calc(1/var(--zoom-factor, 1))}.monaco-workbench:not(.web).mac .part.titlebar .window-controls-container{width:70px}.monaco-workbench .part.titlebar .window-controls-container>.window-icon{align-items:center;color:var(--vscode-titleBar-activeForeground);display:flex;font-size:16px;height:100%;justify-content:center;width:46px}.monaco-workbench .part.titlebar.inactive .window-controls-container>.window-icon{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar .window-controls-container>.window-icon:before{height:16px;line-height:16px}.monaco-workbench .part.titlebar .window-controls-container>.window-icon:hover{background-color:hsla(0,0%,100%,.1)}.monaco-workbench .part.titlebar.light .window-controls-container>.window-icon:hover{background-color:rgba(0,0,0,.1)}.monaco-workbench .part.titlebar .window-controls-container>.window-icon.window-close:hover{background-color:rgba(232,17,35,.9)}.monaco-workbench .part.titlebar .window-controls-container .window-icon.window-close:hover{color:#fff}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container{-webkit-app-region:no-drag;display:none;flex-grow:0;flex-shrink:0;height:100%;margin-left:auto;padding-right:2px;position:relative;text-align:center;z-index:2500}.monaco-workbench.mac:not(.web) .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container{right:8px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container:not(.has-no-actions){display:flex;justify-content:center}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .codicon{color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item{display:flex}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .badge{align-items:center;display:flex;margin-left:8px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge{margin-left:0}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .badge .badge-content{border-radius:11px;box-sizing:border-box;display:inline-block;font-size:9px;font-weight:400;height:16px;line-height:11px;min-width:11px;padding:3px 5px;position:relative;text-align:center}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact{bottom:0;height:100%;left:0;margin:auto;overflow:hidden;position:absolute;top:0;width:100%;z-index:2}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact .badge-content:before{mask-size:12px;-webkit-mask-size:12px;top:2px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact .badge-content{border-radius:16px;font-size:9px;font-weight:600;height:12px;line-height:12px;min-width:12px;padding:0 2px;position:absolute;right:0;text-align:center;top:10px}';Ue(ca,{});var pi;let wi=class{constructor(e,t,i,s){this._disposables=new B,this._onDidChangeVisibility=new w,this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.element=document.createElement("div"),this.element.classList.add("command-center");const n=i.createInstance(Hn,this.element,T.CommandCenter,{contextMenu:T.TitleBarContext,hiddenItemStrategy:-1,toolbarOptions:{primaryGroup:()=>!0},telemetrySource:"commandCenter",actionViewItemProvider:(o,a)=>o instanceof Fn&&o.item.submenu===T.CommandCenterCenter?i.createInstance(vi,o,e,{...a,hoverDelegate:t}):Pi(i,o,{...a,hoverDelegate:t})});this._disposables.add(Z.filter(s.onShow,()=>hs(this.element),this._disposables)(this._setVisibility.bind(this,!1))),this._disposables.add(s.onHide(this._setVisibility.bind(this,!0))),this._disposables.add(n)}_setVisibility(e){this.element.classList.toggle("hide",!e),this._onDidChangeVisibility.fire()}dispose(){this._disposables.dispose()}};wi=C([d(2,P),d(3,ts)],wi);var Ae;let vi=(Ae=class extends Gi{constructor(e,t,i,s,n,o,a){super(void 0,e.actions.find(r=>r.id==="workbench.action.quickOpenWithModes")??e.actions[0],i),this._submenu=e,this._windowTitle=t,this._hoverService=s,this._keybindingService=n,this._instaService=o,this._editorGroupService=a,this._hoverDelegate=i.hoverDelegate??Jt("mouse")}render(e){super.render(e),e.classList.add("command-center-center"),e.classList.toggle("multiple",this._submenu.actions.length>1);const t=this._store.add(this._hoverService.setupManagedHover(this._hoverDelegate,e,this.getTooltip()));this._store.add(this._windowTitle.onDidChange(()=>{t.update(this.getTooltip())}));const i=[];for(const s of this._submenu.actions)s instanceof On?i.push(s.actions):i.push([s]);for(let s=0;s<i.length;s++){const n=i[s],o=this._instaService.createInstance(fs,e,{hiddenItemStrategy:-1,telemetrySource:"commandCenterCenter",actionViewItemProvider:(a,r)=>{if(r={...r,hoverDelegate:this._hoverDelegate},a.id!==pi._quickOpenCommandId)return Pi(this._instaService,a,r);const c=this;return this._instaService.createInstance(class extends Gi{constructor(){super(void 0,a,r)}render(f){super.render(f),f.classList.toggle("command-center-quick-pick"),f.role="button";const b=this.action,m=document.createElement("span");m.ariaHidden="true",m.className=b.class??"",m.classList.add("search-icon");const S=this._getLabel(),y=document.createElement("span");y.classList.add("search-label"),y.innerText=S,gs(f,m,y);const te=this._store.add(c._hoverService.setupManagedHover(c._hoverDelegate,f,this.getTooltip()));this._store.add(c._windowTitle.onDidChange(()=>{te.update(this.getTooltip()),y.innerText=this._getLabel()})),this._store.add(c._editorGroupService.onDidChangeEditorPartOptions(({newPartOptions:Ye,oldPartOptions:jt})=>{Ye.showTabs!==jt.showTabs&&(te.update(this.getTooltip()),y.innerText=this._getLabel())}))}getTooltip(){return c.getTooltip()}_getLabel(){const{prefix:f,suffix:b}=c._windowTitle.getTitleDecorations();let m=c._windowTitle.workspaceName;return c._windowTitle.isCustomTitleFormat()?m=c._windowTitle.getWindowTitle():c._editorGroupService.partOptions.showTabs==="none"&&(m=c._windowTitle.fileName??m),m||(m=g(7042,"Search")),f&&(m=g(7043,"{0} {1}",f,m)),b&&(m=g(7044,"{0} {1}",m,b)),m.replaceAll(/\r\n|\r|\n/g,"⏎")}})}});if(o.setActions(n),this._store.add(o),s<i.length-1){const a=zn(V.circleSmallFilled);a.style.padding="0 12px",a.style.height="100%",a.style.opacity="0.5",e.appendChild(a)}}}getTooltip(){var i;const e=(i=this._keybindingService.lookupKeybinding(this.action.id))==null?void 0:i.getLabel();return e?g(7045,"Search {0} ({1}) — {2}",this._windowTitle.workspaceName,e,this._windowTitle.value):g(7046,"Search {0} — {1}",this._windowTitle.workspaceName,this._windowTitle.value)}},pi=Ae,Ae._quickOpenCommandId="workbench.action.quickOpenWithModes",Ae);vi=pi=C([d(3,ss),d(4,Ve),d(5,P),d(6,re)],vi);ie.appendMenuItem(T.CommandCenter,{submenu:T.CommandCenterCenter,title:g(7047,"Command Center"),icon:V.shield,order:101});var Ci;let Si=class extends Gn{constructor(e,t,i){super("workbench.titleService",i,t),this.instantiationService=e,this.mainPart=this._register(this.createMainTitlebarPart()),this.onMenubarVisibilityChange=this.mainPart.onMenubarVisibilityChange,this.properties=void 0,this.variables=new Map,this._register(this.registerPart(this.mainPart)),this.registerActions(),this.registerAPICommands()}createMainTitlebarPart(){return this.instantiationService.createInstance(Ii)}registerActions(){const e=this;this._register(ms(class extends bs{constructor(){super({id:"workbench.action.focusTitleBar",title:K(3082,"Focus Title Bar"),category:ps.View,f1:!0})}run(){e.getPartByDocument(cs()).focus()}}))}registerAPICommands(){this._register(he.registerCommand({id:"registerWindowTitleVariable",handler:(e,t,i)=>{this.registerVariables([{name:t,contextKey:i}])},metadata:{description:"Registers a new title variable",args:[{name:"name",schema:{type:"string"},description:"The name of the variable to register"},{name:"contextKey",schema:{type:"string"},description:"The context key to use for the value of the variable"}]}}))}createAuxiliaryTitlebarPart(e,t){const i=document.createElement("div");i.classList.add("part","titlebar"),i.setAttribute("role","none"),i.style.position="relative",e.insertBefore(i,e.firstChild);const s=new B,n=this.doCreateAuxiliaryTitlebarPart(i,t);return s.add(this.registerPart(n)),s.add(Z.runAndSubscribe(n.onDidChange,()=>i.style.height=`${n.height}px`)),n.create(i),this.properties&&n.updateProperties(this.properties),this.variables.size&&n.registerVariables(Array.from(this.variables.values())),Z.once(n.onWillDispose)(()=>s.dispose()),n}doCreateAuxiliaryTitlebarPart(e,t){return this.instantiationService.createInstance(yi,e,t,this.mainPart)}updateProperties(e){this.properties=e;for(const t of this.parts)t.updateProperties(e)}registerVariables(e){const t=[];for(const i of e)this.variables.has(i.name)||(this.variables.set(i.name,i),t.push(i));for(const i of this.parts)i.registerVariables(t)}};Si=C([d(0,P),d(1,ce),d(2,ae)],Si);let Bt=class extends ki{get minimumHeight(){var i;const e=x&&ii();let t=this.isCommandCenterVisible||e?Wn:30;return e&&(t=Math.max(t,((i=Un(R(this.element)))==null?void 0:i.height)??0)),t/(this.preventZoom?Ct(R(this.element)):1)}get maximumHeight(){return this.minimumHeight}constructor(e,t,i,s,n,o,a,r,c,h,f,b,m,S,y,te){super(e,{hasTitle:!1},r,c,h),this.contextMenuService=s,this.configurationService=n,this.environmentService=o,this.instantiationService=a,this.storageService=c,this.contextKeyService=f,this.hostService=b,this.editorGroupService=m,this.menuService=y,this.keybindingService=te,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this._onMenubarVisibilityChange=this._register(new w),this.onMenubarVisibilityChange=this._onMenubarVisibilityChange.event,this._onWillDispose=this._register(new w),this.onWillDispose=this._onWillDispose.event,this.actionToolBarDisposable=this._register(new B),this.editorActionsChangeDisposable=this._register(new B),this.editorToolbarMenuDisposables=this._register(new B),this.layoutToolbarMenuDisposables=this._register(new B),this.activityToolbarDisposables=this._register(new B),this.titleDisposables=this._register(new B),this.titleBarStyle=jn(this.configurationService),this.isInactive=!1,this.isAuxiliary=i!=="main",this.editorService=S.createScoped(i,this._store),this.editorGroupsContainer=i==="main"?m.mainPart:i,this.windowTitle=this._register(a.createInstance(Zn,t,i)),this.hoverDelegate=this._register(Yn()),this.registerListeners(bt(t))}registerListeners(e){this._register(this.hostService.onDidChangeFocus(t=>t?this.onFocus():this.onBlur())),this._register(this.hostService.onDidChangeActiveWindow(t=>t===e?this.onFocus():this.onBlur())),this._register(this.configurationService.onDidChangeConfiguration(t=>this.onConfigurationChanged(t))),this._register(this.editorGroupService.onDidChangeEditorPartOptions(t=>this.onEditorPartConfigurationChange(t)))}onBlur(){this.isInactive=!0,this.updateStyles()}onFocus(){this.isInactive=!1,this.updateStyles()}onEditorPartConfigurationChange({oldPartOptions:e,newPartOptions:t}){(e.editorActionsLocation!==t.editorActionsLocation||e.showTabs!==t.showTabs)&&this.actionToolBar&&(this.createActionToolBar(),this.createActionToolBarMenus({editorActions:!0}),this._onDidChange.fire(void 0))}onConfigurationChanged(e){if(!this.isAuxiliary&&!ge(this.configurationService,this.titleBarStyle)&&(!F||x)&&e.affectsConfiguration("window.menuBarVisibility")&&(this.currentMenubarVisibility==="compact"?this.uninstallMenubar():this.installMenubar()),this.actionToolBar){const t=e.affectsConfiguration("workbench.layoutControl.enabled"),i=e.affectsConfiguration("workbench.activityBar.location");(t||i)&&(this.createActionToolBarMenus({layoutActions:t,activityActions:i}),this._onDidChange.fire(void 0))}e.affectsConfiguration("window.commandCenter")&&(this.createTitle(),this._onDidChange.fire(void 0))}installMenubar(){this.menubar||(this.customMenubar=this._register(this.instantiationService.createInstance(Kn)),this.menubar=O(this.leftContent,A("div.menubar")),this.menubar.setAttribute("role","menubar"),this._register(this.customMenubar.onVisibilityChange(e=>this.onMenubarVisibilityChanged(e))),this.customMenubar.create(this.menubar))}uninstallMenubar(){var e,t;(e=this.customMenubar)==null||e.dispose(),this.customMenubar=void 0,(t=this.menubar)==null||t.remove(),this.menubar=void 0,this.onMenubarVisibilityChanged(!1)}onMenubarVisibilityChanged(e){(x||Et||xi)&&(this.lastLayoutDimensions&&this.layout(this.lastLayoutDimensions.width,this.lastLayoutDimensions.height),this._onMenubarVisibilityChange.fire(e))}updateProperties(e){this.windowTitle.updateProperties(e)}registerVariables(e){this.windowTitle.registerVariables(e)}createContentArea(e){var t,i;if(this.element=e,this.rootContainer=O(e,A(".titlebar-container")),this.leftContent=O(this.rootContainer,A(".titlebar-left")),this.centerContent=O(this.rootContainer,A(".titlebar-center")),this.rightContent=O(this.rootContainer,A(".titlebar-right")),!F&&!x&&!ge(this.configurationService,this.titleBarStyle)&&(this.appIcon=Wi(this.leftContent,A("a.window-appicon")),!this.isAuxiliary&&x)){const s=(t=this.environmentService.options)==null?void 0:t.homeIndicator;if(s){const n=Xn().getIcon(s.icon)?{id:s.icon}:V.code;this.appIcon.setAttribute("href",s.href),this.appIcon.classList.add(...E.asClassNameArray(n)),this.appIconBadge=document.createElement("div"),this.appIconBadge.classList.add("home-bar-icon-badge"),this.appIcon.appendChild(this.appIconBadge)}}if(this.dragRegion=Wi(this.rootContainer,A("div.titlebar-drag-region")),!this.isAuxiliary&&!ge(this.configurationService,this.titleBarStyle)&&(!F||x)&&this.currentMenubarVisibility!=="compact"&&this.installMenubar(),this.title=O(this.centerContent,A("div.window-title")),this.createTitle(),this.actionToolBarElement=O(this.rightContent,A("div.action-toolbar-container")),this.createActionToolBar(),this.createActionToolBarMenus(),!ge(this.configurationService,this.titleBarStyle)){let s=F?"left":"right";if(F&&vt){const n=new Intl.Locale(uo);((i=n==null?void 0:n.textInfo)==null?void 0:i.direction)==="rtl"&&(s="right")}F&&vt&&s==="left"||(this.windowControlsContainer=O(s==="left"?this.leftContent:this.rightContent,A("div.window-controls-container")),x&&O(s==="left"?this.rightContent:this.leftContent,A("div.window-controls-container")),ii()&&this.windowControlsContainer.classList.add("wco-enabled"))}return this._register($(this.rootContainer,Q.CONTEXT_MENU,s=>{He.stop(s);let n;F&&ws(s.target)&&$n(s.target,this.title)?n=T.TitleBarTitleContext:n=T.TitleBarContext,this.onContextMenu(s,n)})),F&&this._register($(this.title,Q.MOUSE_DOWN,s=>{s.metaKey&&(He.stop(s,!0),this.onContextMenu(s,T.TitleBarTitleContext))},!0)),this.updateStyles(),this.element}createTitle(){if(this.titleDisposables.clear(),!this.isCommandCenterVisible)this.title.innerText=this.windowTitle.value,this.titleDisposables.add(this.windowTitle.onDidChange(()=>{this.title.innerText=this.windowTitle.value}));else{const e=this.instantiationService.createInstance(wi,this.windowTitle,this.hoverDelegate);gs(this.title,e.element),this.titleDisposables.add(e)}}actionViewItemProvider(e,t){var s;if(!this.isAuxiliary){if(e.id===Ui)return this.instantiationService.createInstance(Qn,{position:()=>2},t);if(e.id===ji)return this.instantiationService.createInstance(qn,{position:()=>2},t)}const i=(s=this.editorGroupsContainer.activeGroup)==null?void 0:s.activeEditorPane;if(i&&i instanceof Jn){const n=i.getActionViewItem(e,t);if(n)return n}return Pi(this.instantiationService,e,{...t,menuAsChild:!1})}getKeybinding(e){var i,s;const t=((s=(i=this.editorGroupsContainer.activeGroup)==null?void 0:i.activeEditorPane)==null?void 0:s.scopedContextKeyService)??this.contextKeyService;return this.keybindingService.lookupKeybinding(e.id,t)}createActionToolBar(){this.actionToolBarDisposable.clear(),this.actionToolBar=this.actionToolBarDisposable.add(this.instantiationService.createInstance(fs,this.actionToolBarElement,{contextMenu:T.TitleBarContext,orientation:0,ariaLabel:g(3083,"Title actions"),getKeyBinding:e=>this.getKeybinding(e),overflowBehavior:{maxItems:9,exempted:[ji,Ui,...eo]},anchorAlignmentProvider:()=>1,telemetrySource:"titlePart",highlightToggledItems:this.editorActionsEnabled,actionViewItemProvider:(e,t)=>this.actionViewItemProvider(e,t),hoverDelegate:this.hoverDelegate})),this.editorActionsEnabled&&this.actionToolBarDisposable.add(this.editorGroupsContainer.onDidChangeActiveGroup(()=>this.createActionToolBarMenus({editorActions:!0})))}createActionToolBarMenus(e=!0){e===!0&&(e={editorActions:!0,layoutActions:!0,activityActions:!0});const t=()=>{const i={primary:[],secondary:[]};if(this.editorActionsEnabled){this.editorActionsChangeDisposable.clear();const s=this.editorGroupsContainer.activeGroup;if(s){const n=s.createEditorActions(this.editorActionsChangeDisposable);i.primary.push(...n.actions.primary),i.secondary.push(...n.actions.secondary),this.editorActionsChangeDisposable.add(n.onDidChange(()=>t()))}}this.layoutToolbarMenu&&fo(this.layoutToolbarMenu,{},i,()=>!this.editorActionsEnabled),this.activityActionsEnabled&&(go(this.storageService)&&i.primary.push(mo),i.primary.push(bo)),this.actionToolBar.setActions(Zi(i.primary),Zi(i.secondary))};if(e.editorActions)if(this.editorToolbarMenuDisposables.clear(),this.editorActionsEnabled&&this.editorService.activeEditor!==void 0){const i={groupId:this.editorGroupsContainer.activeGroup.id};this.actionToolBar.actionRunner=new to(i),this.actionToolBar.context=i,this.editorToolbarMenuDisposables.add(this.actionToolBar.actionRunner)}else this.actionToolBar.actionRunner=new Ni,this.actionToolBar.context=void 0,this.editorToolbarMenuDisposables.add(this.actionToolBar.actionRunner);e.layoutActions&&(this.layoutToolbarMenuDisposables.clear(),this.layoutControlEnabled?(this.layoutToolbarMenu=this.menuService.createMenu(T.LayoutControlMenu,this.contextKeyService),this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu),this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu.onDidChange(()=>t()))):this.layoutToolbarMenu=void 0),e.activityActions&&(this.activityToolbarDisposables.clear(),this.activityActionsEnabled&&this.activityToolbarDisposables.add(this.storageService.onDidChangeValue(0,io.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,this._store)(()=>t()))),t()}updateStyles(){if(super.updateStyles(),this.element){this.isInactive?this.element.classList.add("inactive"):this.element.classList.remove("inactive");const e=this.getColor(this.isInactive?so:no,(s,n)=>s.isOpaque()?s:s.makeOpaque(oo(n)))||"";this.element.style.backgroundColor=e,this.appIconBadge&&(this.appIconBadge.style.backgroundColor=e),e&&ao.fromHex(e).isLighter()?this.element.classList.add("light"):this.element.classList.remove("light");const t=this.getColor(this.isInactive?ro:co);this.element.style.color=t||"";const i=this.getColor(lo);this.element.style.borderBottom=i?`1px solid ${i}`:""}}onContextMenu(e,t){const i=new ho(R(this.element),e);this.contextMenuService.showContextMenu({getAnchor:()=>i,menuId:t,contextKeyService:this.contextKeyService,domForShadowRoot:F&&vt?i.target:void 0})}get currentMenubarVisibility(){return this.isAuxiliary?"hidden":ti(this.configurationService)}get layoutControlEnabled(){return!this.isAuxiliary&&this.configurationService.getValue("workbench.layoutControl.enabled")!==!1}get isCommandCenterVisible(){return this.configurationService.getValue("window.commandCenter")!==!1}get editorActionsEnabled(){return this.editorGroupService.partOptions.editorActionsLocation==="titleBar"||this.editorGroupService.partOptions.editorActionsLocation==="default"&&this.editorGroupService.partOptions.showTabs==="none"}get activityActionsEnabled(){const e=this.configurationService.getValue("workbench.activityBar.location");return!this.isAuxiliary&&(e==="top"||e==="bottom")}get hasZoomableElements(){const e=!(this.currentMenubarVisibility==="hidden"||this.currentMenubarVisibility==="compact"||!x&&F),t=this.isCommandCenterVisible,i=this.layoutControlEnabled||this.editorActionsEnabled||this.activityActionsEnabled;return e||t||i}get preventZoom(){return Ct(R(this.element))<1||!this.hasZoomableElements}layout(e,t){this.updateLayout(new We(e,t)),super.layoutContents(e,t)}updateLayout(e){this.lastLayoutDimensions=e;{const t=Ct(R(this.element));if(this.element.style.setProperty("--zoom-factor",t.toString()),this.rootContainer.classList.toggle("counter-zoom",this.preventZoom),this.customMenubar){const i=new We(0,e.height);this.customMenubar.layout(i)}}}focus(){this.customMenubar?this.customMenubar.toggleFocus():this.element.querySelector('[tabindex]:not([tabindex="-1"])').focus()}toJSON(){return{type:"workbench.parts.titlebar"}}dispose(){this._onWillDispose.fire(),super.dispose()}};Bt=C([d(3,Me),d(4,Ne),d(5,dt),d(6,P),d(7,ae),d(8,ce),d(9,q),d(10,je),d(11,Ze),d(12,re),d(13,ut),d(14,Li),d(15,Ve)],Bt);let Ii=class extends Bt{constructor(e,t,i,s,n,o,a,r,c,h,f,b,m){super("workbench.parts.titlebar",p,"main",e,t,i,s,n,o,a,r,c,h,f,b,m)}};Ii=C([d(0,Me),d(1,Ne),d(2,dt),d(3,P),d(4,ae),d(5,ce),d(6,q),d(7,je),d(8,Ze),d(9,re),d(10,ut),d(11,Li),d(12,Ve)],Ii);var Ee;let yi=(Ee=class extends Bt{get height(){return this.minimumHeight}constructor(e,t,i,s,n,o,a,r,c,h,f,b,m,S,y,te){const Ye=Ci.COUNTER++;super(`workbench.parts.auxiliaryTitle.${Ye}`,R(e),t,s,n,o,a,r,c,h,f,b,m,S,y,te),this.container=e,this.mainTitlebar=i}get preventZoom(){return Ct(R(this.element))<1||!this.mainTitlebar.hasZoomableElements}},Ci=Ee,Ee.COUNTER=1,Ee);yi=Ci=C([d(3,Me),d(4,Ne),d(5,dt),d(6,P),d(7,ae),d(8,ce),d(9,q),d(10,je),d(11,Ze),d(12,re),d(13,ut),d(14,Li),d(15,Ve)],yi);function la(){return{[Vi.toString()]:new $e(Si,[],!1)}}vs(async u=>{u.get(Vi)});var ha='.monaco-workbench .part.banner{background-color:var(--vscode-banner-background);box-sizing:border-box;color:var(--vscode-banner-foreground);cursor:default;display:flex;font-size:12px;height:100%;overflow:visible;width:100%}.monaco-workbench .part.banner .icon-container{align-items:center;display:flex;flex-shrink:0;padding:0 6px 0 10px}.monaco-workbench .part.banner .icon-container .codicon{color:var(--vscode-banner-iconForeground)}.monaco-workbench .part.banner .icon-container.custom-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMDI0IDEwMjRIMFYwaDEwMjR2MTAyNHoiIHN0eWxlPSJmaWxsOiNmNmY2ZjY7ZmlsbC1vcGFjaXR5OjAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTAyNCA4NS4zMzN2ODUzLjMzM0gwVjg1LjMzM2gxMDI0eiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjxwYXRoIGQ9Ik0wIDg1LjMzM2gyOTguNjY3djg1My4zMzNIMFY4NS4zMzN6bTEwMjQgMHY4NTMuMzMzSDM4NFY4NS4zMzNoNjQwem0tNTU0LjY2NyAxNjBoMzQxLjMzM3YtNjRINDY5LjMzM3Y2NHptMzQxLjMzNCA1MzMuMzM0SDQ2OS4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0xMjgtMTQ5LjMzNEg1OTcuMzMzdjY0aDM0MS4zMzNsLjAwMS02NHptMC0xNDkuMzMzSDU5Ny4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0wLTE0OS4zMzNINTk3LjMzM3Y2NGgzNDEuMzMzbC4wMDEtNjR6IiBzdHlsZT0iZmlsbDojMTY3YWJmIi8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:16px;margin:0 6px 0 10px;padding:0;width:16px}.monaco-workbench .part.banner .message-container{line-height:26px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .part.banner .message-container a{color:var(--vscode-banner-foreground)}.monaco-workbench .part.banner .message-container p{margin-block-end:0;margin-block-start:0}.monaco-workbench .part.banner .message-actions-container{flex-grow:1;flex-shrink:0;line-height:26px}.monaco-workbench .part.banner .message-actions-container a{color:var(--vscode-banner-foreground);cursor:pointer;margin-left:12px;padding:3px;text-decoration:underline}.monaco-workbench .part.banner .message-container a{cursor:pointer;text-decoration:underline}.monaco-workbench .part.banner .action-container{padding:0 10px 0 6px}.monaco-workbench .part.banner .action-container .codicon{color:var(--vscode-banner-foreground)}';Ue(ha,{});let Di=class extends ki{get minimumHeight(){return this.visible?this.height:0}get maximumHeight(){return this.visible?this.height:0}get onDidChange(){return this._onDidChangeSize.event}constructor(e,t,i,s,n){super("workbench.parts.banner",{hasTitle:!1},e,i,t),this.contextKeyService=s,this.instantiationService=n,this.height=26,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this._onDidChangeSize=this._register(new w),this.visible=!1,this.focusedActionIndex=-1,this.markdownRenderer=this.instantiationService.createInstance(po,{})}createContentArea(e){this.element=e,this.element.tabIndex=0,this._register($(this.element,Q.FOCUS,()=>{this.focusedActionIndex!==-1&&this.focusActionLink()}));const t=this._register(this.contextKeyService.createScoped(this.element));return Ut.bindTo(t).set(!0),this.element}close(e){this.setVisibility(!1),ot(this.element),typeof e.onClose=="function"&&e.onClose(),this.item=void 0}focusActionLink(){var t,i,s,n,o;const e=((i=(t=this.item)==null?void 0:t.actions)==null?void 0:i.length)??0;if(this.focusedActionIndex<e){const a=(s=this.messageActionsContainer)==null?void 0:s.children[this.focusedActionIndex];ws(a)&&((n=this.actionBar)==null||n.setFocusable(!1),a.focus())}else(o=this.actionBar)==null||o.focus(0)}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=A("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}setVisibility(e){e!==this.visible&&(this.visible=e,this.focusedActionIndex=-1,this.layoutService.setPartHidden(!e,"workbench.parts.banner"),this._onDidChangeSize.fire(void 0))}focus(){this.focusedActionIndex=-1,this.element.focus()}focusNextAction(){var t,i;const e=((i=(t=this.item)==null?void 0:t.actions)==null?void 0:i.length)??0;this.focusedActionIndex=this.focusedActionIndex<e?this.focusedActionIndex+1:0,this.focusActionLink()}focusPreviousAction(){var t,i;const e=((i=(t=this.item)==null?void 0:t.actions)==null?void 0:i.length)??0;this.focusedActionIndex=this.focusedActionIndex>0?this.focusedActionIndex-1:e,this.focusActionLink()}hide(e){var t;((t=this.item)==null?void 0:t.id)===e&&this.setVisibility(!1)}show(e){var r;if(e.id===((r=this.item)==null?void 0:r.id)){this.setVisibility(!0);return}ot(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const i=O(this.element,A("div.icon-container"));i.setAttribute("aria-hidden","true"),E.isThemeIcon(e.icon)?i.appendChild(A(`div${E.asCSSSelector(e.icon)}`)):(i.classList.add("custom-icon"),Wt.isUri(e.icon)&&(i.style.backgroundImage=wo(e.icon)));const s=O(this.element,A("div.message-container"));if(s.setAttribute("aria-hidden","true"),s.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=O(this.element,A("div.message-actions-container")),e.actions)for(const c of e.actions)this._register(this.instantiationService.createInstance(vo,this.messageActionsContainer,{...c,tabIndex:-1},{}));const n=O(this.element,A("div.action-container"));this.actionBar=this._register(new Mi(n));const o=e.closeLabel??"Close Banner",a=this._register(new W("banner.close",o,E.asClassName(Co),!0,()=>this.close(e)));this.actionBar.push(a,{icon:!0,label:!1}),this.actionBar.setFocusable(!1),this.setVisibility(!0),this.item=e}toJSON(){return{type:"workbench.parts.banner"}}};Di=C([d(0,ae),d(1,q),d(2,ce),d(3,je),d(4,P)],Di);M.registerCommandAndKeybindingRule({id:"workbench.banner.focusBanner",weight:200,primary:9,when:Ut,handler:u=>{u.get(xe).focus()}});M.registerCommandAndKeybindingRule({id:"workbench.banner.focusNextAction",weight:200,primary:17,secondary:[18],when:Ut,handler:u=>{u.get(xe).focusNextAction()}});M.registerCommandAndKeybindingRule({id:"workbench.banner.focusPreviousAction",weight:200,primary:15,secondary:[16],when:Ut,handler:u=>{u.get(xe).focusPreviousAction()}});const ze=class ze extends bs{constructor(){super({id:ze.ID,title:ze.LABEL,category:ps.View,f1:!0})}async run(e){e.get(q).focusPart("workbench.parts.banner")}};ze.ID="workbench.action.focusBanner",ze.LABEL=K(3019,"Focus Banner");let Ai=ze;ms(Ai);var It,_e;let Ei=(_e=class{constructor(e,t,i){var o;const s=(o=i.options)==null?void 0:o.welcomeBanner;if(!s||t.getBoolean(It.WELCOME_BANNER_DISMISSED_KEY,0,!1))return;let n;typeof s.icon=="string"?n=E.fromId(s.icon):s.icon&&(n=Wt.revive(s.icon)),e.show({id:"welcome.banner",message:s.message,icon:n,actions:s.actions,onClose:()=>{t.store(It.WELCOME_BANNER_DISMISSED_KEY,!0,0,1)}})}},It=_e,_e.WELCOME_BANNER_DISMISSED_KEY="workbench.banner.welcome.dismissed",_e);Ei=It=C([d(0,xe),d(1,ce),d(2,dt)],Ei);Bi.as(So.Workbench).registerWorkbenchContribution(Ei,3);function da(){return{[xe.toString()]:new $e(Di,[],!1)}}vs(async u=>{u.get(xe)});Bi.as(Cs.ViewContainersRegistry);Bi.as(Cs.ViewsRegistry);let _i=class extends ra{constructor(e,t,i){super(ko(),e,new Po,t),this.instantiationService=i,this.mainContainer.classList.add("monaco-workbench-part")}registerErrorHandler(e){us(t=>this.handleUnexpectedError(t,e))}createNotificationsHandlers(){}initServices(){return this.instantiationService}restore(){try{this.restoreParts()}catch(e){wt(e)}}};_i=C([d(1,ls),d(2,P)],_i);const Qi=Io(p);yo(Qi!=null&&!Qi.guess,p);Do(async u=>{u.get(q).startup()});Ao(async u=>{u.get(P).createInstance(Eo)});function _a(u,e){return{..._o(e),...No({isKeybindingConfigurationVisible:()=>!0,shouldUseGlobalPicker:()=>!0}),...To({shouldUseGlobalKeybindings:()=>!0}),[q.toString()]:new $e(_i,[u],!1),[re.toString()]:new $e(Mo,[],!1),[ut.toString()]:new $e(Vo,[void 0],!1),...la(),...xo(),...da()}}export{Ma as AbstractResourceEditorInput,Va as AbstractTextResourceEditorInput,xa as ConfirmResult,ka as DomScrollableElement,Pa as EditorInput,La as EditorInputCapabilities,Ba as Parts,Ra as RegisteredEditorPriority,Oa as SplitView,za as ViewContainerLocation,Ha as ViewPaneContainer,_a as default};
