var vl=Object.create;var cn=Object.defineProperty;var yl=Object.getOwnPropertyDescriptor;var Cl=Object.getOwnPropertyNames;var wl=Object.getPrototypeOf,Rl=Object.prototype.hasOwnProperty;var xo=r=>cn(r,"__esModule",{value:!0});var _l=(r,e)=>()=>(r&&(e=r(r=0)),e);var k=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),To=(r,e)=>{xo(r);for(var t in e)cn(r,t,{get:e[t],enumerable:!0})},bl=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Cl(e))!Rl.call(r,n)&&n!=="default"&&cn(r,n,{get:()=>e[n],enumerable:!(t=yl(e,n))||t.enumerable});return r},Cr=r=>bl(xo(cn(r!=null?vl(wl(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var Me=(r,e,t)=>new Promise((n,i)=>{var s=l=>{try{f(t.next(l))}catch(h){i(h)}},o=l=>{try{f(t.throw(l))}catch(h){i(h)}},f=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);f((t=t.apply(r,e)).next())});var qt=k(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});var Vn;function Yn(){if(Vn===void 0)throw new Error("No runtime abstraction layer installed");return Vn}(function(r){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");Vn=t}r.install=e})(Yn||(Yn={}));Zn.default=Yn});var ei=k(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.Disposable=void 0;var xl;(function(r){function e(t){return{dispose:t}}r.create=e})(xl=Ar.Disposable||(Ar.Disposable={}))});var or=k(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.Emitter=ir.Event=void 0;var Tl=qt(),Dl;(function(r){let e={dispose(){}};r.None=function(){return e}})(Dl=ir.Event||(ir.Event={}));var Do=class{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=n.length;s<o;s++)try{t.push(n[s].apply(i[s],e))}catch(f){Tl.default().console.error(f)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Mr=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new Do),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,t),i.dispose=Mr._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};ir.Emitter=Mr;Mr._noop=function(){}});var Po=k(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.AbstractMessageBuffer=void 0;var Sl=13,Pl=10,El=`\r
`,So=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,t=0,n=0,i=0;e:for(;t<this._chunks.length;){let l=this._chunks[t];n=0;t:for(;n<l.length;){switch(l[n]){case Sl:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case Pl:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}i+=l.byteLength,t++}if(e!==4)return;let s=this._read(i+n),o=new Map,f=this.toString(s,"ascii").split(El);if(f.length<2)return o;for(let l=0;l<f.length-2;l++){let h=f[l],_=h.indexOf(":");if(_===-1)throw new Error("Message header must separate key and value using :");let R=h.substr(0,_),x=h.substr(_+1).trim();o.set(R,x)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let t=this.allocNative(e),n=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);t.set(o,n),n+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else t.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return t}};ln.AbstractMessageBuffer=So});var jo=k(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});var kl=qt(),wr=ei(),ql=or(),jl=Po(),Wr=class extends jl.AbstractMessageBuffer{constructor(e="utf-8"){super(e);this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return Wr.emptyBuffer}fromString(e,t){return new TextEncoder().encode(e)}toString(e,t){return t==="ascii"?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}};Wr.emptyBuffer=new Uint8Array(0);var Eo=class{constructor(e){this.socket=e,this._onData=new ql.Emitter,this._messageListener=t=>{t.data.arrayBuffer().then(i=>{this._onData.fire(new Uint8Array(i))})},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),wr.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),wr.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),wr.Disposable.create(()=>this.socket.removeEventListener("end",e))}onData(e){return this._onData.event(e)}},ko=class{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),wr.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),wr.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),wr.Disposable.create(()=>this.socket.removeEventListener("end",e))}write(e,t){if(typeof e=="string"){if(t!==void 0&&t!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}},Fl=new TextEncoder,qo=Object.freeze({messageBuffer:Object.freeze({create:r=>new Wr(r)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(r,e)=>{if(e.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encding is supported. But got encoding: ${e.charset}`);return Promise.resolve(Fl.encode(JSON.stringify(r,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(r,e)=>{if(!(r instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(e.charset).decode(r)))}})}),stream:Object.freeze({asReadableStream:r=>new Eo(r),asWritableStream:r=>new ko(r)}),console,timer:Object.freeze({setTimeout(r,e,...t){return setTimeout(r,e,...t)},clearTimeout(r){clearTimeout(r)},setImmediate(r,...e){return setTimeout(r,0,...e)},clearImmediate(r){clearTimeout(r)}})});function ti(){return qo}(function(r){function e(){kl.default.install(qo)}r.install=e})(ti||(ti={}));ri.default=ti});var Rr=k(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.stringArray=Ie.array=Ie.func=Ie.error=Ie.number=Ie.string=Ie.boolean=void 0;function Ol(r){return r===!0||r===!1}Ie.boolean=Ol;function Fo(r){return typeof r=="string"||r instanceof String}Ie.string=Fo;function Il(r){return typeof r=="number"||r instanceof Number}Ie.number=Il;function Ll(r){return r instanceof Error}Ie.error=Ll;function Nl(r){return typeof r=="function"}Ie.func=Nl;function Oo(r){return Array.isArray(r)}Ie.array=Oo;function Al(r){return Oo(r)&&r.every(e=>Fo(e))}Ie.stringArray=Al});var ni=k(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.isResponseMessage=L.isNotificationMessage=L.isRequestMessage=L.NotificationType9=L.NotificationType8=L.NotificationType7=L.NotificationType6=L.NotificationType5=L.NotificationType4=L.NotificationType3=L.NotificationType2=L.NotificationType1=L.NotificationType0=L.NotificationType=L.RequestType9=L.RequestType8=L.RequestType7=L.RequestType6=L.RequestType5=L.RequestType4=L.RequestType3=L.RequestType2=L.RequestType1=L.RequestType=L.RequestType0=L.AbstractMessageSignature=L.ParameterStructures=L.ResponseError=L.ErrorCodes=void 0;var sr=Rr(),Io;(function(r){r.ParseError=-32700,r.InvalidRequest=-32600,r.MethodNotFound=-32601,r.InvalidParams=-32602,r.InternalError=-32603,r.jsonrpcReservedErrorRangeStart=-32099,r.serverErrorStart=r.jsonrpcReservedErrorRangeStart,r.MessageWriteError=-32099,r.MessageReadError=-32098,r.ServerNotInitialized=-32002,r.UnknownErrorCode=-32001,r.jsonrpcReservedErrorRangeEnd=-32e3,r.serverErrorEnd=r.jsonrpcReservedErrorRangeEnd})(Io=L.ErrorCodes||(L.ErrorCodes={}));var dn=class extends Error{constructor(e,t,n){super(t);this.code=sr.number(e)?e:Io.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,dn.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};L.ResponseError=dn;var Fe=class{constructor(e){this.kind=e}static is(e){return e===Fe.auto||e===Fe.byName||e===Fe.byPosition}toString(){return this.kind}};L.ParameterStructures=Fe;Fe.auto=new Fe("auto");Fe.byPosition=new Fe("byPosition");Fe.byName=new Fe("byName");var he=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return Fe.auto}};L.AbstractMessageSignature=he;var Lo=class extends he{constructor(e){super(e,0)}};L.RequestType0=Lo;var No=class extends he{constructor(e,t=Fe.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};L.RequestType=No;var Ao=class extends he{constructor(e,t=Fe.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};L.RequestType1=Ao;var Mo=class extends he{constructor(e){super(e,2)}};L.RequestType2=Mo;var Wo=class extends he{constructor(e){super(e,3)}};L.RequestType3=Wo;var Ho=class extends he{constructor(e){super(e,4)}};L.RequestType4=Ho;var Bo=class extends he{constructor(e){super(e,5)}};L.RequestType5=Bo;var Uo=class extends he{constructor(e){super(e,6)}};L.RequestType6=Uo;var Ko=class extends he{constructor(e){super(e,7)}};L.RequestType7=Ko;var zo=class extends he{constructor(e){super(e,8)}};L.RequestType8=zo;var $o=class extends he{constructor(e){super(e,9)}};L.RequestType9=$o;var Jo=class extends he{constructor(e,t=Fe.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};L.NotificationType=Jo;var Go=class extends he{constructor(e){super(e,0)}};L.NotificationType0=Go;var Qo=class extends he{constructor(e,t=Fe.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};L.NotificationType1=Qo;var Xo=class extends he{constructor(e){super(e,2)}};L.NotificationType2=Xo;var Vo=class extends he{constructor(e){super(e,3)}};L.NotificationType3=Vo;var Yo=class extends he{constructor(e){super(e,4)}};L.NotificationType4=Yo;var Zo=class extends he{constructor(e){super(e,5)}};L.NotificationType5=Zo;var es=class extends he{constructor(e){super(e,6)}};L.NotificationType6=es;var ts=class extends he{constructor(e){super(e,7)}};L.NotificationType7=ts;var rs=class extends he{constructor(e){super(e,8)}};L.NotificationType8=rs;var ns=class extends he{constructor(e){super(e,9)}};L.NotificationType9=ns;function Ml(r){let e=r;return e&&sr.string(e.method)&&(sr.string(e.id)||sr.number(e.id))}L.isRequestMessage=Ml;function Wl(r){let e=r;return e&&sr.string(e.method)&&r.id===void 0}L.isNotificationMessage=Wl;function Hl(r){let e=r;return e&&(e.result!==void 0||!!e.error)&&(sr.string(e.id)||sr.number(e.id)||e.id===null)}L.isResponseMessage=Hl});var ai=k(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.CancellationTokenSource=ar.CancellationToken=void 0;var is=qt(),Bl=Rr(),ii=or(),oi;(function(r){r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ii.Event.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ii.Event.None});function e(t){let n=t;return n&&(n===r.None||n===r.Cancelled||Bl.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}r.is=e})(oi=ar.CancellationToken||(ar.CancellationToken={}));var Ul=Object.freeze(function(r,e){let t=is.default().timer.setTimeout(r.bind(e),0);return{dispose(){is.default().timer.clearTimeout(t)}}}),si=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Ul:(this._emitter||(this._emitter=new ii.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},os=class{get token(){return this._token||(this._token=new si),this._token}cancel(){this._token?this._token.cancel():this._token=oi.Cancelled}dispose(){this._token?this._token instanceof si&&this._token.dispose():this._token=oi.None}};ar.CancellationTokenSource=os});var as=k(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.ReadableStreamMessageReader=jt.AbstractMessageReader=jt.MessageReader=void 0;var fn=qt(),_r=Rr(),ui=or(),Kl;(function(r){function e(t){let n=t;return n&&_r.func(n.listen)&&_r.func(n.dispose)&&_r.func(n.onError)&&_r.func(n.onClose)&&_r.func(n.onPartialMessage)}r.is=e})(Kl=jt.MessageReader||(jt.MessageReader={}));var ci=class{constructor(){this.errorEmitter=new ui.Emitter,this.closeEmitter=new ui.Emitter,this.partialMessageEmitter=new ui.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${_r.string(e.message)?e.message:"unknown"}`)}};jt.AbstractMessageReader=ci;var li;(function(r){function e(t){var n;let i,s,o,f=new Map,l,h=new Map;if(t===void 0||typeof t=="string")i=t??"utf-8";else{if(i=(n=t.charset)!==null&&n!==void 0?n:"utf-8",t.contentDecoder!==void 0&&(o=t.contentDecoder,f.set(o.name,o)),t.contentDecoders!==void 0)for(let _ of t.contentDecoders)f.set(_.name,_);if(t.contentTypeDecoder!==void 0&&(l=t.contentTypeDecoder,h.set(l.name,l)),t.contentTypeDecoders!==void 0)for(let _ of t.contentTypeDecoders)h.set(_.name,_)}return l===void 0&&(l=fn.default().applicationJson.decoder,h.set(l.name,l)),{charset:i,contentDecoder:o,contentDecoders:f,contentTypeDecoder:l,contentTypeDecoders:h}}r.fromOptions=e})(li||(li={}));var ss=class extends ci{constructor(e,t){super();this.readable=e,this.options=li.fromOptions(t),this.buffer=fn.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),t}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let o=parseInt(s);if(isNaN(o))throw new Error("Content-Length value must be a number.");this.nextMessageLength=o}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let n;this.options.contentDecoder!==void 0?n=this.options.contentDecoder.decode(t):n=Promise.resolve(t),n.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(fn.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=fn.default().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};jt.ReadableStreamMessageReader=ss});var cs=k(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.Semaphore=void 0;var zl=qt(),us=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||zl.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};pn.Semaphore=us});var hs=k(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.WriteableStreamMessageWriter=Ft.AbstractMessageWriter=Ft.MessageWriter=void 0;var ls=qt(),Hr=Rr(),$l=cs(),ds=or(),Jl="Content-Length: ",fs=`\r
`,Gl;(function(r){function e(t){let n=t;return n&&Hr.func(n.dispose)&&Hr.func(n.onClose)&&Hr.func(n.onError)&&Hr.func(n.write)}r.is=e})(Gl=Ft.MessageWriter||(Ft.MessageWriter={}));var di=class{constructor(){this.errorEmitter=new ds.Emitter,this.closeEmitter=new ds.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Hr.string(e.message)?e.message:"unknown"}`)}};Ft.AbstractMessageWriter=di;var fi;(function(r){function e(t){var n,i;return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:ls.default().applicationJson.encoder}:{charset:(n=t.charset)!==null&&n!==void 0?n:"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:(i=t.contentTypeEncoder)!==null&&i!==void 0?i:ls.default().applicationJson.encoder}}r.fromOptions=e})(fi||(fi={}));var ps=class extends di{constructor(e,t){super();this.writable=e,this.options=fi.fromOptions(t),this.errorCount=0,this.writeSemaphore=new $l.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(Jl,n.byteLength.toString(),fs),i.push(fs),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};Ft.WriteableStreamMessageWriter=ps});var ms=k(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.LRUCache=Ot.LinkedMap=Ot.Touch=void 0;var We;(function(r){r.None=0,r.First=1,r.AsOld=r.First,r.Last=2,r.AsNew=r.Last})(We=Ot.Touch||(Ot.Touch={}));var pi=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=We.None){let n=this._map.get(e);if(!!n)return t!==We.None&&this.touch(n,t),n.value}set(e,t,n=We.None){let i=this._map.get(e);if(i)i.value=t,n!==We.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case We.None:this.addItemLast(i);break;case We.First:this.addItemFirst(i);break;case We.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(!!t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}values(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}entries(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==We.First&&t!==We.Last)){if(t===We.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===We.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}};Ot.LinkedMap=pi;var gs=class extends pi{constructor(e,t=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=We.AsNew){return super.get(e,t)}peek(e){return super.get(e,We.None)}set(e,t){return super.set(e,t,We.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Ot.LRUCache=gs});var _s=k(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.createMessageConnection=z.ConnectionOptions=z.CancellationStrategy=z.CancellationSenderStrategy=z.CancellationReceiverStrategy=z.ConnectionStrategy=z.ConnectionError=z.ConnectionErrors=z.LogTraceNotification=z.SetTraceNotification=z.TraceFormat=z.Trace=z.NullLogger=z.ProgressType=void 0;var vs=qt(),Pe=Rr(),K=ni(),ys=ms(),Br=or(),hi=ai(),Ur;(function(r){r.type=new K.NotificationType("$/cancelRequest")})(Ur||(Ur={}));var hn;(function(r){r.type=new K.NotificationType("$/progress")})(hn||(hn={}));var Cs=class{constructor(){}};z.ProgressType=Cs;var gi;(function(r){function e(t){return Pe.func(t)}r.is=e})(gi||(gi={}));z.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var be;(function(r){r[r.Off=0]="Off",r[r.Messages=1]="Messages",r[r.Verbose=2]="Verbose"})(be=z.Trace||(z.Trace={}));(function(r){function e(n){if(!Pe.string(n))return r.Off;switch(n=n.toLowerCase(),n){case"off":return r.Off;case"messages":return r.Messages;case"verbose":return r.Verbose;default:return r.Off}}r.fromString=e;function t(n){switch(n){case r.Off:return"off";case r.Messages:return"messages";case r.Verbose:return"verbose";default:return"off"}}r.toString=t})(be=z.Trace||(z.Trace={}));var lt;(function(r){r.Text="text",r.JSON="json"})(lt=z.TraceFormat||(z.TraceFormat={}));(function(r){function e(t){return t=t.toLowerCase(),t==="json"?r.JSON:r.Text}r.fromString=e})(lt=z.TraceFormat||(z.TraceFormat={}));var ws;(function(r){r.type=new K.NotificationType("$/setTrace")})(ws=z.SetTraceNotification||(z.SetTraceNotification={}));var mi;(function(r){r.type=new K.NotificationType("$/logTrace")})(mi=z.LogTraceNotification||(z.LogTraceNotification={}));var gn;(function(r){r[r.Closed=1]="Closed",r[r.Disposed=2]="Disposed",r[r.AlreadyListening=3]="AlreadyListening"})(gn=z.ConnectionErrors||(z.ConnectionErrors={}));var ur=class extends Error{constructor(e,t){super(t);this.code=e,Object.setPrototypeOf(this,ur.prototype)}};z.ConnectionError=ur;var Rs;(function(r){function e(t){let n=t;return n&&Pe.func(n.cancelUndispatched)}r.is=e})(Rs=z.ConnectionStrategy||(z.ConnectionStrategy={}));var vi;(function(r){r.Message=Object.freeze({createCancellationTokenSource(t){return new hi.CancellationTokenSource}});function e(t){let n=t;return n&&Pe.func(n.createCancellationTokenSource)}r.is=e})(vi=z.CancellationReceiverStrategy||(z.CancellationReceiverStrategy={}));var yi;(function(r){r.Message=Object.freeze({sendCancellation(t,n){t.sendNotification(Ur.type,{id:n})},cleanup(t){}});function e(t){let n=t;return n&&Pe.func(n.sendCancellation)&&Pe.func(n.cleanup)}r.is=e})(yi=z.CancellationSenderStrategy||(z.CancellationSenderStrategy={}));var Ci;(function(r){r.Message=Object.freeze({receiver:vi.Message,sender:yi.Message});function e(t){let n=t;return n&&vi.is(n.receiver)&&yi.is(n.sender)}r.is=e})(Ci=z.CancellationStrategy||(z.CancellationStrategy={}));var Ql;(function(r){function e(t){let n=t;return n&&(Ci.is(n.cancellationStrategy)||Rs.is(n.connectionStrategy))}r.is=e})(Ql=z.ConnectionOptions||(z.ConnectionOptions={}));var dt;(function(r){r[r.New=1]="New",r[r.Listening=2]="Listening",r[r.Closed=3]="Closed",r[r.Disposed=4]="Disposed"})(dt||(dt={}));function Xl(r,e,t,n){let i=t!==void 0?t:z.NullLogger,s=0,o=0,f=0,l="2.0",h,_=Object.create(null),R,x=Object.create(null),P=new Map,q,O=new ys.LinkedMap,X=Object.create(null),F=Object.create(null),I=be.Off,$=lt.Text,W,U=dt.New,V=new Br.Emitter,se=new Br.Emitter,de=new Br.Emitter,fe=new Br.Emitter,De=new Br.Emitter,Se=n&&n.cancellationStrategy?n.cancellationStrategy:Ci.Message;function Be(C){if(C===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+C.toString()}function Ne(C){return C===null?"res-unknown-"+(++f).toString():"res-"+C.toString()}function Ue(){return"not-"+(++o).toString()}function Ae(C,g){K.isRequestMessage(g)?C.set(Be(g.id),g):K.isResponseMessage(g)?C.set(Ne(g.id),g):C.set(Ue(),g)}function Xe(C){}function le(){return U===dt.Listening}function ut(){return U===dt.Closed}function Te(){return U===dt.Disposed}function Ge(){(U===dt.New||U===dt.Listening)&&(U=dt.Closed,se.fire(void 0))}function Ve(C){V.fire([C,void 0,void 0])}function ct(C){V.fire(C)}r.onClose(Ge),r.onError(Ve),e.onClose(Ge),e.onError(ct);function Ht(){q||O.size===0||(q=vs.default().timer.setImmediate(()=>{q=void 0,Bt()}))}function Bt(){if(O.size===0)return;let C=O.shift();try{K.isRequestMessage(C)?St(C):K.isNotificationMessage(C)?yt(C):K.isResponseMessage(C)?vt(C):Pt(C)}finally{Ht()}}let Dt=C=>{try{if(K.isNotificationMessage(C)&&C.method===Ur.type.method){let g=Be(C.params.id),d=O.get(g);if(K.isRequestMessage(d)){let m=n==null?void 0:n.connectionStrategy,w=m&&m.cancelUndispatched?m.cancelUndispatched(d,Xe):Xe(d);if(w&&(w.error!==void 0||w.result!==void 0)){O.delete(g),w.id=d.id,Ye(w,C.method,Date.now()),e.write(w);return}}}Ae(O,C)}finally{Ht()}};function St(C){if(Te())return;function g(b,E,A){let J={jsonrpc:l,id:C.id};b instanceof K.ResponseError?J.error=b.toJson():J.result=b===void 0?null:b,Ye(J,E,A),e.write(J)}function d(b,E,A){let J={jsonrpc:l,id:C.id,error:b.toJson()};Ye(J,E,A),e.write(J)}function m(b,E,A){b===void 0&&(b=null);let J={jsonrpc:l,id:C.id,result:b};Ye(J,E,A),e.write(J)}Kt(C);let w=_[C.method],a,u;w&&(a=w.type,u=w.handler);let y=Date.now();if(u||h){let b=String(C.id),E=Se.receiver.createCancellationTokenSource(b);F[b]=E;try{let A;if(u)if(C.params===void 0){if(a!==void 0&&a.numberOfParams!==0){d(new K.ResponseError(K.ErrorCodes.InvalidParams,`Request ${C.method} defines ${a.numberOfParams} params but recevied none.`),C.method,y);return}A=u(E.token)}else if(Array.isArray(C.params)){if(a!==void 0&&a.parameterStructures===K.ParameterStructures.byName){d(new K.ResponseError(K.ErrorCodes.InvalidParams,`Request ${C.method} defines parameters by name but received parameters by position`),C.method,y);return}A=u(...C.params,E.token)}else{if(a!==void 0&&a.parameterStructures===K.ParameterStructures.byPosition){d(new K.ResponseError(K.ErrorCodes.InvalidParams,`Request ${C.method} defines parameters by position but received parameters by name`),C.method,y);return}A=u(C.params,E.token)}else h&&(A=h(C.method,C.params,E.token));let J=A;A?J.then?J.then(ie=>{delete F[b],g(ie,C.method,y)},ie=>{delete F[b],ie instanceof K.ResponseError?d(ie,C.method,y):ie&&Pe.string(ie.message)?d(new K.ResponseError(K.ErrorCodes.InternalError,`Request ${C.method} failed with message: ${ie.message}`),C.method,y):d(new K.ResponseError(K.ErrorCodes.InternalError,`Request ${C.method} failed unexpectedly without providing any details.`),C.method,y)}):(delete F[b],g(A,C.method,y)):(delete F[b],m(A,C.method,y))}catch(A){delete F[b],A instanceof K.ResponseError?g(A,C.method,y):A&&Pe.string(A.message)?d(new K.ResponseError(K.ErrorCodes.InternalError,`Request ${C.method} failed with message: ${A.message}`),C.method,y):d(new K.ResponseError(K.ErrorCodes.InternalError,`Request ${C.method} failed unexpectedly without providing any details.`),C.method,y)}}else d(new K.ResponseError(K.ErrorCodes.MethodNotFound,`Unhandled method ${C.method}`),C.method,y)}function vt(C){if(!Te())if(C.id===null)C.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(C.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let g=String(C.id),d=X[g];if(er(C,d),d){delete X[g];try{if(C.error){let m=C.error;d.reject(new K.ResponseError(m.code,m.message,m.data))}else if(C.result!==void 0)d.resolve(C.result);else throw new Error("Should never happen.")}catch(m){m.message?i.error(`Response handler '${d.method}' failed with message: ${m.message}`):i.error(`Response handler '${d.method}' failed unexpectedly.`)}}}}function yt(C){if(Te())return;let g,d;if(C.method===Ur.type.method)d=m=>{let w=m.id,a=F[String(w)];a&&a.cancel()};else{let m=x[C.method];m&&(d=m.handler,g=m.type)}if(d||R)try{Ze(C),d?C.params===void 0?(g!==void 0&&g.numberOfParams!==0&&g.parameterStructures!==K.ParameterStructures.byName&&i.error(`Notification ${C.method} defines ${g.numberOfParams} params but recevied none.`),d()):Array.isArray(C.params)?(g!==void 0&&(g.parameterStructures===K.ParameterStructures.byName&&i.error(`Notification ${C.method} defines parameters by name but received parameters by position`),g.numberOfParams!==C.params.length&&i.error(`Notification ${C.method} defines ${g.numberOfParams} params but received ${C.params.length} argumennts`)),d(...C.params)):(g!==void 0&&g.parameterStructures===K.ParameterStructures.byPosition&&i.error(`Notification ${C.method} defines parameters by position but received parameters by name`),d(C.params)):R&&R(C.method,C.params)}catch(m){m.message?i.error(`Notification handler '${C.method}' failed with message: ${m.message}`):i.error(`Notification handler '${C.method}' failed unexpectedly.`)}else de.fire(C)}function Pt(C){if(!C){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(C,null,4)}`);let g=C;if(Pe.string(g.id)||Pe.number(g.id)){let d=String(g.id),m=X[d];m&&m.reject(new Error("The received response has neither a result nor an error property."))}}function Ut(C){if(!(I===be.Off||!W))if($===lt.Text){let g;I===be.Verbose&&C.params&&(g=`Params: ${JSON.stringify(C.params,null,4)}

`),W.log(`Sending request '${C.method} - (${C.id})'.`,g)}else Ce("send-request",C)}function Zt(C){if(!(I===be.Off||!W))if($===lt.Text){let g;I===be.Verbose&&(C.params?g=`Params: ${JSON.stringify(C.params,null,4)}

`:g=`No parameters provided.

`),W.log(`Sending notification '${C.method}'.`,g)}else Ce("send-notification",C)}function Ye(C,g,d){if(!(I===be.Off||!W))if($===lt.Text){let m;I===be.Verbose&&(C.error&&C.error.data?m=`Error data: ${JSON.stringify(C.error.data,null,4)}

`:C.result?m=`Result: ${JSON.stringify(C.result,null,4)}

`:C.error===void 0&&(m=`No result returned.

`)),W.log(`Sending response '${g} - (${C.id})'. Processing request took ${Date.now()-d}ms`,m)}else Ce("send-response",C)}function Kt(C){if(!(I===be.Off||!W))if($===lt.Text){let g;I===be.Verbose&&C.params&&(g=`Params: ${JSON.stringify(C.params,null,4)}

`),W.log(`Received request '${C.method} - (${C.id})'.`,g)}else Ce("receive-request",C)}function Ze(C){if(!(I===be.Off||!W||C.method===mi.type.method))if($===lt.Text){let g;I===be.Verbose&&(C.params?g=`Params: ${JSON.stringify(C.params,null,4)}

`:g=`No parameters provided.

`),W.log(`Received notification '${C.method}'.`,g)}else Ce("receive-notification",C)}function er(C,g){if(!(I===be.Off||!W))if($===lt.Text){let d;if(I===be.Verbose&&(C.error&&C.error.data?d=`Error data: ${JSON.stringify(C.error.data,null,4)}

`:C.result?d=`Result: ${JSON.stringify(C.result,null,4)}

`:C.error===void 0&&(d=`No result returned.

`)),g){let m=C.error?` Request failed: ${C.error.message} (${C.error.code}).`:"";W.log(`Received response '${g.method} - (${C.id})' in ${Date.now()-g.timerStart}ms.${m}`,d)}else W.log(`Received response ${C.id} without active response promise.`,d)}else Ce("receive-response",C)}function Ce(C,g){if(!W||I===be.Off)return;let d={isLSPMessage:!0,type:C,message:g,timestamp:Date.now()};W.log(d)}function Ke(){if(ut())throw new ur(gn.Closed,"Connection is closed.");if(Te())throw new ur(gn.Disposed,"Connection is disposed.")}function zt(){if(le())throw new ur(gn.AlreadyListening,"Connection is already listening")}function tr(){if(!le())throw new Error("Call listen() first.")}function et(C){return C===void 0?null:C}function $t(C){if(C!==null)return C}function Et(C){return C!=null&&!Array.isArray(C)&&typeof C=="object"}function tt(C,g){switch(C){case K.ParameterStructures.auto:return Et(g)?$t(g):[et(g)];case K.ParameterStructures.byName:if(!Et(g))throw new Error("Recevied parameters by name but param is not an object literal.");return $t(g);case K.ParameterStructures.byPosition:return[et(g)];default:throw new Error(`Unknown parameter structure ${C.toString()}`)}}function kt(C,g){let d,m=C.numberOfParams;switch(m){case 0:d=void 0;break;case 1:d=tt(C.parameterStructures,g[0]);break;default:d=[];for(let w=0;w<g.length&&w<m;w++)d.push(et(g[w]));if(g.length<m)for(let w=g.length;w<m;w++)d.push(null);break}return d}let rt={sendNotification:(C,...g)=>{Ke();let d,m;if(Pe.string(C)){d=C;let a=g[0],u=0,y=K.ParameterStructures.auto;K.ParameterStructures.is(a)&&(u=1,y=a);let b=g.length,E=b-u;switch(E){case 0:m=void 0;break;case 1:m=tt(y,g[u]);break;default:if(y===K.ParameterStructures.byName)throw new Error(`Recevied ${E} parameters for 'by Name' notification parameter structure.`);m=g.slice(u,b).map(A=>et(A));break}}else{let a=g;d=C.method,m=kt(C,a)}let w={jsonrpc:l,method:d,params:m};Zt(w),e.write(w)},onNotification:(C,g)=>{Ke();let d;return Pe.func(C)?R=C:g&&(Pe.string(C)?(d=C,x[C]={type:void 0,handler:g}):(d=C.method,x[C.method]={type:C,handler:g})),{dispose:()=>{d!==void 0?delete x[d]:R=void 0}}},onProgress:(C,g,d)=>{if(P.has(g))throw new Error(`Progress handler for token ${g} already registered`);return P.set(g,d),{dispose:()=>{P.delete(g)}}},sendProgress:(C,g,d)=>{rt.sendNotification(hn.type,{token:g,value:d})},onUnhandledProgress:fe.event,sendRequest:(C,...g)=>{Ke(),tr();let d,m,w;if(Pe.string(C)){d=C;let b=g[0],E=g[g.length-1],A=0,J=K.ParameterStructures.auto;K.ParameterStructures.is(b)&&(A=1,J=b);let ie=g.length;hi.CancellationToken.is(E)&&(ie=ie-1,w=E);let we=ie-A;switch(we){case 0:m=void 0;break;case 1:m=tt(J,g[A]);break;default:if(J===K.ParameterStructures.byName)throw new Error(`Recevied ${we} parameters for 'by Name' request parameter structure.`);m=g.slice(A,ie).map(Re=>et(Re));break}}else{let b=g;d=C.method,m=kt(C,b);let E=C.numberOfParams;w=hi.CancellationToken.is(b[E])?b[E]:void 0}let a=s++,u;return w&&(u=w.onCancellationRequested(()=>{Se.sender.sendCancellation(rt,a)})),new Promise((b,E)=>{let A={jsonrpc:l,id:a,method:d,params:m},J=Re=>{b(Re),Se.sender.cleanup(a),u==null||u.dispose()},ie=Re=>{E(Re),Se.sender.cleanup(a),u==null||u.dispose()},we={method:d,timerStart:Date.now(),resolve:J,reject:ie};Ut(A);try{e.write(A)}catch(Re){we.reject(new K.ResponseError(K.ErrorCodes.MessageWriteError,Re.message?Re.message:"Unknown reason")),we=null}we&&(X[String(a)]=we)})},onRequest:(C,g)=>{Ke();let d=null;return gi.is(C)?(d=void 0,h=C):Pe.string(C)?(d=null,g!==void 0&&(d=C,_[C]={handler:g,type:void 0})):g!==void 0&&(d=C.method,_[C.method]={type:C,handler:g}),{dispose:()=>{d!==null&&(d!==void 0?delete _[d]:h=void 0)}}},trace:(C,g,d)=>{let m=!1,w=lt.Text;d!==void 0&&(Pe.boolean(d)?m=d:(m=d.sendNotification||!1,w=d.traceFormat||lt.Text)),I=C,$=w,I===be.Off?W=void 0:W=g,m&&!ut()&&!Te()&&rt.sendNotification(ws.type,{value:be.toString(C)})},onError:V.event,onClose:se.event,onUnhandledNotification:de.event,onDispose:De.event,end:()=>{e.end()},dispose:()=>{if(Te())return;U=dt.Disposed,De.fire(void 0);let C=new Error("Connection got disposed.");Object.keys(X).forEach(g=>{X[g].reject(C)}),X=Object.create(null),F=Object.create(null),O=new ys.LinkedMap,Pe.func(e.dispose)&&e.dispose(),Pe.func(r.dispose)&&r.dispose()},listen:()=>{Ke(),zt(),U=dt.Listening,r.listen(Dt)},inspect:()=>{vs.default().console.log("inspect")}};return rt.onNotification(mi.type,C=>{I===be.Off||!W||W.log(C.message,I===be.Verbose?C.verbose:void 0)}),rt.onNotification(hn.type,C=>{let g=P.get(C.token);g?g(C.value):fe.fire(C)}),rt}z.createMessageConnection=Xl});var _i=k(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.CancellationSenderStrategy=S.CancellationReceiverStrategy=S.ConnectionError=S.ConnectionErrors=S.LogTraceNotification=S.SetTraceNotification=S.TraceFormat=S.Trace=S.ProgressType=S.createMessageConnection=S.NullLogger=S.ConnectionOptions=S.ConnectionStrategy=S.WriteableStreamMessageWriter=S.AbstractMessageWriter=S.MessageWriter=S.ReadableStreamMessageReader=S.AbstractMessageReader=S.MessageReader=S.CancellationToken=S.CancellationTokenSource=S.Emitter=S.Event=S.Disposable=S.ParameterStructures=S.NotificationType9=S.NotificationType8=S.NotificationType7=S.NotificationType6=S.NotificationType5=S.NotificationType4=S.NotificationType3=S.NotificationType2=S.NotificationType1=S.NotificationType0=S.NotificationType=S.ErrorCodes=S.ResponseError=S.RequestType9=S.RequestType8=S.RequestType7=S.RequestType6=S.RequestType5=S.RequestType4=S.RequestType3=S.RequestType2=S.RequestType1=S.RequestType0=S.RequestType=S.RAL=void 0;S.CancellationStrategy=void 0;var pe=ni();Object.defineProperty(S,"RequestType",{enumerable:!0,get:function(){return pe.RequestType}});Object.defineProperty(S,"RequestType0",{enumerable:!0,get:function(){return pe.RequestType0}});Object.defineProperty(S,"RequestType1",{enumerable:!0,get:function(){return pe.RequestType1}});Object.defineProperty(S,"RequestType2",{enumerable:!0,get:function(){return pe.RequestType2}});Object.defineProperty(S,"RequestType3",{enumerable:!0,get:function(){return pe.RequestType3}});Object.defineProperty(S,"RequestType4",{enumerable:!0,get:function(){return pe.RequestType4}});Object.defineProperty(S,"RequestType5",{enumerable:!0,get:function(){return pe.RequestType5}});Object.defineProperty(S,"RequestType6",{enumerable:!0,get:function(){return pe.RequestType6}});Object.defineProperty(S,"RequestType7",{enumerable:!0,get:function(){return pe.RequestType7}});Object.defineProperty(S,"RequestType8",{enumerable:!0,get:function(){return pe.RequestType8}});Object.defineProperty(S,"RequestType9",{enumerable:!0,get:function(){return pe.RequestType9}});Object.defineProperty(S,"ResponseError",{enumerable:!0,get:function(){return pe.ResponseError}});Object.defineProperty(S,"ErrorCodes",{enumerable:!0,get:function(){return pe.ErrorCodes}});Object.defineProperty(S,"NotificationType",{enumerable:!0,get:function(){return pe.NotificationType}});Object.defineProperty(S,"NotificationType0",{enumerable:!0,get:function(){return pe.NotificationType0}});Object.defineProperty(S,"NotificationType1",{enumerable:!0,get:function(){return pe.NotificationType1}});Object.defineProperty(S,"NotificationType2",{enumerable:!0,get:function(){return pe.NotificationType2}});Object.defineProperty(S,"NotificationType3",{enumerable:!0,get:function(){return pe.NotificationType3}});Object.defineProperty(S,"NotificationType4",{enumerable:!0,get:function(){return pe.NotificationType4}});Object.defineProperty(S,"NotificationType5",{enumerable:!0,get:function(){return pe.NotificationType5}});Object.defineProperty(S,"NotificationType6",{enumerable:!0,get:function(){return pe.NotificationType6}});Object.defineProperty(S,"NotificationType7",{enumerable:!0,get:function(){return pe.NotificationType7}});Object.defineProperty(S,"NotificationType8",{enumerable:!0,get:function(){return pe.NotificationType8}});Object.defineProperty(S,"NotificationType9",{enumerable:!0,get:function(){return pe.NotificationType9}});Object.defineProperty(S,"ParameterStructures",{enumerable:!0,get:function(){return pe.ParameterStructures}});var Vl=ei();Object.defineProperty(S,"Disposable",{enumerable:!0,get:function(){return Vl.Disposable}});var bs=or();Object.defineProperty(S,"Event",{enumerable:!0,get:function(){return bs.Event}});Object.defineProperty(S,"Emitter",{enumerable:!0,get:function(){return bs.Emitter}});var xs=ai();Object.defineProperty(S,"CancellationTokenSource",{enumerable:!0,get:function(){return xs.CancellationTokenSource}});Object.defineProperty(S,"CancellationToken",{enumerable:!0,get:function(){return xs.CancellationToken}});var wi=as();Object.defineProperty(S,"MessageReader",{enumerable:!0,get:function(){return wi.MessageReader}});Object.defineProperty(S,"AbstractMessageReader",{enumerable:!0,get:function(){return wi.AbstractMessageReader}});Object.defineProperty(S,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return wi.ReadableStreamMessageReader}});var Ri=hs();Object.defineProperty(S,"MessageWriter",{enumerable:!0,get:function(){return Ri.MessageWriter}});Object.defineProperty(S,"AbstractMessageWriter",{enumerable:!0,get:function(){return Ri.AbstractMessageWriter}});Object.defineProperty(S,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Ri.WriteableStreamMessageWriter}});var ze=_s();Object.defineProperty(S,"ConnectionStrategy",{enumerable:!0,get:function(){return ze.ConnectionStrategy}});Object.defineProperty(S,"ConnectionOptions",{enumerable:!0,get:function(){return ze.ConnectionOptions}});Object.defineProperty(S,"NullLogger",{enumerable:!0,get:function(){return ze.NullLogger}});Object.defineProperty(S,"createMessageConnection",{enumerable:!0,get:function(){return ze.createMessageConnection}});Object.defineProperty(S,"ProgressType",{enumerable:!0,get:function(){return ze.ProgressType}});Object.defineProperty(S,"Trace",{enumerable:!0,get:function(){return ze.Trace}});Object.defineProperty(S,"TraceFormat",{enumerable:!0,get:function(){return ze.TraceFormat}});Object.defineProperty(S,"SetTraceNotification",{enumerable:!0,get:function(){return ze.SetTraceNotification}});Object.defineProperty(S,"LogTraceNotification",{enumerable:!0,get:function(){return ze.LogTraceNotification}});Object.defineProperty(S,"ConnectionErrors",{enumerable:!0,get:function(){return ze.ConnectionErrors}});Object.defineProperty(S,"ConnectionError",{enumerable:!0,get:function(){return ze.ConnectionError}});Object.defineProperty(S,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return ze.CancellationReceiverStrategy}});Object.defineProperty(S,"CancellationSenderStrategy",{enumerable:!0,get:function(){return ze.CancellationSenderStrategy}});Object.defineProperty(S,"CancellationStrategy",{enumerable:!0,get:function(){return ze.CancellationStrategy}});var Yl=qt();S.RAL=Yl.default});var xr=k(Qe=>{"use strict";var Zl=Qe&&Qe.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ed=Qe&&Qe.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Zl(e,r,t)};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.createMessageConnection=Qe.BrowserMessageWriter=Qe.BrowserMessageReader=void 0;var td=jo();td.default.install();var br=_i();ed(_i(),Qe);var Ts=class extends br.AbstractMessageReader{constructor(e){super();this._onData=new br.Emitter,this._messageListener=t=>{this._onData.fire(t.data)},e.addEventListener("error",t=>this.fireError(t)),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}};Qe.BrowserMessageReader=Ts;var Ds=class extends br.AbstractMessageWriter{constructor(e){super();this.context=e,this.errorCount=0,e.addEventListener("error",t=>this.fireError(t))}write(e){try{return this.context.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};Qe.BrowserMessageWriter=Ds;function rd(r,e,t,n){return t===void 0&&(t=br.NullLogger),br.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),br.createMessageConnection(r,e,t,n)}Qe.createMessageConnection=rd});var bi=k((Bm,Ss)=>{"use strict";Ss.exports=xr()});var Es=k((Ps,mn)=>{(function(r){if(typeof mn=="object"&&typeof mn.exports=="object"){var e=r(require,Ps);e!==void 0&&(mn.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],r)})(function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionKind=e.DocumentSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=void 0;var t;(function(d){d.MIN_VALUE=-2147483648,d.MAX_VALUE=2147483647})(t=e.integer||(e.integer={}));var n;(function(d){d.MIN_VALUE=0,d.MAX_VALUE=2147483647})(n=e.uinteger||(e.uinteger={}));var i;(function(d){function m(a,u){return a===Number.MAX_VALUE&&(a=n.MAX_VALUE),u===Number.MAX_VALUE&&(u=n.MAX_VALUE),{line:a,character:u}}d.create=m;function w(a){var u=a;return g.objectLiteral(u)&&g.uinteger(u.line)&&g.uinteger(u.character)}d.is=w})(i=e.Position||(e.Position={}));var s;(function(d){function m(a,u,y,b){if(g.uinteger(a)&&g.uinteger(u)&&g.uinteger(y)&&g.uinteger(b))return{start:i.create(a,u),end:i.create(y,b)};if(i.is(a)&&i.is(u))return{start:a,end:u};throw new Error("Range#create called with invalid arguments["+a+", "+u+", "+y+", "+b+"]")}d.create=m;function w(a){var u=a;return g.objectLiteral(u)&&i.is(u.start)&&i.is(u.end)}d.is=w})(s=e.Range||(e.Range={}));var o;(function(d){function m(a,u){return{uri:a,range:u}}d.create=m;function w(a){var u=a;return g.defined(u)&&s.is(u.range)&&(g.string(u.uri)||g.undefined(u.uri))}d.is=w})(o=e.Location||(e.Location={}));var f;(function(d){function m(a,u,y,b){return{targetUri:a,targetRange:u,targetSelectionRange:y,originSelectionRange:b}}d.create=m;function w(a){var u=a;return g.defined(u)&&s.is(u.targetRange)&&g.string(u.targetUri)&&(s.is(u.targetSelectionRange)||g.undefined(u.targetSelectionRange))&&(s.is(u.originSelectionRange)||g.undefined(u.originSelectionRange))}d.is=w})(f=e.LocationLink||(e.LocationLink={}));var l;(function(d){function m(a,u,y,b){return{red:a,green:u,blue:y,alpha:b}}d.create=m;function w(a){var u=a;return g.numberRange(u.red,0,1)&&g.numberRange(u.green,0,1)&&g.numberRange(u.blue,0,1)&&g.numberRange(u.alpha,0,1)}d.is=w})(l=e.Color||(e.Color={}));var h;(function(d){function m(a,u){return{range:a,color:u}}d.create=m;function w(a){var u=a;return s.is(u.range)&&l.is(u.color)}d.is=w})(h=e.ColorInformation||(e.ColorInformation={}));var _;(function(d){function m(a,u,y){return{label:a,textEdit:u,additionalTextEdits:y}}d.create=m;function w(a){var u=a;return g.string(u.label)&&(g.undefined(u.textEdit)||$.is(u))&&(g.undefined(u.additionalTextEdits)||g.typedArray(u.additionalTextEdits,$.is))}d.is=w})(_=e.ColorPresentation||(e.ColorPresentation={}));var R;(function(d){d.Comment="comment",d.Imports="imports",d.Region="region"})(R=e.FoldingRangeKind||(e.FoldingRangeKind={}));var x;(function(d){function m(a,u,y,b,E){var A={startLine:a,endLine:u};return g.defined(y)&&(A.startCharacter=y),g.defined(b)&&(A.endCharacter=b),g.defined(E)&&(A.kind=E),A}d.create=m;function w(a){var u=a;return g.uinteger(u.startLine)&&g.uinteger(u.startLine)&&(g.undefined(u.startCharacter)||g.uinteger(u.startCharacter))&&(g.undefined(u.endCharacter)||g.uinteger(u.endCharacter))&&(g.undefined(u.kind)||g.string(u.kind))}d.is=w})(x=e.FoldingRange||(e.FoldingRange={}));var P;(function(d){function m(a,u){return{location:a,message:u}}d.create=m;function w(a){var u=a;return g.defined(u)&&o.is(u.location)&&g.string(u.message)}d.is=w})(P=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var q;(function(d){d.Error=1,d.Warning=2,d.Information=3,d.Hint=4})(q=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var O;(function(d){d.Unnecessary=1,d.Deprecated=2})(O=e.DiagnosticTag||(e.DiagnosticTag={}));var X;(function(d){function m(w){var a=w;return a!=null&&g.string(a.href)}d.is=m})(X=e.CodeDescription||(e.CodeDescription={}));var F;(function(d){function m(a,u,y,b,E,A){var J={range:a,message:u};return g.defined(y)&&(J.severity=y),g.defined(b)&&(J.code=b),g.defined(E)&&(J.source=E),g.defined(A)&&(J.relatedInformation=A),J}d.create=m;function w(a){var u,y=a;return g.defined(y)&&s.is(y.range)&&g.string(y.message)&&(g.number(y.severity)||g.undefined(y.severity))&&(g.integer(y.code)||g.string(y.code)||g.undefined(y.code))&&(g.undefined(y.codeDescription)||g.string((u=y.codeDescription)===null||u===void 0?void 0:u.href))&&(g.string(y.source)||g.undefined(y.source))&&(g.undefined(y.relatedInformation)||g.typedArray(y.relatedInformation,P.is))}d.is=w})(F=e.Diagnostic||(e.Diagnostic={}));var I;(function(d){function m(a,u){for(var y=[],b=2;b<arguments.length;b++)y[b-2]=arguments[b];var E={title:a,command:u};return g.defined(y)&&y.length>0&&(E.arguments=y),E}d.create=m;function w(a){var u=a;return g.defined(u)&&g.string(u.title)&&g.string(u.command)}d.is=w})(I=e.Command||(e.Command={}));var $;(function(d){function m(y,b){return{range:y,newText:b}}d.replace=m;function w(y,b){return{range:{start:y,end:y},newText:b}}d.insert=w;function a(y){return{range:y,newText:""}}d.del=a;function u(y){var b=y;return g.objectLiteral(b)&&g.string(b.newText)&&s.is(b.range)}d.is=u})($=e.TextEdit||(e.TextEdit={}));var W;(function(d){function m(a,u,y){var b={label:a};return u!==void 0&&(b.needsConfirmation=u),y!==void 0&&(b.description=y),b}d.create=m;function w(a){var u=a;return u!==void 0&&g.objectLiteral(u)&&g.string(u.label)&&(g.boolean(u.needsConfirmation)||u.needsConfirmation===void 0)&&(g.string(u.description)||u.description===void 0)}d.is=w})(W=e.ChangeAnnotation||(e.ChangeAnnotation={}));var U;(function(d){function m(w){var a=w;return typeof a=="string"}d.is=m})(U=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var V;(function(d){function m(y,b,E){return{range:y,newText:b,annotationId:E}}d.replace=m;function w(y,b,E){return{range:{start:y,end:y},newText:b,annotationId:E}}d.insert=w;function a(y,b){return{range:y,newText:"",annotationId:b}}d.del=a;function u(y){var b=y;return $.is(b)&&(W.is(b.annotationId)||U.is(b.annotationId))}d.is=u})(V=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var se;(function(d){function m(a,u){return{textDocument:a,edits:u}}d.create=m;function w(a){var u=a;return g.defined(u)&&le.is(u.textDocument)&&Array.isArray(u.edits)}d.is=w})(se=e.TextDocumentEdit||(e.TextDocumentEdit={}));var de;(function(d){function m(a,u,y){var b={kind:"create",uri:a};return u!==void 0&&(u.overwrite!==void 0||u.ignoreIfExists!==void 0)&&(b.options=u),y!==void 0&&(b.annotationId=y),b}d.create=m;function w(a){var u=a;return u&&u.kind==="create"&&g.string(u.uri)&&(u.options===void 0||(u.options.overwrite===void 0||g.boolean(u.options.overwrite))&&(u.options.ignoreIfExists===void 0||g.boolean(u.options.ignoreIfExists)))&&(u.annotationId===void 0||U.is(u.annotationId))}d.is=w})(de=e.CreateFile||(e.CreateFile={}));var fe;(function(d){function m(a,u,y,b){var E={kind:"rename",oldUri:a,newUri:u};return y!==void 0&&(y.overwrite!==void 0||y.ignoreIfExists!==void 0)&&(E.options=y),b!==void 0&&(E.annotationId=b),E}d.create=m;function w(a){var u=a;return u&&u.kind==="rename"&&g.string(u.oldUri)&&g.string(u.newUri)&&(u.options===void 0||(u.options.overwrite===void 0||g.boolean(u.options.overwrite))&&(u.options.ignoreIfExists===void 0||g.boolean(u.options.ignoreIfExists)))&&(u.annotationId===void 0||U.is(u.annotationId))}d.is=w})(fe=e.RenameFile||(e.RenameFile={}));var De;(function(d){function m(a,u,y){var b={kind:"delete",uri:a};return u!==void 0&&(u.recursive!==void 0||u.ignoreIfNotExists!==void 0)&&(b.options=u),y!==void 0&&(b.annotationId=y),b}d.create=m;function w(a){var u=a;return u&&u.kind==="delete"&&g.string(u.uri)&&(u.options===void 0||(u.options.recursive===void 0||g.boolean(u.options.recursive))&&(u.options.ignoreIfNotExists===void 0||g.boolean(u.options.ignoreIfNotExists)))&&(u.annotationId===void 0||U.is(u.annotationId))}d.is=w})(De=e.DeleteFile||(e.DeleteFile={}));var Se;(function(d){function m(w){var a=w;return a&&(a.changes!==void 0||a.documentChanges!==void 0)&&(a.documentChanges===void 0||a.documentChanges.every(function(u){return g.string(u.kind)?de.is(u)||fe.is(u)||De.is(u):se.is(u)}))}d.is=m})(Se=e.WorkspaceEdit||(e.WorkspaceEdit={}));var Be=function(){function d(m,w){this.edits=m,this.changeAnnotations=w}return d.prototype.insert=function(m,w,a){var u,y;if(a===void 0?u=$.insert(m,w):U.is(a)?(y=a,u=V.insert(m,w,a)):(this.assertChangeAnnotations(this.changeAnnotations),y=this.changeAnnotations.manage(a),u=V.insert(m,w,y)),this.edits.push(u),y!==void 0)return y},d.prototype.replace=function(m,w,a){var u,y;if(a===void 0?u=$.replace(m,w):U.is(a)?(y=a,u=V.replace(m,w,a)):(this.assertChangeAnnotations(this.changeAnnotations),y=this.changeAnnotations.manage(a),u=V.replace(m,w,y)),this.edits.push(u),y!==void 0)return y},d.prototype.delete=function(m,w){var a,u;if(w===void 0?a=$.del(m):U.is(w)?(u=w,a=V.del(m,w)):(this.assertChangeAnnotations(this.changeAnnotations),u=this.changeAnnotations.manage(w),a=V.del(m,u)),this.edits.push(a),u!==void 0)return u},d.prototype.add=function(m){this.edits.push(m)},d.prototype.all=function(){return this.edits},d.prototype.clear=function(){this.edits.splice(0,this.edits.length)},d.prototype.assertChangeAnnotations=function(m){if(m===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},d}(),Ne=function(){function d(m){this._annotations=m===void 0?Object.create(null):m,this._counter=0,this._size=0}return d.prototype.all=function(){return this._annotations},Object.defineProperty(d.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),d.prototype.manage=function(m,w){var a;if(U.is(m)?a=m:(a=this.nextId(),w=m),this._annotations[a]!==void 0)throw new Error("Id "+a+" is already in use.");if(w===void 0)throw new Error("No annotation provided for id "+a);return this._annotations[a]=w,this._size++,a},d.prototype.nextId=function(){return this._counter++,this._counter.toString()},d}(),Ue=function(){function d(m){var w=this;this._textEditChanges=Object.create(null),m!==void 0?(this._workspaceEdit=m,m.documentChanges?(this._changeAnnotations=new Ne(m.changeAnnotations),m.changeAnnotations=this._changeAnnotations.all(),m.documentChanges.forEach(function(a){if(se.is(a)){var u=new Be(a.edits,w._changeAnnotations);w._textEditChanges[a.textDocument.uri]=u}})):m.changes&&Object.keys(m.changes).forEach(function(a){var u=new Be(m.changes[a]);w._textEditChanges[a]=u})):this._workspaceEdit={}}return Object.defineProperty(d.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),d.prototype.getTextEditChange=function(m){if(le.is(m)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var w={uri:m.uri,version:m.version},a=this._textEditChanges[w.uri];if(!a){var u=[],y={textDocument:w,edits:u};this._workspaceEdit.documentChanges.push(y),a=new Be(u,this._changeAnnotations),this._textEditChanges[w.uri]=a}return a}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var a=this._textEditChanges[m];if(!a){var u=[];this._workspaceEdit.changes[m]=u,a=new Be(u),this._textEditChanges[m]=a}return a}},d.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Ne,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},d.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},d.prototype.createFile=function(m,w,a){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var u;W.is(w)||U.is(w)?u=w:a=w;var y,b;if(u===void 0?y=de.create(m,a):(b=U.is(u)?u:this._changeAnnotations.manage(u),y=de.create(m,a,b)),this._workspaceEdit.documentChanges.push(y),b!==void 0)return b},d.prototype.renameFile=function(m,w,a,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var y;W.is(a)||U.is(a)?y=a:u=a;var b,E;if(y===void 0?b=fe.create(m,w,u):(E=U.is(y)?y:this._changeAnnotations.manage(y),b=fe.create(m,w,u,E)),this._workspaceEdit.documentChanges.push(b),E!==void 0)return E},d.prototype.deleteFile=function(m,w,a){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var u;W.is(w)||U.is(w)?u=w:a=w;var y,b;if(u===void 0?y=De.create(m,a):(b=U.is(u)?u:this._changeAnnotations.manage(u),y=De.create(m,a,b)),this._workspaceEdit.documentChanges.push(y),b!==void 0)return b},d}();e.WorkspaceChange=Ue;var Ae;(function(d){function m(a){return{uri:a}}d.create=m;function w(a){var u=a;return g.defined(u)&&g.string(u.uri)}d.is=w})(Ae=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var Xe;(function(d){function m(a,u){return{uri:a,version:u}}d.create=m;function w(a){var u=a;return g.defined(u)&&g.string(u.uri)&&g.integer(u.version)}d.is=w})(Xe=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var le;(function(d){function m(a,u){return{uri:a,version:u}}d.create=m;function w(a){var u=a;return g.defined(u)&&g.string(u.uri)&&(u.version===null||g.integer(u.version))}d.is=w})(le=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var ut;(function(d){function m(a,u,y,b){return{uri:a,languageId:u,version:y,text:b}}d.create=m;function w(a){var u=a;return g.defined(u)&&g.string(u.uri)&&g.string(u.languageId)&&g.integer(u.version)&&g.string(u.text)}d.is=w})(ut=e.TextDocumentItem||(e.TextDocumentItem={}));var Te;(function(d){d.PlainText="plaintext",d.Markdown="markdown"})(Te=e.MarkupKind||(e.MarkupKind={})),function(d){function m(w){var a=w;return a===d.PlainText||a===d.Markdown}d.is=m}(Te=e.MarkupKind||(e.MarkupKind={}));var Ge;(function(d){function m(w){var a=w;return g.objectLiteral(w)&&Te.is(a.kind)&&g.string(a.value)}d.is=m})(Ge=e.MarkupContent||(e.MarkupContent={}));var Ve;(function(d){d.Text=1,d.Method=2,d.Function=3,d.Constructor=4,d.Field=5,d.Variable=6,d.Class=7,d.Interface=8,d.Module=9,d.Property=10,d.Unit=11,d.Value=12,d.Enum=13,d.Keyword=14,d.Snippet=15,d.Color=16,d.File=17,d.Reference=18,d.Folder=19,d.EnumMember=20,d.Constant=21,d.Struct=22,d.Event=23,d.Operator=24,d.TypeParameter=25})(Ve=e.CompletionItemKind||(e.CompletionItemKind={}));var ct;(function(d){d.PlainText=1,d.Snippet=2})(ct=e.InsertTextFormat||(e.InsertTextFormat={}));var Ht;(function(d){d.Deprecated=1})(Ht=e.CompletionItemTag||(e.CompletionItemTag={}));var Bt;(function(d){function m(a,u,y){return{newText:a,insert:u,replace:y}}d.create=m;function w(a){var u=a;return u&&g.string(u.newText)&&s.is(u.insert)&&s.is(u.replace)}d.is=w})(Bt=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var Dt;(function(d){d.asIs=1,d.adjustIndentation=2})(Dt=e.InsertTextMode||(e.InsertTextMode={}));var St;(function(d){function m(w){return{label:w}}d.create=m})(St=e.CompletionItem||(e.CompletionItem={}));var vt;(function(d){function m(w,a){return{items:w||[],isIncomplete:!!a}}d.create=m})(vt=e.CompletionList||(e.CompletionList={}));var yt;(function(d){function m(a){return a.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}d.fromPlainText=m;function w(a){var u=a;return g.string(u)||g.objectLiteral(u)&&g.string(u.language)&&g.string(u.value)}d.is=w})(yt=e.MarkedString||(e.MarkedString={}));var Pt;(function(d){function m(w){var a=w;return!!a&&g.objectLiteral(a)&&(Ge.is(a.contents)||yt.is(a.contents)||g.typedArray(a.contents,yt.is))&&(w.range===void 0||s.is(w.range))}d.is=m})(Pt=e.Hover||(e.Hover={}));var Ut;(function(d){function m(w,a){return a?{label:w,documentation:a}:{label:w}}d.create=m})(Ut=e.ParameterInformation||(e.ParameterInformation={}));var Zt;(function(d){function m(w,a){for(var u=[],y=2;y<arguments.length;y++)u[y-2]=arguments[y];var b={label:w};return g.defined(a)&&(b.documentation=a),g.defined(u)?b.parameters=u:b.parameters=[],b}d.create=m})(Zt=e.SignatureInformation||(e.SignatureInformation={}));var Ye;(function(d){d.Text=1,d.Read=2,d.Write=3})(Ye=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var Kt;(function(d){function m(w,a){var u={range:w};return g.number(a)&&(u.kind=a),u}d.create=m})(Kt=e.DocumentHighlight||(e.DocumentHighlight={}));var Ze;(function(d){d.File=1,d.Module=2,d.Namespace=3,d.Package=4,d.Class=5,d.Method=6,d.Property=7,d.Field=8,d.Constructor=9,d.Enum=10,d.Interface=11,d.Function=12,d.Variable=13,d.Constant=14,d.String=15,d.Number=16,d.Boolean=17,d.Array=18,d.Object=19,d.Key=20,d.Null=21,d.EnumMember=22,d.Struct=23,d.Event=24,d.Operator=25,d.TypeParameter=26})(Ze=e.SymbolKind||(e.SymbolKind={}));var er;(function(d){d.Deprecated=1})(er=e.SymbolTag||(e.SymbolTag={}));var Ce;(function(d){function m(w,a,u,y,b){var E={name:w,kind:a,location:{uri:y,range:u}};return b&&(E.containerName=b),E}d.create=m})(Ce=e.SymbolInformation||(e.SymbolInformation={}));var Ke;(function(d){function m(a,u,y,b,E,A){var J={name:a,detail:u,kind:y,range:b,selectionRange:E};return A!==void 0&&(J.children=A),J}d.create=m;function w(a){var u=a;return u&&g.string(u.name)&&g.number(u.kind)&&s.is(u.range)&&s.is(u.selectionRange)&&(u.detail===void 0||g.string(u.detail))&&(u.deprecated===void 0||g.boolean(u.deprecated))&&(u.children===void 0||Array.isArray(u.children))&&(u.tags===void 0||Array.isArray(u.tags))}d.is=w})(Ke=e.DocumentSymbol||(e.DocumentSymbol={}));var zt;(function(d){d.Empty="",d.QuickFix="quickfix",d.Refactor="refactor",d.RefactorExtract="refactor.extract",d.RefactorInline="refactor.inline",d.RefactorRewrite="refactor.rewrite",d.Source="source",d.SourceOrganizeImports="source.organizeImports",d.SourceFixAll="source.fixAll"})(zt=e.CodeActionKind||(e.CodeActionKind={}));var tr;(function(d){function m(a,u){var y={diagnostics:a};return u!=null&&(y.only=u),y}d.create=m;function w(a){var u=a;return g.defined(u)&&g.typedArray(u.diagnostics,F.is)&&(u.only===void 0||g.typedArray(u.only,g.string))}d.is=w})(tr=e.CodeActionContext||(e.CodeActionContext={}));var et;(function(d){function m(a,u,y){var b={title:a},E=!0;return typeof u=="string"?(E=!1,b.kind=u):I.is(u)?b.command=u:b.edit=u,E&&y!==void 0&&(b.kind=y),b}d.create=m;function w(a){var u=a;return u&&g.string(u.title)&&(u.diagnostics===void 0||g.typedArray(u.diagnostics,F.is))&&(u.kind===void 0||g.string(u.kind))&&(u.edit!==void 0||u.command!==void 0)&&(u.command===void 0||I.is(u.command))&&(u.isPreferred===void 0||g.boolean(u.isPreferred))&&(u.edit===void 0||Se.is(u.edit))}d.is=w})(et=e.CodeAction||(e.CodeAction={}));var $t;(function(d){function m(a,u){var y={range:a};return g.defined(u)&&(y.data=u),y}d.create=m;function w(a){var u=a;return g.defined(u)&&s.is(u.range)&&(g.undefined(u.command)||I.is(u.command))}d.is=w})($t=e.CodeLens||(e.CodeLens={}));var Et;(function(d){function m(a,u){return{tabSize:a,insertSpaces:u}}d.create=m;function w(a){var u=a;return g.defined(u)&&g.uinteger(u.tabSize)&&g.boolean(u.insertSpaces)}d.is=w})(Et=e.FormattingOptions||(e.FormattingOptions={}));var tt;(function(d){function m(a,u,y){return{range:a,target:u,data:y}}d.create=m;function w(a){var u=a;return g.defined(u)&&s.is(u.range)&&(g.undefined(u.target)||g.string(u.target))}d.is=w})(tt=e.DocumentLink||(e.DocumentLink={}));var kt;(function(d){function m(a,u){return{range:a,parent:u}}d.create=m;function w(a){var u=a;return u!==void 0&&s.is(u.range)&&(u.parent===void 0||d.is(u.parent))}d.is=w})(kt=e.SelectionRange||(e.SelectionRange={})),e.EOL=[`
`,`\r
`,"\r"];var rt;(function(d){function m(y,b,E,A){return new C(y,b,E,A)}d.create=m;function w(y){var b=y;return!!(g.defined(b)&&g.string(b.uri)&&(g.undefined(b.languageId)||g.string(b.languageId))&&g.uinteger(b.lineCount)&&g.func(b.getText)&&g.func(b.positionAt)&&g.func(b.offsetAt))}d.is=w;function a(y,b){for(var E=y.getText(),A=u(b,function(Jt,rr){var un=Jt.range.start.line-rr.range.start.line;return un===0?Jt.range.start.character-rr.range.start.character:un}),J=E.length,ie=A.length-1;ie>=0;ie--){var we=A[ie],Re=y.offsetAt(we.range.start),ee=y.offsetAt(we.range.end);if(ee<=J)E=E.substring(0,Re)+we.newText+E.substring(ee,E.length);else throw new Error("Overlapping edit");J=Re}return E}d.applyEdits=a;function u(y,b){if(y.length<=1)return y;var E=y.length/2|0,A=y.slice(0,E),J=y.slice(E);u(A,b),u(J,b);for(var ie=0,we=0,Re=0;ie<A.length&&we<J.length;){var ee=b(A[ie],J[we]);ee<=0?y[Re++]=A[ie++]:y[Re++]=J[we++]}for(;ie<A.length;)y[Re++]=A[ie++];for(;we<J.length;)y[Re++]=J[we++];return y}})(rt=e.TextDocument||(e.TextDocument={}));var C=function(){function d(m,w,a,u){this._uri=m,this._languageId=w,this._version=a,this._content=u,this._lineOffsets=void 0}return Object.defineProperty(d.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),d.prototype.getText=function(m){if(m){var w=this.offsetAt(m.start),a=this.offsetAt(m.end);return this._content.substring(w,a)}return this._content},d.prototype.update=function(m,w){this._content=m.text,this._version=w,this._lineOffsets=void 0},d.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var m=[],w=this._content,a=!0,u=0;u<w.length;u++){a&&(m.push(u),a=!1);var y=w.charAt(u);a=y==="\r"||y===`
`,y==="\r"&&u+1<w.length&&w.charAt(u+1)===`
`&&u++}a&&w.length>0&&m.push(w.length),this._lineOffsets=m}return this._lineOffsets},d.prototype.positionAt=function(m){m=Math.max(Math.min(m,this._content.length),0);var w=this.getLineOffsets(),a=0,u=w.length;if(u===0)return i.create(0,m);for(;a<u;){var y=Math.floor((a+u)/2);w[y]>m?u=y:a=y+1}var b=a-1;return i.create(b,m-w[b])},d.prototype.offsetAt=function(m){var w=this.getLineOffsets();if(m.line>=w.length)return this._content.length;if(m.line<0)return 0;var a=w[m.line],u=m.line+1<w.length?w[m.line+1]:this._content.length;return Math.max(Math.min(a+m.character,u),a)},Object.defineProperty(d.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),d}(),g;(function(d){var m=Object.prototype.toString;function w(ee){return typeof ee!="undefined"}d.defined=w;function a(ee){return typeof ee=="undefined"}d.undefined=a;function u(ee){return ee===!0||ee===!1}d.boolean=u;function y(ee){return m.call(ee)==="[object String]"}d.string=y;function b(ee){return m.call(ee)==="[object Number]"}d.number=b;function E(ee,Jt,rr){return m.call(ee)==="[object Number]"&&Jt<=ee&&ee<=rr}d.numberRange=E;function A(ee){return m.call(ee)==="[object Number]"&&-2147483648<=ee&&ee<=2147483647}d.integer=A;function J(ee){return m.call(ee)==="[object Number]"&&0<=ee&&ee<=2147483647}d.uinteger=J;function ie(ee){return m.call(ee)==="[object Function]"}d.func=ie;function we(ee){return ee!==null&&typeof ee=="object"}d.objectLiteral=we;function Re(ee,Jt){return Array.isArray(ee)&&ee.every(Jt)}d.typedArray=Re})(g||(g={}))})});var Ee=k(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.ProtocolNotificationType=nt.ProtocolNotificationType0=nt.ProtocolRequestType=nt.ProtocolRequestType0=nt.RegistrationType=void 0;var Tr=xr(),ks=class{constructor(e){this.method=e}};nt.RegistrationType=ks;var qs=class extends Tr.RequestType0{constructor(e){super(e)}};nt.ProtocolRequestType0=qs;var js=class extends Tr.RequestType{constructor(e){super(e,Tr.ParameterStructures.byName)}};nt.ProtocolRequestType=js;var Fs=class extends Tr.NotificationType0{constructor(e){super(e)}};nt.ProtocolNotificationType0=Fs;var Os=class extends Tr.NotificationType{constructor(e){super(e,Tr.ParameterStructures.byName)}};nt.ProtocolNotificationType=Os});var Ns=k(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.objectLiteral=xe.typedArray=xe.stringArray=xe.array=xe.func=xe.error=xe.number=xe.string=xe.boolean=void 0;function nd(r){return r===!0||r===!1}xe.boolean=nd;function Is(r){return typeof r=="string"||r instanceof String}xe.string=Is;function id(r){return typeof r=="number"||r instanceof Number}xe.number=id;function od(r){return r instanceof Error}xe.error=od;function sd(r){return typeof r=="function"}xe.func=sd;function Ls(r){return Array.isArray(r)}xe.array=Ls;function ad(r){return Ls(r)&&r.every(e=>Is(e))}xe.stringArray=ad;function ud(r,e){return Array.isArray(r)&&r.every(e)}xe.typedArray=ud;function cd(r){return r!==null&&typeof r=="object"}xe.objectLiteral=cd});var As=k(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.ImplementationRequest=void 0;var ld=Ee(),dd;(function(r){r.method="textDocument/implementation",r.type=new ld.ProtocolRequestType(r.method)})(dd=Kr.ImplementationRequest||(Kr.ImplementationRequest={}))});var Ms=k(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.TypeDefinitionRequest=void 0;var fd=Ee(),pd;(function(r){r.method="textDocument/typeDefinition",r.type=new fd.ProtocolRequestType(r.method)})(pd=zr.TypeDefinitionRequest||(zr.TypeDefinitionRequest={}))});var Hs=k(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.DidChangeWorkspaceFoldersNotification=Gt.WorkspaceFoldersRequest=void 0;var Ws=Ee(),hd;(function(r){r.type=new Ws.ProtocolRequestType0("workspace/workspaceFolders")})(hd=Gt.WorkspaceFoldersRequest||(Gt.WorkspaceFoldersRequest={}));var gd;(function(r){r.type=new Ws.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(gd=Gt.DidChangeWorkspaceFoldersNotification||(Gt.DidChangeWorkspaceFoldersNotification={}))});var Bs=k($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.ConfigurationRequest=void 0;var md=Ee(),vd;(function(r){r.type=new md.ProtocolRequestType("workspace/configuration")})(vd=$r.ConfigurationRequest||($r.ConfigurationRequest={}))});var Ks=k(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.ColorPresentationRequest=Qt.DocumentColorRequest=void 0;var Us=Ee(),yd;(function(r){r.method="textDocument/documentColor",r.type=new Us.ProtocolRequestType(r.method)})(yd=Qt.DocumentColorRequest||(Qt.DocumentColorRequest={}));var Cd;(function(r){r.type=new Us.ProtocolRequestType("textDocument/colorPresentation")})(Cd=Qt.ColorPresentationRequest||(Qt.ColorPresentationRequest={}))});var zs=k(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.FoldingRangeRequest=Xt.FoldingRangeKind=void 0;var wd=Ee(),Rd;(function(r){r.Comment="comment",r.Imports="imports",r.Region="region"})(Rd=Xt.FoldingRangeKind||(Xt.FoldingRangeKind={}));var _d;(function(r){r.method="textDocument/foldingRange",r.type=new wd.ProtocolRequestType(r.method)})(_d=Xt.FoldingRangeRequest||(Xt.FoldingRangeRequest={}))});var $s=k(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.DeclarationRequest=void 0;var bd=Ee(),xd;(function(r){r.method="textDocument/declaration",r.type=new bd.ProtocolRequestType(r.method)})(xd=Jr.DeclarationRequest||(Jr.DeclarationRequest={}))});var Js=k(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.SelectionRangeRequest=void 0;var Td=Ee(),Dd;(function(r){r.method="textDocument/selectionRange",r.type=new Td.ProtocolRequestType(r.method)})(Dd=Gr.SelectionRangeRequest||(Gr.SelectionRangeRequest={}))});var Qs=k(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.WorkDoneProgressCancelNotification=ft.WorkDoneProgressCreateRequest=ft.WorkDoneProgress=void 0;var Sd=xr(),Gs=Ee(),Pd;(function(r){r.type=new Sd.ProgressType;function e(t){return t===r.type}r.is=e})(Pd=ft.WorkDoneProgress||(ft.WorkDoneProgress={}));var Ed;(function(r){r.type=new Gs.ProtocolRequestType("window/workDoneProgress/create")})(Ed=ft.WorkDoneProgressCreateRequest||(ft.WorkDoneProgressCreateRequest={}));var kd;(function(r){r.type=new Gs.ProtocolNotificationType("window/workDoneProgress/cancel")})(kd=ft.WorkDoneProgressCancelNotification||(ft.WorkDoneProgressCancelNotification={}))});var Xs=k(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.CallHierarchyOutgoingCallsRequest=pt.CallHierarchyIncomingCallsRequest=pt.CallHierarchyPrepareRequest=void 0;var xi=Ee(),qd;(function(r){r.method="textDocument/prepareCallHierarchy",r.type=new xi.ProtocolRequestType(r.method)})(qd=pt.CallHierarchyPrepareRequest||(pt.CallHierarchyPrepareRequest={}));var jd;(function(r){r.method="callHierarchy/incomingCalls",r.type=new xi.ProtocolRequestType(r.method)})(jd=pt.CallHierarchyIncomingCallsRequest||(pt.CallHierarchyIncomingCallsRequest={}));var Fd;(function(r){r.method="callHierarchy/outgoingCalls",r.type=new xi.ProtocolRequestType(r.method)})(Fd=pt.CallHierarchyOutgoingCallsRequest||(pt.CallHierarchyOutgoingCallsRequest={}))});var Vs=k(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.SemanticTokensRefreshRequest=oe.SemanticTokensRangeRequest=oe.SemanticTokensDeltaRequest=oe.SemanticTokensRequest=oe.SemanticTokensRegistrationType=oe.TokenFormat=oe.SemanticTokens=oe.SemanticTokenModifiers=oe.SemanticTokenTypes=void 0;var Qr=Ee(),Od;(function(r){r.namespace="namespace",r.type="type",r.class="class",r.enum="enum",r.interface="interface",r.struct="struct",r.typeParameter="typeParameter",r.parameter="parameter",r.variable="variable",r.property="property",r.enumMember="enumMember",r.event="event",r.function="function",r.method="method",r.macro="macro",r.keyword="keyword",r.modifier="modifier",r.comment="comment",r.string="string",r.number="number",r.regexp="regexp",r.operator="operator"})(Od=oe.SemanticTokenTypes||(oe.SemanticTokenTypes={}));var Id;(function(r){r.declaration="declaration",r.definition="definition",r.readonly="readonly",r.static="static",r.deprecated="deprecated",r.abstract="abstract",r.async="async",r.modification="modification",r.documentation="documentation",r.defaultLibrary="defaultLibrary"})(Id=oe.SemanticTokenModifiers||(oe.SemanticTokenModifiers={}));var Ld;(function(r){function e(t){let n=t;return n!==void 0&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}r.is=e})(Ld=oe.SemanticTokens||(oe.SemanticTokens={}));var Nd;(function(r){r.Relative="relative"})(Nd=oe.TokenFormat||(oe.TokenFormat={}));var Ad;(function(r){r.method="textDocument/semanticTokens",r.type=new Qr.RegistrationType(r.method)})(Ad=oe.SemanticTokensRegistrationType||(oe.SemanticTokensRegistrationType={}));var Md;(function(r){r.method="textDocument/semanticTokens/full",r.type=new Qr.ProtocolRequestType(r.method)})(Md=oe.SemanticTokensRequest||(oe.SemanticTokensRequest={}));var Wd;(function(r){r.method="textDocument/semanticTokens/full/delta",r.type=new Qr.ProtocolRequestType(r.method)})(Wd=oe.SemanticTokensDeltaRequest||(oe.SemanticTokensDeltaRequest={}));var Hd;(function(r){r.method="textDocument/semanticTokens/range",r.type=new Qr.ProtocolRequestType(r.method)})(Hd=oe.SemanticTokensRangeRequest||(oe.SemanticTokensRangeRequest={}));var Bd;(function(r){r.method="workspace/semanticTokens/refresh",r.type=new Qr.ProtocolRequestType0(r.method)})(Bd=oe.SemanticTokensRefreshRequest||(oe.SemanticTokensRefreshRequest={}))});var Ys=k(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.ShowDocumentRequest=void 0;var Ud=Ee(),Kd;(function(r){r.method="window/showDocument",r.type=new Ud.ProtocolRequestType(r.method)})(Kd=Xr.ShowDocumentRequest||(Xr.ShowDocumentRequest={}))});var Zs=k(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.LinkedEditingRangeRequest=void 0;var zd=Ee(),$d;(function(r){r.method="textDocument/linkedEditingRange",r.type=new zd.ProtocolRequestType(r.method)})($d=Vr.LinkedEditingRangeRequest||(Vr.LinkedEditingRangeRequest={}))});var ea=k(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.WillDeleteFilesRequest=me.DidDeleteFilesNotification=me.DidRenameFilesNotification=me.WillRenameFilesRequest=me.DidCreateFilesNotification=me.WillCreateFilesRequest=me.FileOperationPatternKind=void 0;var Dr=Ee(),Jd;(function(r){r.file="file",r.folder="folder"})(Jd=me.FileOperationPatternKind||(me.FileOperationPatternKind={}));var Gd;(function(r){r.method="workspace/willCreateFiles",r.type=new Dr.ProtocolRequestType(r.method)})(Gd=me.WillCreateFilesRequest||(me.WillCreateFilesRequest={}));var Qd;(function(r){r.method="workspace/didCreateFiles",r.type=new Dr.ProtocolNotificationType(r.method)})(Qd=me.DidCreateFilesNotification||(me.DidCreateFilesNotification={}));var Xd;(function(r){r.method="workspace/willRenameFiles",r.type=new Dr.ProtocolRequestType(r.method)})(Xd=me.WillRenameFilesRequest||(me.WillRenameFilesRequest={}));var Vd;(function(r){r.method="workspace/didRenameFiles",r.type=new Dr.ProtocolNotificationType(r.method)})(Vd=me.DidRenameFilesNotification||(me.DidRenameFilesNotification={}));var Yd;(function(r){r.method="workspace/didDeleteFiles",r.type=new Dr.ProtocolNotificationType(r.method)})(Yd=me.DidDeleteFilesNotification||(me.DidDeleteFilesNotification={}));var Zd;(function(r){r.method="workspace/willDeleteFiles",r.type=new Dr.ProtocolRequestType(r.method)})(Zd=me.WillDeleteFilesRequest||(me.WillDeleteFilesRequest={}))});var ta=k(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.MonikerRequest=ht.MonikerKind=ht.UniquenessLevel=void 0;var ef=Ee(),tf;(function(r){r.document="document",r.project="project",r.group="group",r.scheme="scheme",r.global="global"})(tf=ht.UniquenessLevel||(ht.UniquenessLevel={}));var rf;(function(r){r.import="import",r.export="export",r.local="local"})(rf=ht.MonikerKind||(ht.MonikerKind={}));var nf;(function(r){r.method="textDocument/moniker",r.type=new ef.ProtocolRequestType(r.method)})(nf=ht.MonikerRequest||(ht.MonikerRequest={}))});var sa=k(p=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});p.DocumentLinkRequest=p.CodeLensRefreshRequest=p.CodeLensResolveRequest=p.CodeLensRequest=p.WorkspaceSymbolRequest=p.CodeActionResolveRequest=p.CodeActionRequest=p.DocumentSymbolRequest=p.DocumentHighlightRequest=p.ReferencesRequest=p.DefinitionRequest=p.SignatureHelpRequest=p.SignatureHelpTriggerKind=p.HoverRequest=p.CompletionResolveRequest=p.CompletionRequest=p.CompletionTriggerKind=p.PublishDiagnosticsNotification=p.WatchKind=p.FileChangeType=p.DidChangeWatchedFilesNotification=p.WillSaveTextDocumentWaitUntilRequest=p.WillSaveTextDocumentNotification=p.TextDocumentSaveReason=p.DidSaveTextDocumentNotification=p.DidCloseTextDocumentNotification=p.DidChangeTextDocumentNotification=p.TextDocumentContentChangeEvent=p.DidOpenTextDocumentNotification=p.TextDocumentSyncKind=p.TelemetryEventNotification=p.LogMessageNotification=p.ShowMessageRequest=p.ShowMessageNotification=p.MessageType=p.DidChangeConfigurationNotification=p.ExitNotification=p.ShutdownRequest=p.InitializedNotification=p.InitializeError=p.InitializeRequest=p.WorkDoneProgressOptions=p.TextDocumentRegistrationOptions=p.StaticRegistrationOptions=p.FailureHandlingKind=p.ResourceOperationKind=p.UnregistrationRequest=p.RegistrationRequest=p.DocumentSelector=p.DocumentFilter=void 0;p.MonikerRequest=p.MonikerKind=p.UniquenessLevel=p.WillDeleteFilesRequest=p.DidDeleteFilesNotification=p.WillRenameFilesRequest=p.DidRenameFilesNotification=p.WillCreateFilesRequest=p.DidCreateFilesNotification=p.FileOperationPatternKind=p.LinkedEditingRangeRequest=p.ShowDocumentRequest=p.SemanticTokensRegistrationType=p.SemanticTokensRefreshRequest=p.SemanticTokensRangeRequest=p.SemanticTokensDeltaRequest=p.SemanticTokensRequest=p.TokenFormat=p.SemanticTokens=p.SemanticTokenModifiers=p.SemanticTokenTypes=p.CallHierarchyPrepareRequest=p.CallHierarchyOutgoingCallsRequest=p.CallHierarchyIncomingCallsRequest=p.WorkDoneProgressCancelNotification=p.WorkDoneProgressCreateRequest=p.WorkDoneProgress=p.SelectionRangeRequest=p.DeclarationRequest=p.FoldingRangeRequest=p.ColorPresentationRequest=p.DocumentColorRequest=p.ConfigurationRequest=p.DidChangeWorkspaceFoldersNotification=p.WorkspaceFoldersRequest=p.TypeDefinitionRequest=p.ImplementationRequest=p.ApplyWorkspaceEditRequest=p.ExecuteCommandRequest=p.PrepareRenameRequest=p.RenameRequest=p.PrepareSupportDefaultBehavior=p.DocumentOnTypeFormattingRequest=p.DocumentRangeFormattingRequest=p.DocumentFormattingRequest=p.DocumentLinkResolveRequest=void 0;var Vt=Ns(),G=Ee(),of=As();Object.defineProperty(p,"ImplementationRequest",{enumerable:!0,get:function(){return of.ImplementationRequest}});var sf=Ms();Object.defineProperty(p,"TypeDefinitionRequest",{enumerable:!0,get:function(){return sf.TypeDefinitionRequest}});var ra=Hs();Object.defineProperty(p,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return ra.WorkspaceFoldersRequest}});Object.defineProperty(p,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return ra.DidChangeWorkspaceFoldersNotification}});var af=Bs();Object.defineProperty(p,"ConfigurationRequest",{enumerable:!0,get:function(){return af.ConfigurationRequest}});var na=Ks();Object.defineProperty(p,"DocumentColorRequest",{enumerable:!0,get:function(){return na.DocumentColorRequest}});Object.defineProperty(p,"ColorPresentationRequest",{enumerable:!0,get:function(){return na.ColorPresentationRequest}});var uf=zs();Object.defineProperty(p,"FoldingRangeRequest",{enumerable:!0,get:function(){return uf.FoldingRangeRequest}});var cf=$s();Object.defineProperty(p,"DeclarationRequest",{enumerable:!0,get:function(){return cf.DeclarationRequest}});var lf=Js();Object.defineProperty(p,"SelectionRangeRequest",{enumerable:!0,get:function(){return lf.SelectionRangeRequest}});var Ti=Qs();Object.defineProperty(p,"WorkDoneProgress",{enumerable:!0,get:function(){return Ti.WorkDoneProgress}});Object.defineProperty(p,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Ti.WorkDoneProgressCreateRequest}});Object.defineProperty(p,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Ti.WorkDoneProgressCancelNotification}});var Di=Xs();Object.defineProperty(p,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Di.CallHierarchyIncomingCallsRequest}});Object.defineProperty(p,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Di.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(p,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Di.CallHierarchyPrepareRequest}});var It=Vs();Object.defineProperty(p,"SemanticTokenTypes",{enumerable:!0,get:function(){return It.SemanticTokenTypes}});Object.defineProperty(p,"SemanticTokenModifiers",{enumerable:!0,get:function(){return It.SemanticTokenModifiers}});Object.defineProperty(p,"SemanticTokens",{enumerable:!0,get:function(){return It.SemanticTokens}});Object.defineProperty(p,"TokenFormat",{enumerable:!0,get:function(){return It.TokenFormat}});Object.defineProperty(p,"SemanticTokensRequest",{enumerable:!0,get:function(){return It.SemanticTokensRequest}});Object.defineProperty(p,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return It.SemanticTokensDeltaRequest}});Object.defineProperty(p,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return It.SemanticTokensRangeRequest}});Object.defineProperty(p,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return It.SemanticTokensRefreshRequest}});Object.defineProperty(p,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return It.SemanticTokensRegistrationType}});var df=Ys();Object.defineProperty(p,"ShowDocumentRequest",{enumerable:!0,get:function(){return df.ShowDocumentRequest}});var ff=Zs();Object.defineProperty(p,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return ff.LinkedEditingRangeRequest}});var cr=ea();Object.defineProperty(p,"FileOperationPatternKind",{enumerable:!0,get:function(){return cr.FileOperationPatternKind}});Object.defineProperty(p,"DidCreateFilesNotification",{enumerable:!0,get:function(){return cr.DidCreateFilesNotification}});Object.defineProperty(p,"WillCreateFilesRequest",{enumerable:!0,get:function(){return cr.WillCreateFilesRequest}});Object.defineProperty(p,"DidRenameFilesNotification",{enumerable:!0,get:function(){return cr.DidRenameFilesNotification}});Object.defineProperty(p,"WillRenameFilesRequest",{enumerable:!0,get:function(){return cr.WillRenameFilesRequest}});Object.defineProperty(p,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return cr.DidDeleteFilesNotification}});Object.defineProperty(p,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return cr.WillDeleteFilesRequest}});var Si=ta();Object.defineProperty(p,"UniquenessLevel",{enumerable:!0,get:function(){return Si.UniquenessLevel}});Object.defineProperty(p,"MonikerKind",{enumerable:!0,get:function(){return Si.MonikerKind}});Object.defineProperty(p,"MonikerRequest",{enumerable:!0,get:function(){return Si.MonikerRequest}});var ia;(function(r){function e(t){let n=t;return Vt.string(n.language)||Vt.string(n.scheme)||Vt.string(n.pattern)}r.is=e})(ia=p.DocumentFilter||(p.DocumentFilter={}));var oa;(function(r){function e(t){if(!Array.isArray(t))return!1;for(let n of t)if(!Vt.string(n)&&!ia.is(n))return!1;return!0}r.is=e})(oa=p.DocumentSelector||(p.DocumentSelector={}));var pf;(function(r){r.type=new G.ProtocolRequestType("client/registerCapability")})(pf=p.RegistrationRequest||(p.RegistrationRequest={}));var hf;(function(r){r.type=new G.ProtocolRequestType("client/unregisterCapability")})(hf=p.UnregistrationRequest||(p.UnregistrationRequest={}));var gf;(function(r){r.Create="create",r.Rename="rename",r.Delete="delete"})(gf=p.ResourceOperationKind||(p.ResourceOperationKind={}));var mf;(function(r){r.Abort="abort",r.Transactional="transactional",r.TextOnlyTransactional="textOnlyTransactional",r.Undo="undo"})(mf=p.FailureHandlingKind||(p.FailureHandlingKind={}));var vf;(function(r){function e(t){let n=t;return n&&Vt.string(n.id)&&n.id.length>0}r.hasId=e})(vf=p.StaticRegistrationOptions||(p.StaticRegistrationOptions={}));var yf;(function(r){function e(t){let n=t;return n&&(n.documentSelector===null||oa.is(n.documentSelector))}r.is=e})(yf=p.TextDocumentRegistrationOptions||(p.TextDocumentRegistrationOptions={}));var Cf;(function(r){function e(n){let i=n;return Vt.objectLiteral(i)&&(i.workDoneProgress===void 0||Vt.boolean(i.workDoneProgress))}r.is=e;function t(n){let i=n;return i&&Vt.boolean(i.workDoneProgress)}r.hasWorkDoneProgress=t})(Cf=p.WorkDoneProgressOptions||(p.WorkDoneProgressOptions={}));var wf;(function(r){r.type=new G.ProtocolRequestType("initialize")})(wf=p.InitializeRequest||(p.InitializeRequest={}));var Rf;(function(r){r.unknownProtocolVersion=1})(Rf=p.InitializeError||(p.InitializeError={}));var _f;(function(r){r.type=new G.ProtocolNotificationType("initialized")})(_f=p.InitializedNotification||(p.InitializedNotification={}));var bf;(function(r){r.type=new G.ProtocolRequestType0("shutdown")})(bf=p.ShutdownRequest||(p.ShutdownRequest={}));var xf;(function(r){r.type=new G.ProtocolNotificationType0("exit")})(xf=p.ExitNotification||(p.ExitNotification={}));var Tf;(function(r){r.type=new G.ProtocolNotificationType("workspace/didChangeConfiguration")})(Tf=p.DidChangeConfigurationNotification||(p.DidChangeConfigurationNotification={}));var Df;(function(r){r.Error=1,r.Warning=2,r.Info=3,r.Log=4})(Df=p.MessageType||(p.MessageType={}));var Sf;(function(r){r.type=new G.ProtocolNotificationType("window/showMessage")})(Sf=p.ShowMessageNotification||(p.ShowMessageNotification={}));var Pf;(function(r){r.type=new G.ProtocolRequestType("window/showMessageRequest")})(Pf=p.ShowMessageRequest||(p.ShowMessageRequest={}));var Ef;(function(r){r.type=new G.ProtocolNotificationType("window/logMessage")})(Ef=p.LogMessageNotification||(p.LogMessageNotification={}));var kf;(function(r){r.type=new G.ProtocolNotificationType("telemetry/event")})(kf=p.TelemetryEventNotification||(p.TelemetryEventNotification={}));var qf;(function(r){r.None=0,r.Full=1,r.Incremental=2})(qf=p.TextDocumentSyncKind||(p.TextDocumentSyncKind={}));var jf;(function(r){r.method="textDocument/didOpen",r.type=new G.ProtocolNotificationType(r.method)})(jf=p.DidOpenTextDocumentNotification||(p.DidOpenTextDocumentNotification={}));var Ff;(function(r){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}r.isIncremental=e;function t(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}r.isFull=t})(Ff=p.TextDocumentContentChangeEvent||(p.TextDocumentContentChangeEvent={}));var Of;(function(r){r.method="textDocument/didChange",r.type=new G.ProtocolNotificationType(r.method)})(Of=p.DidChangeTextDocumentNotification||(p.DidChangeTextDocumentNotification={}));var If;(function(r){r.method="textDocument/didClose",r.type=new G.ProtocolNotificationType(r.method)})(If=p.DidCloseTextDocumentNotification||(p.DidCloseTextDocumentNotification={}));var Lf;(function(r){r.method="textDocument/didSave",r.type=new G.ProtocolNotificationType(r.method)})(Lf=p.DidSaveTextDocumentNotification||(p.DidSaveTextDocumentNotification={}));var Nf;(function(r){r.Manual=1,r.AfterDelay=2,r.FocusOut=3})(Nf=p.TextDocumentSaveReason||(p.TextDocumentSaveReason={}));var Af;(function(r){r.method="textDocument/willSave",r.type=new G.ProtocolNotificationType(r.method)})(Af=p.WillSaveTextDocumentNotification||(p.WillSaveTextDocumentNotification={}));var Mf;(function(r){r.method="textDocument/willSaveWaitUntil",r.type=new G.ProtocolRequestType(r.method)})(Mf=p.WillSaveTextDocumentWaitUntilRequest||(p.WillSaveTextDocumentWaitUntilRequest={}));var Wf;(function(r){r.type=new G.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(Wf=p.DidChangeWatchedFilesNotification||(p.DidChangeWatchedFilesNotification={}));var Hf;(function(r){r.Created=1,r.Changed=2,r.Deleted=3})(Hf=p.FileChangeType||(p.FileChangeType={}));var Bf;(function(r){r.Create=1,r.Change=2,r.Delete=4})(Bf=p.WatchKind||(p.WatchKind={}));var Uf;(function(r){r.type=new G.ProtocolNotificationType("textDocument/publishDiagnostics")})(Uf=p.PublishDiagnosticsNotification||(p.PublishDiagnosticsNotification={}));var Kf;(function(r){r.Invoked=1,r.TriggerCharacter=2,r.TriggerForIncompleteCompletions=3})(Kf=p.CompletionTriggerKind||(p.CompletionTriggerKind={}));var zf;(function(r){r.method="textDocument/completion",r.type=new G.ProtocolRequestType(r.method)})(zf=p.CompletionRequest||(p.CompletionRequest={}));var $f;(function(r){r.method="completionItem/resolve",r.type=new G.ProtocolRequestType(r.method)})($f=p.CompletionResolveRequest||(p.CompletionResolveRequest={}));var Jf;(function(r){r.method="textDocument/hover",r.type=new G.ProtocolRequestType(r.method)})(Jf=p.HoverRequest||(p.HoverRequest={}));var Gf;(function(r){r.Invoked=1,r.TriggerCharacter=2,r.ContentChange=3})(Gf=p.SignatureHelpTriggerKind||(p.SignatureHelpTriggerKind={}));var Qf;(function(r){r.method="textDocument/signatureHelp",r.type=new G.ProtocolRequestType(r.method)})(Qf=p.SignatureHelpRequest||(p.SignatureHelpRequest={}));var Xf;(function(r){r.method="textDocument/definition",r.type=new G.ProtocolRequestType(r.method)})(Xf=p.DefinitionRequest||(p.DefinitionRequest={}));var Vf;(function(r){r.method="textDocument/references",r.type=new G.ProtocolRequestType(r.method)})(Vf=p.ReferencesRequest||(p.ReferencesRequest={}));var Yf;(function(r){r.method="textDocument/documentHighlight",r.type=new G.ProtocolRequestType(r.method)})(Yf=p.DocumentHighlightRequest||(p.DocumentHighlightRequest={}));var Zf;(function(r){r.method="textDocument/documentSymbol",r.type=new G.ProtocolRequestType(r.method)})(Zf=p.DocumentSymbolRequest||(p.DocumentSymbolRequest={}));var ep;(function(r){r.method="textDocument/codeAction",r.type=new G.ProtocolRequestType(r.method)})(ep=p.CodeActionRequest||(p.CodeActionRequest={}));var tp;(function(r){r.method="codeAction/resolve",r.type=new G.ProtocolRequestType(r.method)})(tp=p.CodeActionResolveRequest||(p.CodeActionResolveRequest={}));var rp;(function(r){r.method="workspace/symbol",r.type=new G.ProtocolRequestType(r.method)})(rp=p.WorkspaceSymbolRequest||(p.WorkspaceSymbolRequest={}));var np;(function(r){r.method="textDocument/codeLens",r.type=new G.ProtocolRequestType(r.method)})(np=p.CodeLensRequest||(p.CodeLensRequest={}));var ip;(function(r){r.method="codeLens/resolve",r.type=new G.ProtocolRequestType(r.method)})(ip=p.CodeLensResolveRequest||(p.CodeLensResolveRequest={}));var op;(function(r){r.method="workspace/codeLens/refresh",r.type=new G.ProtocolRequestType0(r.method)})(op=p.CodeLensRefreshRequest||(p.CodeLensRefreshRequest={}));var sp;(function(r){r.method="textDocument/documentLink",r.type=new G.ProtocolRequestType(r.method)})(sp=p.DocumentLinkRequest||(p.DocumentLinkRequest={}));var ap;(function(r){r.method="documentLink/resolve",r.type=new G.ProtocolRequestType(r.method)})(ap=p.DocumentLinkResolveRequest||(p.DocumentLinkResolveRequest={}));var up;(function(r){r.method="textDocument/formatting",r.type=new G.ProtocolRequestType(r.method)})(up=p.DocumentFormattingRequest||(p.DocumentFormattingRequest={}));var cp;(function(r){r.method="textDocument/rangeFormatting",r.type=new G.ProtocolRequestType(r.method)})(cp=p.DocumentRangeFormattingRequest||(p.DocumentRangeFormattingRequest={}));var lp;(function(r){r.method="textDocument/onTypeFormatting",r.type=new G.ProtocolRequestType(r.method)})(lp=p.DocumentOnTypeFormattingRequest||(p.DocumentOnTypeFormattingRequest={}));var dp;(function(r){r.Identifier=1})(dp=p.PrepareSupportDefaultBehavior||(p.PrepareSupportDefaultBehavior={}));var fp;(function(r){r.method="textDocument/rename",r.type=new G.ProtocolRequestType(r.method)})(fp=p.RenameRequest||(p.RenameRequest={}));var pp;(function(r){r.method="textDocument/prepareRename",r.type=new G.ProtocolRequestType(r.method)})(pp=p.PrepareRenameRequest||(p.PrepareRenameRequest={}));var hp;(function(r){r.type=new G.ProtocolRequestType("workspace/executeCommand")})(hp=p.ExecuteCommandRequest||(p.ExecuteCommandRequest={}));var gp;(function(r){r.type=new G.ProtocolRequestType("workspace/applyEdit")})(gp=p.ApplyWorkspaceEditRequest||(p.ApplyWorkspaceEditRequest={}))});var ua=k(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.createProtocolConnection=void 0;var aa=xr();function mp(r,e,t,n){return aa.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),aa.createMessageConnection(r,e,t,n)}vn.createProtocolConnection=mp});var ca=k(He=>{"use strict";var vp=He&&He.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),yn=He&&He.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&vp(e,r,t)};Object.defineProperty(He,"__esModule",{value:!0});He.LSPErrorCodes=He.createProtocolConnection=void 0;yn(xr(),He);yn(Es(),He);yn(Ee(),He);yn(sa(),He);var yp=ua();Object.defineProperty(He,"createProtocolConnection",{enumerable:!0,get:function(){return yp.createProtocolConnection}});var Cp;(function(r){r.lspReservedErrorRangeStart=-32899,r.ContentModified=-32801,r.RequestCancelled=-32800,r.lspReservedErrorRangeEnd=-32800})(Cp=He.LSPErrorCodes||(He.LSPErrorCodes={}))});var ve=k(Ct=>{"use strict";var wp=Ct&&Ct.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),la=Ct&&Ct.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&wp(e,r,t)};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.createProtocolConnection=void 0;var Rp=bi();la(bi(),Ct);la(ca(),Ct);function _p(r,e,t,n){return Rp.createMessageConnection(r,e,t,n)}Ct.createProtocolConnection=_p});var Ei=k(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.toJSONObject=Pr.ConfigurationFeature=void 0;var Pi=require("vscode"),bp=ve(),da=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(bp.ConfigurationRequest.type,(t,n)=>{let i=o=>{let f=[];for(let l of o.items){let h=l.scopeUri!==void 0&&l.scopeUri!==null?this._client.protocol2CodeConverter.asUri(l.scopeUri):void 0;f.push(this.getConfiguration(h,l.section!==null?l.section:void 0))}return f},s=e.clientOptions.middleware.workspace;return s&&s.configuration?s.configuration(t,n,i):i(t,n)})}getConfiguration(e,t){let n=null;if(t){let i=t.lastIndexOf(".");if(i===-1)n=Sr(Pi.workspace.getConfiguration(void 0,e).get(t));else{let s=Pi.workspace.getConfiguration(t.substr(0,i),e);s&&(n=Sr(s.get(t.substr(i+1))))}}else{let i=Pi.workspace.getConfiguration(void 0,e);n={};for(let s of Object.keys(i))i.has(s)&&(n[s]=Sr(i.get(s)))}return n===void 0&&(n=null),n}dispose(){}};Pr.ConfigurationFeature=da;function Sr(r){if(r){if(Array.isArray(r))return r.map(Sr);if(typeof r=="object"){let e=Object.create(null);for(let t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=Sr(r[t]));return e}}return r}Pr.toJSONObject=Sr});var lr=k(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.asPromise=ye.thenable=ye.typedArray=ye.stringArray=ye.array=ye.func=ye.error=ye.number=ye.string=ye.boolean=void 0;function xp(r){return r===!0||r===!1}ye.boolean=xp;function fa(r){return typeof r=="string"||r instanceof String}ye.string=fa;function Tp(r){return typeof r=="number"||r instanceof Number}ye.number=Tp;function Dp(r){return r instanceof Error}ye.error=Dp;function pa(r){return typeof r=="function"}ye.func=pa;function ha(r){return Array.isArray(r)}ye.array=ha;function Sp(r){return ha(r)&&r.every(e=>fa(e))}ye.stringArray=Sp;function Pp(r,e){return Array.isArray(r)&&r.every(e)}ye.typedArray=Pp;function ga(r){return r&&pa(r.then)}ye.thenable=ga;function Ep(r){return r instanceof Promise?r:ga(r)?new Promise((e,t)=>{r.then(n=>e(n),n=>t(n))}):Promise.resolve(r)}ye.asPromise=Ep});var qi=k(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});var kp=require("vscode"),ma=class extends kp.CompletionItem{constructor(e){super(e)}};ki.default=ma});var Fi=k(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});var qp=require("vscode"),va=class extends qp.CodeLens{constructor(e){super(e)}};ji.default=va});var Ii=k(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});var jp=require("vscode"),ya=class extends jp.DocumentLink{constructor(e,t){super(e,t)}};Oi.default=ya});var Ni=k(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});var Fp=require("vscode"),Ca=class extends Fp.CodeAction{constructor(e,t){super(e);this.data=t}};Li.default=Ca});var Mi=k(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.ProtocolDiagnostic=dr.DiagnosticCode=void 0;var Op=require("vscode"),Ai=lr(),Ip;(function(r){function e(t){let n=t;return n!=null&&(Ai.number(n.value)||Ai.string(n.value))&&Ai.string(n.target)}r.is=e})(Ip=dr.DiagnosticCode||(dr.DiagnosticCode={}));var wa=class extends Op.Diagnostic{constructor(e,t,n,i){super(e,t,n);this.data=i,this.hasDiagnosticCode=!1}};dr.ProtocolDiagnostic=wa});var Hi=k(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});var Lp=require("vscode"),Ra=class extends Lp.CallHierarchyItem{constructor(e,t,n,i,s,o,f){super(e,t,n,i,s,o);f!==void 0&&(this.data=f)}};Wi.default=Ra});var ba=k(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.createConverter=void 0;var ke=require("vscode"),ne=ve(),Yr=lr(),Np=qi(),Ap=Fi(),Mp=Ii(),Wp=Ni(),_a=Mi(),Hp=Hi(),Bp=ve(),Bi;(function(r){function e(t){let n=t;return n&&!!n.inserting&&!!n.replacing}r.is=e})(Bi||(Bi={}));function Up(r){let t=r||(a=>a.toString());function n(a){return t(a)}function i(a){return{uri:t(a.uri)}}function s(a){return{uri:t(a.uri),version:a.version}}function o(a){return{textDocument:{uri:t(a.uri),languageId:a.languageId,version:a.version,text:a.getText()}}}function f(a){let u=a;return!!u.document&&!!u.contentChanges}function l(a){let u=a;return!!u.uri&&!!u.version}function h(a){if(l(a))return{textDocument:{uri:t(a.uri),version:a.version},contentChanges:[{text:a.getText()}]};if(f(a)){let u=a.document;return{textDocument:{uri:t(u.uri),version:u.version},contentChanges:a.contentChanges.map(b=>{let E=b.range;return{range:{start:{line:E.start.line,character:E.start.character},end:{line:E.end.line,character:E.end.character}},rangeLength:b.rangeLength,text:b.text}})}}else throw Error("Unsupported text document change parameter")}function _(a){return{textDocument:i(a)}}function R(a,u=!1){let y={textDocument:i(a)};return u&&(y.text=a.getText()),y}function x(a){switch(a){case ke.TextDocumentSaveReason.Manual:return ne.TextDocumentSaveReason.Manual;case ke.TextDocumentSaveReason.AfterDelay:return ne.TextDocumentSaveReason.AfterDelay;case ke.TextDocumentSaveReason.FocusOut:return ne.TextDocumentSaveReason.FocusOut}return ne.TextDocumentSaveReason.Manual}function P(a){return{textDocument:i(a.document),reason:x(a.reason)}}function q(a){return{files:a.files.map(u=>({uri:t(u)}))}}function O(a){return{files:a.files.map(u=>({oldUri:t(u.oldUri),newUri:t(u.newUri)}))}}function X(a){return{files:a.files.map(u=>({uri:t(u)}))}}function F(a){return{files:a.files.map(u=>({uri:t(u)}))}}function I(a){return{files:a.files.map(u=>({oldUri:t(u.oldUri),newUri:t(u.newUri)}))}}function $(a){return{files:a.files.map(u=>({uri:t(u)}))}}function W(a,u){return{textDocument:i(a),position:Ue(u)}}function U(a){switch(a){case ke.CompletionTriggerKind.TriggerCharacter:return ne.CompletionTriggerKind.TriggerCharacter;case ke.CompletionTriggerKind.TriggerForIncompleteCompletions:return ne.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return ne.CompletionTriggerKind.Invoked}}function V(a,u,y){return{textDocument:i(a),position:Ue(u),context:{triggerKind:U(y.triggerKind),triggerCharacter:y.triggerCharacter}}}function se(a){switch(a){case ke.SignatureHelpTriggerKind.Invoke:return ne.SignatureHelpTriggerKind.Invoked;case ke.SignatureHelpTriggerKind.TriggerCharacter:return ne.SignatureHelpTriggerKind.TriggerCharacter;case ke.SignatureHelpTriggerKind.ContentChange:return ne.SignatureHelpTriggerKind.ContentChange}}function de(a){return{label:a.label}}function fe(a){return a.map(de)}function De(a){return{label:a.label,parameters:fe(a.parameters)}}function Se(a){return a.map(De)}function Be(a){return a===void 0?a:{signatures:Se(a.signatures),activeSignature:a.activeSignature,activeParameter:a.activeParameter}}function Ne(a,u,y){return{textDocument:i(a),position:Ue(u),context:{isRetrigger:y.isRetrigger,triggerCharacter:y.triggerCharacter,triggerKind:se(y.triggerKind),activeSignatureHelp:Be(y.activeSignatureHelp)}}}function Ue(a){return{line:a.line,character:a.character}}function Ae(a){return a==null?a:{line:a.line,character:a.character}}function Xe(a){let u=[];for(let y of a)u.push(Ae(y));return u}function le(a){return a==null?a:{start:Ae(a.start),end:Ae(a.end)}}function ut(a){return a==null?a:ne.Location.create(n(a.uri),le(a.range))}function Te(a){switch(a){case ke.DiagnosticSeverity.Error:return ne.DiagnosticSeverity.Error;case ke.DiagnosticSeverity.Warning:return ne.DiagnosticSeverity.Warning;case ke.DiagnosticSeverity.Information:return ne.DiagnosticSeverity.Information;case ke.DiagnosticSeverity.Hint:return ne.DiagnosticSeverity.Hint}}function Ge(a){if(!a)return;let u=[];for(let y of a){let b=Ve(y);b!==void 0&&u.push(b)}return u.length>0?u:void 0}function Ve(a){switch(a){case ke.DiagnosticTag.Unnecessary:return ne.DiagnosticTag.Unnecessary;case ke.DiagnosticTag.Deprecated:return ne.DiagnosticTag.Deprecated;default:return}}function ct(a){return{message:a.message,location:ut(a.location)}}function Ht(a){return a.map(ct)}function Bt(a){if(a!=null)return Yr.number(a)||Yr.string(a)?a:{value:a.value,target:n(a.target)}}function Dt(a){let u=ne.Diagnostic.create(le(a.range),a.message),y=a instanceof _a.ProtocolDiagnostic?a:void 0;y!==void 0&&y.data!==void 0&&(u.data=y.data);let b=Bt(a.code);return _a.DiagnosticCode.is(b)?y!==void 0&&y.hasDiagnosticCode?u.code=b:(u.code=b.value,u.codeDescription={href:b.target}):u.code=b,Yr.number(a.severity)&&(u.severity=Te(a.severity)),Array.isArray(a.tags)&&(u.tags=Ge(a.tags)),a.relatedInformation&&(u.relatedInformation=Ht(a.relatedInformation)),a.source&&(u.source=a.source),u}function St(a){return a==null?a:a.map(Dt)}function vt(a,u){switch(a){case"$string":return u;case ne.MarkupKind.PlainText:return{kind:a,value:u};case ne.MarkupKind.Markdown:return{kind:a,value:u.value};default:return`Unsupported Markup content received. Kind is: ${a}`}}function yt(a){switch(a){case ke.CompletionItemTag.Deprecated:return ne.CompletionItemTag.Deprecated}}function Pt(a){if(a===void 0)return a;let u=[];for(let y of a){let b=yt(y);b!==void 0&&u.push(b)}return u}function Ut(a,u){return u!==void 0?u:a+1}function Zt(a){let u={label:a.label},y=a instanceof Np.default?a:void 0;a.detail&&(u.detail=a.detail),a.documentation&&(!y||y.documentationFormat==="$string"?u.documentation=a.documentation:u.documentation=vt(y.documentationFormat,a.documentation)),a.filterText&&(u.filterText=a.filterText),Ye(u,a),Yr.number(a.kind)&&(u.kind=Ut(a.kind,y&&y.originalItemKind)),a.sortText&&(u.sortText=a.sortText),a.additionalTextEdits&&(u.additionalTextEdits=er(a.additionalTextEdits)),a.commitCharacters&&(u.commitCharacters=a.commitCharacters.slice()),a.command&&(u.command=tt(a.command)),(a.preselect===!0||a.preselect===!1)&&(u.preselect=a.preselect);let b=Pt(a.tags);if(y){if(y.data!==void 0&&(u.data=y.data),y.deprecated===!0||y.deprecated===!1){if(y.deprecated===!0&&b!==void 0&&b.length>0){let E=b.indexOf(ke.CompletionItemTag.Deprecated);E!==-1&&b.splice(E,1)}u.deprecated=y.deprecated}y.insertTextMode!==void 0&&(u.insertTextMode=y.insertTextMode)}return b!==void 0&&b.length>0&&(u.tags=b),u.insertTextMode===void 0&&a.keepWhitespace===!0&&(u.insertTextMode=Bp.InsertTextMode.adjustIndentation),u}function Ye(a,u){let y=ne.InsertTextFormat.PlainText,b,E;u.textEdit?(b=u.textEdit.newText,E=u.textEdit.range):u.insertText instanceof ke.SnippetString?(y=ne.InsertTextFormat.Snippet,b=u.insertText.value):b=u.insertText,u.range&&(E=u.range),a.insertTextFormat=y,u.fromEdit&&b!==void 0&&E!==void 0?a.textEdit=Kt(b,E):a.insertText=b}function Kt(a,u){return Bi.is(u)?ne.InsertReplaceEdit.create(a,le(u.inserting),le(u.replacing)):{newText:a,range:le(u)}}function Ze(a){return{range:le(a.range),newText:a.newText}}function er(a){return a==null?a:a.map(Ze)}function Ce(a){return a<=ke.SymbolKind.TypeParameter?a+1:ne.SymbolKind.Property}function Ke(a){return a}function zt(a){return a.map(Ke)}function tr(a,u,y){return{textDocument:i(a),position:Ue(u),context:{includeDeclaration:y.includeDeclaration}}}function et(a){let u=ne.CodeAction.create(a.title);if(a instanceof Wp.default&&a.data!==void 0&&(u.data=a.data),a.kind!==void 0&&(u.kind=Et(a.kind)),a.diagnostics!==void 0&&(u.diagnostics=St(a.diagnostics)),a.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return a.command!==void 0&&(u.command=tt(a.command)),a.isPreferred!==void 0&&(u.isPreferred=a.isPreferred),a.disabled!==void 0&&(u.disabled={reason:a.disabled.reason}),u}function $t(a){if(a==null)return a;let u;return a.only&&Yr.string(a.only.value)&&(u=[a.only.value]),ne.CodeActionContext.create(St(a.diagnostics),u)}function Et(a){if(a!=null)return a.value}function tt(a){let u=ne.Command.create(a.title,a.command);return a.arguments&&(u.arguments=a.arguments),u}function kt(a){let u=ne.CodeLens.create(le(a.range));return a.command&&(u.command=tt(a.command)),a instanceof Ap.default&&a.data&&(u.data=a.data),u}function rt(a,u){let y={tabSize:a.tabSize,insertSpaces:a.insertSpaces};return u.trimTrailingWhitespace&&(y.trimTrailingWhitespace=!0),u.trimFinalNewlines&&(y.trimFinalNewlines=!0),u.insertFinalNewline&&(y.insertFinalNewline=!0),y}function C(a){return{textDocument:i(a)}}function g(a){return{textDocument:i(a)}}function d(a){let u=ne.DocumentLink.create(le(a.range));a.target&&(u.target=n(a.target)),a.tooltip!==void 0&&(u.tooltip=a.tooltip);let y=a instanceof Mp.default?a:void 0;return y&&y.data&&(u.data=y.data),u}function m(a){return{textDocument:i(a)}}function w(a){let u={name:a.name,kind:Ce(a.kind),uri:n(a.uri),range:le(a.range),selectionRange:le(a.selectionRange)};return a.detail!==void 0&&a.detail.length>0&&(u.detail=a.detail),a.tags!==void 0&&(u.tags=zt(a.tags)),a instanceof Hp.default&&a.data!==void 0&&(u.data=a.data),u}return{asUri:n,asTextDocumentIdentifier:i,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:o,asChangeTextDocumentParams:h,asCloseTextDocumentParams:_,asSaveTextDocumentParams:R,asWillSaveTextDocumentParams:P,asDidCreateFilesParams:q,asDidRenameFilesParams:O,asDidDeleteFilesParams:X,asWillCreateFilesParams:F,asWillRenameFilesParams:I,asWillDeleteFilesParams:$,asTextDocumentPositionParams:W,asCompletionParams:V,asSignatureHelpParams:Ne,asWorkerPosition:Ue,asRange:le,asPosition:Ae,asPositions:Xe,asLocation:ut,asDiagnosticSeverity:Te,asDiagnosticTag:Ve,asDiagnostic:Dt,asDiagnostics:St,asCompletionItem:Zt,asTextEdit:Ze,asSymbolKind:Ce,asSymbolTag:Ke,asSymbolTags:zt,asReferenceParams:tr,asCodeAction:et,asCodeActionContext:$t,asCommand:tt,asCodeLens:kt,asFormattingOptions:rt,asDocumentSymbolParams:C,asCodeLensParams:g,asDocumentLink:d,asDocumentLinkParams:m,asCallHierarchyItem:w}}Cn.createConverter=Up});var Da=k(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.createConverter=void 0;var N=require("vscode"),Y=ve(),gt=lr(),Kp=qi(),zp=Fi(),$p=Ii(),Jp=Ni(),xa=Mi(),Gp=Hi(),Ta=ve(),wn;(function(r){function e(t){let n=t;return n&&gt.string(n.language)&&gt.string(n.value)}r.is=e})(wn||(wn={}));function Qp(r,e){let n=r||(c=>N.Uri.parse(c));function i(c){return n(c)}function s(c){return c.map(o)}function o(c){let T=new xa.ProtocolDiagnostic(x(c.range),c.message,q(c.severity),c.data);return c.code!==void 0&&(Y.CodeDescription.is(c.codeDescription)?T.code={value:c.code,target:i(c.codeDescription.href)}:xa.DiagnosticCode.is(c.code)?(T.hasDiagnosticCode=!0,T.code={value:c.code.value,target:i(c.code.target)}):T.code=c.code),c.source&&(T.source=c.source),c.relatedInformation&&(T.relatedInformation=f(c.relatedInformation)),Array.isArray(c.tags)&&(T.tags=h(c.tags)),T}function f(c){return c.map(l)}function l(c){return new N.DiagnosticRelatedInformation(le(c.location),c.message)}function h(c){if(!c)return;let T=[];for(let H of c){let te=_(H);te!==void 0&&T.push(te)}return T.length>0?T:void 0}function _(c){switch(c){case Y.DiagnosticTag.Unnecessary:return N.DiagnosticTag.Unnecessary;case Y.DiagnosticTag.Deprecated:return N.DiagnosticTag.Deprecated;default:return}}function R(c){if(!!c)return new N.Position(c.line,c.character)}function x(c){if(!!c)return new N.Range(R(c.start),R(c.end))}function P(c){return c.map(T=>x(T))}function q(c){if(c==null)return N.DiagnosticSeverity.Error;switch(c){case Y.DiagnosticSeverity.Error:return N.DiagnosticSeverity.Error;case Y.DiagnosticSeverity.Warning:return N.DiagnosticSeverity.Warning;case Y.DiagnosticSeverity.Information:return N.DiagnosticSeverity.Information;case Y.DiagnosticSeverity.Hint:return N.DiagnosticSeverity.Hint}return N.DiagnosticSeverity.Error}function O(c){if(gt.string(c))return F(c);if(wn.is(c))return F().appendCodeblock(c.value,c.language);if(Array.isArray(c)){let T=[];for(let H of c){let te=F();wn.is(H)?te.appendCodeblock(H.value,H.language):te.appendMarkdown(H),T.push(te)}return T}else{let T;switch(c.kind){case Y.MarkupKind.Markdown:return F(c.value);case Y.MarkupKind.PlainText:return T=F(),T.appendText(c.value),T;default:return T=F(),T.appendText(`Unsupported Markup content received. Kind is: ${c.kind}`),T}}}function X(c){if(gt.string(c))return c;switch(c.kind){case Y.MarkupKind.Markdown:return F(c.value);case Y.MarkupKind.PlainText:return c.value;default:return`Unsupported Markup content received. Kind is: ${c.kind}`}}function F(c){let T=new N.MarkdownString(c);return e===!0&&(T.isTrusted=e),T}function I(c){if(!!c)return new N.Hover(O(c.contents),x(c.range))}function $(c){if(!c)return;if(Array.isArray(c))return c.map(se);let T=c;return new N.CompletionList(T.items.map(se),T.isIncomplete)}function W(c){return Y.CompletionItemKind.Text<=c&&c<=Y.CompletionItemKind.TypeParameter?[c-1,void 0]:[N.CompletionItemKind.Text,c]}function U(c){switch(c){case Y.CompletionItemTag.Deprecated:return N.CompletionItemTag.Deprecated}}function V(c){if(c==null)return[];let T=[];for(let H of c){let te=U(H);te!==void 0&&T.push(te)}return T}function se(c){let T=V(c.tags),H=new Kp.default(c.label);c.detail&&(H.detail=c.detail),c.documentation&&(H.documentation=X(c.documentation),H.documentationFormat=gt.string(c.documentation)?"$string":c.documentation.kind),c.filterText&&(H.filterText=c.filterText);let te=de(c);if(te&&(H.insertText=te.text,H.range=te.range,H.fromEdit=te.fromEdit),gt.number(c.kind)){let[ae,nr]=W(c.kind);H.kind=ae,nr&&(H.originalItemKind=nr)}return c.sortText&&(H.sortText=c.sortText),c.additionalTextEdits&&(H.additionalTextEdits=Se(c.additionalTextEdits)),gt.stringArray(c.commitCharacters)&&(H.commitCharacters=c.commitCharacters.slice()),c.command&&(H.command=Ze(c.command)),(c.deprecated===!0||c.deprecated===!1)&&(H.deprecated=c.deprecated,c.deprecated===!0&&T.push(N.CompletionItemTag.Deprecated)),(c.preselect===!0||c.preselect===!1)&&(H.preselect=c.preselect),c.data!==void 0&&(H.data=c.data),T.length>0&&(H.tags=T),c.insertTextMode!==void 0&&(H.insertTextMode=c.insertTextMode,c.insertTextMode===Ta.InsertTextMode.asIs&&(H.keepWhitespace=!0)),H}function de(c){return c.textEdit?c.insertTextFormat===Y.InsertTextFormat.Snippet?{text:new N.SnippetString(c.textEdit.newText),range:fe(c.textEdit),fromEdit:!0}:{text:c.textEdit.newText,range:fe(c.textEdit),fromEdit:!0}:c.insertText?c.insertTextFormat===Y.InsertTextFormat.Snippet?{text:new N.SnippetString(c.insertText),fromEdit:!1}:{text:c.insertText,fromEdit:!1}:void 0}function fe(c){return Y.InsertReplaceEdit.is(c)?{inserting:x(c.insert),replacing:x(c.replace)}:x(c.range)}function De(c){if(!!c)return new N.TextEdit(x(c.range),c.newText)}function Se(c){if(!!c)return c.map(De)}function Be(c){if(!c)return;let T=new N.SignatureHelp;return gt.number(c.activeSignature)?T.activeSignature=c.activeSignature:T.activeSignature=0,gt.number(c.activeParameter)?T.activeParameter=c.activeParameter:T.activeParameter=0,c.signatures&&(T.signatures=Ne(c.signatures)),T}function Ne(c){return c.map(Ue)}function Ue(c){let T=new N.SignatureInformation(c.label);return c.documentation!==void 0&&(T.documentation=X(c.documentation)),c.parameters!==void 0&&(T.parameters=Ae(c.parameters)),c.activeParameter!==void 0&&(T.activeParameter=c.activeParameter),T}function Ae(c){return c.map(Xe)}function Xe(c){let T=new N.ParameterInformation(c.label);return c.documentation&&(T.documentation=X(c.documentation)),T}function le(c){if(!!c)return new N.Location(n(c.uri),x(c.range))}function ut(c){if(!!c)return Ve(c)}function Te(c){if(!!c)return Ve(c)}function Ge(c){if(!c)return;let T={targetUri:n(c.targetUri),targetRange:x(c.targetRange),originSelectionRange:x(c.originSelectionRange),targetSelectionRange:x(c.targetSelectionRange)};if(!T.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return T}function Ve(c){if(!!c)return gt.array(c)?c.length===0?[]:Y.LocationLink.is(c[0])?c.map(H=>Ge(H)):c.map(H=>le(H)):Y.LocationLink.is(c)?[Ge(c)]:le(c)}function ct(c){if(!!c)return c.map(T=>le(T))}function Ht(c){if(!!c)return c.map(Bt)}function Bt(c){let T=new N.DocumentHighlight(x(c.range));return gt.number(c.kind)&&(T.kind=Dt(c.kind)),T}function Dt(c){switch(c){case Y.DocumentHighlightKind.Text:return N.DocumentHighlightKind.Text;case Y.DocumentHighlightKind.Read:return N.DocumentHighlightKind.Read;case Y.DocumentHighlightKind.Write:return N.DocumentHighlightKind.Write}return N.DocumentHighlightKind.Text}function St(c,T){if(!!c)return c.map(H=>Ut(H,T))}function vt(c){return c<=Y.SymbolKind.TypeParameter?c-1:N.SymbolKind.Property}function yt(c){switch(c){case Y.SymbolTag.Deprecated:return N.SymbolTag.Deprecated;default:return}}function Pt(c){if(c==null)return;let T=[];for(let H of c){let te=yt(H);te!==void 0&&T.push(te)}return T.length===0?void 0:T}function Ut(c,T){let H=new N.SymbolInformation(c.name,vt(c.kind),x(c.location.range),c.location.uri?n(c.location.uri):T);return Kt(H,c),c.containerName&&(H.containerName=c.containerName),H}function Zt(c){if(c!=null)return c.map(Ye)}function Ye(c){let T=new N.DocumentSymbol(c.name,c.detail||"",vt(c.kind),x(c.range),x(c.selectionRange));if(Kt(T,c),c.children!==void 0&&c.children.length>0){let H=[];for(let te of c.children)H.push(Ye(te));T.children=H}return T}function Kt(c,T){c.tags=Pt(T.tags),T.deprecated&&(c.tags?c.tags.includes(N.SymbolTag.Deprecated)||(c.tags=c.tags.concat(N.SymbolTag.Deprecated)):c.tags=[N.SymbolTag.Deprecated])}function Ze(c){let T={title:c.title,command:c.command};return c.arguments&&(T.arguments=c.arguments),T}function er(c){if(!!c)return c.map(Ze)}let Ce=new Map;Ce.set(Y.CodeActionKind.Empty,N.CodeActionKind.Empty),Ce.set(Y.CodeActionKind.QuickFix,N.CodeActionKind.QuickFix),Ce.set(Y.CodeActionKind.Refactor,N.CodeActionKind.Refactor),Ce.set(Y.CodeActionKind.RefactorExtract,N.CodeActionKind.RefactorExtract),Ce.set(Y.CodeActionKind.RefactorInline,N.CodeActionKind.RefactorInline),Ce.set(Y.CodeActionKind.RefactorRewrite,N.CodeActionKind.RefactorRewrite),Ce.set(Y.CodeActionKind.Source,N.CodeActionKind.Source),Ce.set(Y.CodeActionKind.SourceOrganizeImports,N.CodeActionKind.SourceOrganizeImports);function Ke(c){if(c==null)return;let T=Ce.get(c);if(T)return T;let H=c.split(".");T=N.CodeActionKind.Empty;for(let te of H)T=T.append(te);return T}function zt(c){if(c!=null)return c.map(T=>Ke(T))}function tr(c){if(c==null)return;let T=new Jp.default(c.title,c.data);return c.kind!==void 0&&(T.kind=Ke(c.kind)),c.diagnostics!==void 0&&(T.diagnostics=s(c.diagnostics)),c.edit!==void 0&&(T.edit=Et(c.edit)),c.command!==void 0&&(T.command=Ze(c.command)),c.isPreferred!==void 0&&(T.isPreferred=c.isPreferred),c.disabled!==void 0&&(T.disabled={reason:c.disabled.reason}),T}function et(c){if(!c)return;let T=new zp.default(x(c.range));return c.command&&(T.command=Ze(c.command)),c.data!==void 0&&c.data!==null&&(T.data=c.data),T}function $t(c){if(!!c)return c.map(T=>et(T))}function Et(c){if(!c)return;let T=new Map;if(c.changeAnnotations!==void 0)for(let ae of Object.keys(c.changeAnnotations)){let nr=tt(c.changeAnnotations[ae]);T.set(ae,nr)}let H=ae=>{if(ae!==void 0)return T.get(ae)},te=new N.WorkspaceEdit;if(c.documentChanges)for(let ae of c.documentChanges)if(Y.CreateFile.is(ae))te.createFile(n(ae.uri),ae.options,H(ae.annotationId));else if(Y.RenameFile.is(ae))te.renameFile(n(ae.oldUri),n(ae.newUri),ae.options,H(ae.annotationId));else if(Y.DeleteFile.is(ae))te.deleteFile(n(ae.uri),ae.options,H(ae.annotationId));else if(Y.TextDocumentEdit.is(ae)){let nr=n(ae.textDocument.uri);for(let yr of ae.edits)Ta.AnnotatedTextEdit.is(yr)?te.replace(nr,x(yr.range),yr.newText,H(yr.annotationId)):te.replace(nr,x(yr.range),yr.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(ae,void 0,4)}`);else c.changes&&Object.keys(c.changes).forEach(ae=>{te.set(n(ae),Se(c.changes[ae]))});return te}function tt(c){if(c!==void 0)return{label:c.label,needsConfirmation:!!c.needsConfirmation,description:c.description}}function kt(c){let T=x(c.range),H=c.target?i(c.target):void 0,te=new $p.default(T,H);return c.tooltip!==void 0&&(te.tooltip=c.tooltip),c.data!==void 0&&c.data!==null&&(te.data=c.data),te}function rt(c){if(!!c)return c.map(kt)}function C(c){return new N.Color(c.red,c.green,c.blue,c.alpha)}function g(c){return new N.ColorInformation(x(c.range),C(c.color))}function d(c){if(Array.isArray(c))return c.map(g)}function m(c){let T=new N.ColorPresentation(c.label);return T.additionalTextEdits=Se(c.additionalTextEdits),c.textEdit&&(T.textEdit=De(c.textEdit)),T}function w(c){if(Array.isArray(c))return c.map(m)}function a(c){if(c)switch(c){case Y.FoldingRangeKind.Comment:return N.FoldingRangeKind.Comment;case Y.FoldingRangeKind.Imports:return N.FoldingRangeKind.Imports;case Y.FoldingRangeKind.Region:return N.FoldingRangeKind.Region}}function u(c){return new N.FoldingRange(c.startLine,c.endLine,a(c.kind))}function y(c){if(Array.isArray(c))return c.map(u)}function b(c){return new N.SelectionRange(x(c.range),c.parent?b(c.parent):void 0)}function E(c){if(!Array.isArray(c))return[];let T=[];for(let H of c)T.push(b(H));return T}function A(c){if(c===null)return;let T=new Gp.default(vt(c.kind),c.name,c.detail||"",i(c.uri),x(c.range),x(c.selectionRange),c.data);return c.tags!==void 0&&(T.tags=Pt(c.tags)),T}function J(c){if(c!==null)return c.map(T=>A(T))}function ie(c){return new N.CallHierarchyIncomingCall(A(c.from),P(c.fromRanges))}function we(c){if(c!==null)return c.map(T=>ie(T))}function Re(c){return new N.CallHierarchyOutgoingCall(A(c.to),P(c.fromRanges))}function ee(c){if(c!==null)return c.map(T=>Re(T))}function Jt(c){if(c!=null)return new N.SemanticTokens(new Uint32Array(c.data),c.resultId)}function rr(c){return new N.SemanticTokensEdit(c.start,c.deleteCount,c.data!==void 0?new Uint32Array(c.data):void 0)}function un(c){if(c!=null)return new N.SemanticTokensEdits(c.edits.map(rr),c.resultId)}function hl(c){return c}function gl(c){if(c!=null)return new N.LinkedEditingRanges(P(c.ranges),ml(c.wordPattern))}function ml(c){if(c!=null)return new RegExp(c)}return{asUri:i,asDiagnostics:s,asDiagnostic:o,asRange:x,asRanges:P,asPosition:R,asDiagnosticSeverity:q,asDiagnosticTag:_,asHover:I,asCompletionResult:$,asCompletionItem:se,asTextEdit:De,asTextEdits:Se,asSignatureHelp:Be,asSignatureInformations:Ne,asSignatureInformation:Ue,asParameterInformations:Ae,asParameterInformation:Xe,asDeclarationResult:ut,asDefinitionResult:Te,asLocation:le,asReferences:ct,asDocumentHighlights:Ht,asDocumentHighlight:Bt,asDocumentHighlightKind:Dt,asSymbolKind:vt,asSymbolTag:yt,asSymbolTags:Pt,asSymbolInformations:St,asSymbolInformation:Ut,asDocumentSymbols:Zt,asDocumentSymbol:Ye,asCommand:Ze,asCommands:er,asCodeAction:tr,asCodeActionKind:Ke,asCodeActionKinds:zt,asCodeLens:et,asCodeLenses:$t,asWorkspaceEdit:Et,asDocumentLink:kt,asDocumentLinks:rt,asFoldingRangeKind:a,asFoldingRange:u,asFoldingRanges:y,asColor:C,asColorInformation:g,asColorInformations:d,asColorPresentation:m,asColorPresentations:w,asSelectionRange:b,asSelectionRanges:E,asSemanticTokensLegend:hl,asSemanticTokens:Jt,asSemanticTokensEdit:rr,asSemanticTokensEdits:un,asCallHierarchyItem:A,asCallHierarchyItems:J,asCallHierarchyIncomingCall:ie,asCallHierarchyIncomingCalls:we,asCallHierarchyOutgoingCall:Re,asCallHierarchyOutgoingCalls:ee,asLinkedEditingRanges:gl}}Rn.createConverter=Qp});var Ea=k(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.Delayer=void 0;var Sa=ve(),Pa=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(t>=0||this.timeout===void 0)&&(this.timeout=Sa.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(Sa.RAL().timer.clearTimeout(this.timeout),this.timeout=void 0)}};_n.Delayer=Pa});var xn=k(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.generateUuid=it.parse=it.isUUID=it.v4=it.empty=void 0;var bn=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Z=class extends bn{constructor(){super([Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),"-",Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),"-","4",Z._randomHex(),Z._randomHex(),Z._randomHex(),"-",Z._oneOf(Z._timeHighBits),Z._randomHex(),Z._randomHex(),Z._randomHex(),"-",Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex(),Z._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return Z._oneOf(Z._chars)}};Z._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Z._timeHighBits=["8","9","a","b"];it.empty=new bn("00000000-0000-0000-0000-000000000000");function ka(){return new Z}it.v4=ka;var Xp=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function qa(r){return Xp.test(r)}it.isUUID=qa;function Vp(r){if(!qa(r))throw new Error("invalid uuid");return new bn(r)}it.parse=Vp;function Yp(){return ka().asHex()}it.generateUuid=Yp});var Ui=k(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.ProgressPart=void 0;var ja=require("vscode"),Fa=ve(),Oa=lr(),Ia=class{constructor(e,t,n){this._client=e,this._token=t,this._reported=0,this._disposable=this._client.onProgress(Fa.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),n&&n(this);break}})}begin(e){ja.window.withProgress({location:ja.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,n)=>(this._progress=t,this._infinite=e.percentage===void 0,this._cancellationToken=n,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Fa.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})))}report(e){if(this._infinite&&Oa.string(e.message))this._progress.report({message:e.message});else if(Oa.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,t-this._reported);this._progress.report({message:e.message,increment:n}),this._reported+=n}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};Tn.ProgressPart=Ia});var ot=k(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.BaseLanguageClient=_e.MessageTransports=_e.TextDocumentFeature=_e.State=_e.RevealOutputChannelOn=_e.CloseAction=_e.ErrorAction=void 0;var j=require("vscode"),v=ve(),Zp=Ei(),eh=ba(),th=Da(),ue=lr(),La=Ea(),ce=xn(),rh=Ui(),Na=class{error(e){v.RAL().console.error(e)}warn(e){v.RAL().console.warn(e)}info(e){v.RAL().console.info(e)}log(e){v.RAL().console.log(e)}};function nh(r,e,t,n,i){let s=new Na,o=v.createProtocolConnection(r,e,s,i);return o.onError(l=>{t(l[0],l[1],l[2])}),o.onClose(n),{listen:()=>o.listen(),sendRequest:(l,...h)=>o.sendRequest(ue.string(l)?l:l.method,...h),onRequest:(l,h)=>o.onRequest(ue.string(l)?l:l.method,h),sendNotification:(l,h)=>o.sendNotification(ue.string(l)?l:l.method,h),onNotification:(l,h)=>o.onNotification(ue.string(l)?l:l.method,h),onProgress:o.onProgress,sendProgress:o.sendProgress,trace:(l,h,_)=>{let R={sendNotification:!1,traceFormat:v.TraceFormat.Text};_===void 0?o.trace(l,h,R):(ue.boolean(_),o.trace(l,h,_))},initialize:l=>o.sendRequest(v.InitializeRequest.type,l),shutdown:()=>o.sendRequest(v.ShutdownRequest.type,void 0),exit:()=>o.sendNotification(v.ExitNotification.type),onLogMessage:l=>o.onNotification(v.LogMessageNotification.type,l),onShowMessage:l=>o.onNotification(v.ShowMessageNotification.type,l),onTelemetry:l=>o.onNotification(v.TelemetryEventNotification.type,l),didChangeConfiguration:l=>o.sendNotification(v.DidChangeConfigurationNotification.type,l),didChangeWatchedFiles:l=>o.sendNotification(v.DidChangeWatchedFilesNotification.type,l),didOpenTextDocument:l=>o.sendNotification(v.DidOpenTextDocumentNotification.type,l),didChangeTextDocument:l=>o.sendNotification(v.DidChangeTextDocumentNotification.type,l),didCloseTextDocument:l=>o.sendNotification(v.DidCloseTextDocumentNotification.type,l),didSaveTextDocument:l=>o.sendNotification(v.DidSaveTextDocumentNotification.type,l),onDiagnostics:l=>o.onNotification(v.PublishDiagnosticsNotification.type,l),end:()=>o.end(),dispose:()=>o.dispose()}}var Dn;(function(r){r[r.Continue=1]="Continue",r[r.Shutdown=2]="Shutdown"})(Dn=_e.ErrorAction||(_e.ErrorAction={}));var fr;(function(r){r[r.DoNotRestart=1]="DoNotRestart",r[r.Restart=2]="Restart"})(fr=_e.CloseAction||(_e.CloseAction={}));var Aa=class{constructor(e,t){this.name=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,n){return n&&n<=3?Dn.Continue:Dn.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?fr.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(j.window.showErrorMessage(`The ${this.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted.`),fr.DoNotRestart):(this.restarts.shift(),fr.Restart)}},Zr;(function(r){r[r.Info=1]="Info",r[r.Warn=2]="Warn",r[r.Error=3]="Error",r[r.Never=4]="Never"})(Zr=_e.RevealOutputChannelOn||(_e.RevealOutputChannelOn={}));var Sn;(function(r){r[r.Stopped=1]="Stopped",r[r.Starting=3]="Starting",r[r.Running=2]="Running"})(Sn=_e.State||(_e.State={}));var ge;(function(r){r[r.Initial=0]="Initial",r[r.Starting=1]="Starting",r[r.StartFailed=2]="StartFailed",r[r.Running=3]="Running",r[r.Stopping=4]="Stopping",r[r.Stopped=5]="Stopped"})(ge||(ge={}));var Ma=[v.SymbolKind.File,v.SymbolKind.Module,v.SymbolKind.Namespace,v.SymbolKind.Package,v.SymbolKind.Class,v.SymbolKind.Method,v.SymbolKind.Property,v.SymbolKind.Field,v.SymbolKind.Constructor,v.SymbolKind.Enum,v.SymbolKind.Interface,v.SymbolKind.Function,v.SymbolKind.Variable,v.SymbolKind.Constant,v.SymbolKind.String,v.SymbolKind.Number,v.SymbolKind.Boolean,v.SymbolKind.Array,v.SymbolKind.Object,v.SymbolKind.Key,v.SymbolKind.Null,v.SymbolKind.EnumMember,v.SymbolKind.Struct,v.SymbolKind.Event,v.SymbolKind.Operator,v.SymbolKind.TypeParameter],ih=[v.CompletionItemKind.Text,v.CompletionItemKind.Method,v.CompletionItemKind.Function,v.CompletionItemKind.Constructor,v.CompletionItemKind.Field,v.CompletionItemKind.Variable,v.CompletionItemKind.Class,v.CompletionItemKind.Interface,v.CompletionItemKind.Module,v.CompletionItemKind.Property,v.CompletionItemKind.Unit,v.CompletionItemKind.Value,v.CompletionItemKind.Enum,v.CompletionItemKind.Keyword,v.CompletionItemKind.Snippet,v.CompletionItemKind.Color,v.CompletionItemKind.File,v.CompletionItemKind.Reference,v.CompletionItemKind.Folder,v.CompletionItemKind.EnumMember,v.CompletionItemKind.Constant,v.CompletionItemKind.Struct,v.CompletionItemKind.Event,v.CompletionItemKind.Operator,v.CompletionItemKind.TypeParameter],Wa=[v.SymbolTag.Deprecated];function M(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var en;(function(r){function e(t){let n=j.workspace.getConfiguration("files",t);return{trimTrailingWhitespace:n.get("trimTrailingWhitespace"),trimFinalNewlines:n.get("trimFinalNewlines"),insertFinalNewline:n.get("insertFinalNewline")}}r.fromConfiguration=e})(en||(en={}));var Ki;(function(r){function e(t){let n=t;return n&&ue.func(n.register)&&ue.func(n.unregister)&&ue.func(n.dispose)&&n.registrationType!==void 0}r.is=e})(Ki||(Ki={}));var wt=class{constructor(e,t,n,i,s,o){this._client=e,this._event=t,this._type=n,this._middleware=i,this._createParams=s,this._selectorFilter=o,this._selectors=new Map}static textDocumentFilter(e,t){for(let n of e)if(j.languages.match(n,t))return!0;return!1}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,t=>this._client.sendNotification(this._type,this._createParams(t))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let t of this._selectors.values())if(j.languages.match(t,e))return{send:n=>{this.callback(n)}}}},Ha=class extends wt{constructor(e,t){super(e,j.workspace.onDidOpenTextDocument,v.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),wt.textDocumentFilter);this._syncedDocuments=t}fillClientCapabilities(e){M(M(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:ce.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return v.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let t=e.registerOptions.documentSelector;j.workspace.textDocuments.forEach(n=>{let i=n.uri.toString();if(!this._syncedDocuments.has(i)&&j.languages.match(t,n)){let s=this._client.clientOptions.middleware,o=f=>{this._client.sendNotification(this._type,this._createParams(f))};s.didOpen?s.didOpen(n,o):o(n),this._syncedDocuments.set(i,n)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}},Ba=class extends wt{constructor(e,t){super(e,j.workspace.onDidCloseTextDocument,v.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,n=>e.code2ProtocolConverter.asCloseTextDocumentParams(n),wt.textDocumentFilter);this._syncedDocuments=t}get registrationType(){return v.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){M(M(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:ce.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(i=>{if(j.languages.match(t,i)&&!this._selectorFilter(n,i)){let s=this._client.clientOptions.middleware,o=f=>{this._client.sendNotification(this._type,this._createParams(f))};this._syncedDocuments.delete(i.uri.toString()),s.didClose?s.didClose(i,o):o(i)}})}},Ua=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get registrationType(){return v.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){M(M(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.change!==void 0&&n.change!==v.TextDocumentSyncKind.None&&this.register({id:ce.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=j.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{documentSelector:e.registerOptions.documentSelector,syncKind:e.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let t of this._changeData.values())if(j.languages.match(t.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(t.syncKind===v.TextDocumentSyncKind.Incremental){let i=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,()=>this._client.sendNotification(v.DidChangeTextDocumentNotification.type,i)):this._client.sendNotification(v.DidChangeTextDocumentNotification.type,i)}else if(t.syncKind===v.TextDocumentSyncKind.Full){let i=s=>{this._changeDelayer?(this._changeDelayer.uri!==s.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=s.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(v.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))})):(this._changeDelayer={uri:s.document.uri.toString(),delayer:new La.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(v.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))},-1))};n.didChange?n.didChange(e,i):i(e)}}}}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let t of this._changeData.values())if(j.languages.match(t.documentSelector,e))return{send:n=>{this.callback(n)}}}},Ka=class extends wt{constructor(e){super(e,j.workspace.onWillSaveTextDocument,v.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),(t,n)=>wt.textDocumentFilter(t,n.document))}get registrationType(){return v.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=M(M(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register({id:ce.generateUuid(),registerOptions:{documentSelector:t}})}},za=class{constructor(e){this._client=e,this._selectors=new Map}get registrationType(){return v.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=M(M(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register({id:ce.generateUuid(),registerOptions:{documentSelector:t}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=j.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){if(wt.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,n=i=>this._client.sendRequest(v.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(s=>{let o=this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},$a=class extends wt{constructor(e){super(e,j.workspace.onDidSaveTextDocument,v.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),wt.textDocumentFilter);this._includeText=!1}get registrationType(){return v.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){M(M(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;if(t&&n&&n.save){let i=typeof n.save=="boolean"?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:ce.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}},Ja=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get registrationType(){return v.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){M(M(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let t=[];for(let n of e.registerOptions.watchers){if(!ue.string(n.globPattern))continue;let i=!0,s=!0,o=!0;n.kind!==void 0&&n.kind!==null&&(i=(n.kind&v.WatchKind.Create)!=0,s=(n.kind&v.WatchKind.Change)!=0,o=(n.kind&v.WatchKind.Delete)!=0);let f=j.workspace.createFileSystemWatcher(n.globPattern,!i,!s,!o);this.hookListeners(f,i,s,o),t.push(f)}this._watchers.set(e.id,t)}registerRaw(e,t){let n=[];for(let i of t)this.hookListeners(i,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,i,s){t&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:v.FileChangeType.Created}),null,s),n&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:v.FileChangeType.Changed}),null,s),i&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:v.FileChangeType.Deleted}),null,s)}unregister(e){let t=this._watchers.get(e);if(t)for(let n of t)n.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}},Le=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,t){if(t){if(v.TextDocumentRegistrationOptions.is(t)){let n=v.StaticRegistrationOptions.hasId(t)?t.id:ce.generateUuid(),i=t.documentSelector||e;if(i)return[n,Object.assign({},t,{documentSelector:i})]}else if(ue.boolean(t)&&t===!0||v.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let n=ue.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[ce.generateUuid(),n]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,t){if(!(!e||!t))return ue.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(let t of this._registrations.values()){let n=t.data.registerOptions.documentSelector;if(n!==null&&j.languages.match(n,e))return t.provider}}getAllProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};_e.TextDocumentFeature=Le;var Ga=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}},Qa=class extends Le{constructor(e){super(e,v.CompletionRequest.type)}fillClientCapabilities(e){let t=M(M(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[v.MarkupKind.Markdown,v.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[v.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[v.InsertTextMode.asIs,v.InsertTextMode.adjustIndentation]}},t.completionItemKind={valueSet:ih}}initialize(e,t){let n=this.getRegistrationOptions(t,e.completionProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t=e.triggerCharacters||[],n={provideCompletionItems:(i,s,o,f)=>{let l=this._client,h=this._client.clientOptions.middleware,_=(R,x,P,q)=>l.sendRequest(v.CompletionRequest.type,l.code2ProtocolConverter.asCompletionParams(R,x,P),q).then(l.protocol2CodeConverter.asCompletionResult,O=>l.handleFailedRequest(v.CompletionRequest.type,O,null));return h.provideCompletionItem?h.provideCompletionItem(i,s,f,o,_):_(i,s,f,o)},resolveCompletionItem:e.resolveProvider?(i,s)=>{let o=this._client,f=this._client.clientOptions.middleware,l=(h,_)=>o.sendRequest(v.CompletionResolveRequest.type,o.code2ProtocolConverter.asCompletionItem(h),_).then(o.protocol2CodeConverter.asCompletionItem,R=>o.handleFailedRequest(v.CompletionResolveRequest.type,R,h));return f.resolveCompletionItem?f.resolveCompletionItem(i,s,l):l(i,s)}:void 0};return[j.languages.registerCompletionItemProvider(e.documentSelector,n,...t),n]}},Xa=class extends Le{constructor(e){super(e,v.HoverRequest.type)}fillClientCapabilities(e){let t=M(M(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[v.MarkupKind.Markdown,v.MarkupKind.PlainText]}initialize(e,t){let n=this.getRegistrationOptions(t,e.hoverProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideHover:(n,i,s)=>{let o=this._client,f=(h,_,R)=>o.sendRequest(v.HoverRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(h,_),R).then(o.protocol2CodeConverter.asHover,x=>o.handleFailedRequest(v.HoverRequest.type,x,null)),l=o.clientOptions.middleware;return l.provideHover?l.provideHover(n,i,s,f):f(n,i,s)}};return[j.languages.registerHoverProvider(e.documentSelector,t),t]}},Va=class extends Le{constructor(e){super(e,v.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=M(M(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[v.MarkupKind.Markdown,v.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.signatureHelpProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideSignatureHelp:(i,s,o,f)=>{let l=this._client,h=(R,x,P,q)=>l.sendRequest(v.SignatureHelpRequest.type,l.code2ProtocolConverter.asSignatureHelpParams(R,x,P),q).then(l.protocol2CodeConverter.asSignatureHelp,O=>l.handleFailedRequest(v.SignatureHelpRequest.type,O,null)),_=l.clientOptions.middleware;return _.provideSignatureHelp?_.provideSignatureHelp(i,s,f,o,h):h(i,s,f,o)}},n;if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];n=j.languages.registerSignatureHelpProvider(e.documentSelector,t,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};n=j.languages.registerSignatureHelpProvider(e.documentSelector,t,i)}return[n,t]}},Ya=class extends Le{constructor(e){super(e,v.DefinitionRequest.type)}fillClientCapabilities(e){let t=M(M(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.definitionProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideDefinition:(n,i,s)=>{let o=this._client,f=(h,_,R)=>o.sendRequest(v.DefinitionRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(h,_),R).then(o.protocol2CodeConverter.asDefinitionResult,x=>o.handleFailedRequest(v.DefinitionRequest.type,x,null)),l=o.clientOptions.middleware;return l.provideDefinition?l.provideDefinition(n,i,s,f):f(n,i,s)}};return[j.languages.registerDefinitionProvider(e.documentSelector,t),t]}},Za=class extends Le{constructor(e){super(e,v.ReferencesRequest.type)}fillClientCapabilities(e){M(M(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.referencesProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideReferences:(n,i,s,o)=>{let f=this._client,l=(_,R,x,P)=>f.sendRequest(v.ReferencesRequest.type,f.code2ProtocolConverter.asReferenceParams(_,R,x),P).then(f.protocol2CodeConverter.asReferences,q=>f.handleFailedRequest(v.ReferencesRequest.type,q,null)),h=f.clientOptions.middleware;return h.provideReferences?h.provideReferences(n,i,s,o,l):l(n,i,s,o)}};return[j.languages.registerReferenceProvider(e.documentSelector,t),t]}},eu=class extends Le{constructor(e){super(e,v.DocumentHighlightRequest.type)}fillClientCapabilities(e){M(M(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentHighlightProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideDocumentHighlights:(n,i,s)=>{let o=this._client,f=(h,_,R)=>o.sendRequest(v.DocumentHighlightRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(h,_),R).then(o.protocol2CodeConverter.asDocumentHighlights,x=>o.handleFailedRequest(v.DocumentHighlightRequest.type,x,null)),l=o.clientOptions.middleware;return l.provideDocumentHighlights?l.provideDocumentHighlights(n,i,s,f):f(n,i,s)}};return[j.languages.registerDocumentHighlightProvider(e.documentSelector,t),t]}},tu=class extends Le{constructor(e){super(e,v.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=M(M(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:Ma},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:Wa},t.labelSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentSymbolProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideDocumentSymbols:(i,s)=>{let o=this._client,f=(h,_)=>o.sendRequest(v.DocumentSymbolRequest.type,o.code2ProtocolConverter.asDocumentSymbolParams(h),_).then(R=>{if(R!==null){if(R.length===0)return[];{let x=R[0];return v.DocumentSymbol.is(x)?o.protocol2CodeConverter.asDocumentSymbols(R):o.protocol2CodeConverter.asSymbolInformations(R)}}},R=>o.handleFailedRequest(v.DocumentSymbolRequest.type,R,null)),l=o.clientOptions.middleware;return l.provideDocumentSymbols?l.provideDocumentSymbols(i,s,f):f(i,s)}},n=e.label!==void 0?{label:e.label}:void 0;return[j.languages.registerDocumentSymbolProvider(e.documentSelector,t,n),t]}},ru=class extends Ga{constructor(e){super(e,v.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=M(M(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:Ma},t.tagSupport={valueSet:Wa}}initialize(e){!e.workspaceSymbolProvider||this.register({id:ce.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let t={provideWorkspaceSymbols:(n,i)=>{let s=this._client,o=(l,h)=>s.sendRequest(v.WorkspaceSymbolRequest.type,{query:l},h).then(s.protocol2CodeConverter.asSymbolInformations,_=>s.handleFailedRequest(v.WorkspaceSymbolRequest.type,_,null)),f=s.clientOptions.middleware;return f.provideWorkspaceSymbols?f.provideWorkspaceSymbols(n,i,o):o(n,i)}};return[j.languages.registerWorkspaceSymbolProvider(t),t]}},nu=class extends Le{constructor(e){super(e,v.CodeActionRequest.type)}fillClientCapabilities(e){let t=M(M(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[v.CodeActionKind.Empty,v.CodeActionKind.QuickFix,v.CodeActionKind.Refactor,v.CodeActionKind.RefactorExtract,v.CodeActionKind.RefactorInline,v.CodeActionKind.RefactorRewrite,v.CodeActionKind.Source,v.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!1}initialize(e,t){let n=this.getRegistrationOptions(t,e.codeActionProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideCodeActions:(n,i,s,o)=>{let f=this._client,l=(_,R,x,P)=>{let q={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(_),range:f.code2ProtocolConverter.asRange(R),context:f.code2ProtocolConverter.asCodeActionContext(x)};return f.sendRequest(v.CodeActionRequest.type,q,P).then(O=>{if(O===null)return;let X=[];for(let F of O)v.Command.is(F)?X.push(f.protocol2CodeConverter.asCommand(F)):X.push(f.protocol2CodeConverter.asCodeAction(F));return X},O=>f.handleFailedRequest(v.CodeActionRequest.type,O,null))},h=f.clientOptions.middleware;return h.provideCodeActions?h.provideCodeActions(n,i,s,o,l):l(n,i,s,o)},resolveCodeAction:e.resolveProvider?(n,i)=>{let s=this._client,o=this._client.clientOptions.middleware,f=(l,h)=>s.sendRequest(v.CodeActionResolveRequest.type,s.code2ProtocolConverter.asCodeAction(l),h).then(s.protocol2CodeConverter.asCodeAction,_=>s.handleFailedRequest(v.CodeActionResolveRequest.type,_,l));return o.resolveCodeAction?o.resolveCodeAction(n,i,f):f(n,i)}:void 0};return[j.languages.registerCodeActionsProvider(e.documentSelector,t,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),t]}},iu=class extends Le{constructor(e){super(e,v.CodeLensRequest.type)}fillClientCapabilities(e){M(M(e,"textDocument"),"codeLens").dynamicRegistration=!0,M(M(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(v.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(t,e.codeLensProvider);!i||this.register({id:ce.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=new j.EventEmitter,n={onDidChangeCodeLenses:t.event,provideCodeLenses:(i,s)=>{let o=this._client,f=(h,_)=>o.sendRequest(v.CodeLensRequest.type,o.code2ProtocolConverter.asCodeLensParams(h),_).then(o.protocol2CodeConverter.asCodeLenses,R=>o.handleFailedRequest(v.CodeLensRequest.type,R,null)),l=o.clientOptions.middleware;return l.provideCodeLenses?l.provideCodeLenses(i,s,f):f(i,s)},resolveCodeLens:e.resolveProvider?(i,s)=>{let o=this._client,f=(h,_)=>o.sendRequest(v.CodeLensResolveRequest.type,o.code2ProtocolConverter.asCodeLens(h),_).then(o.protocol2CodeConverter.asCodeLens,R=>o.handleFailedRequest(v.CodeLensResolveRequest.type,R,h)),l=o.clientOptions.middleware;return l.resolveCodeLens?l.resolveCodeLens(i,s,f):f(i,s)}:void 0};return[j.languages.registerCodeLensProvider(e.documentSelector,n),{provider:n,onDidChangeCodeLensEmitter:t}]}},ou=class extends Le{constructor(e){super(e,v.DocumentFormattingRequest.type)}fillClientCapabilities(e){M(M(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentFormattingProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideDocumentFormattingEdits:(n,i,s)=>{let o=this._client,f=(h,_,R)=>{let x={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(h),options:o.code2ProtocolConverter.asFormattingOptions(_,en.fromConfiguration(h))};return o.sendRequest(v.DocumentFormattingRequest.type,x,R).then(o.protocol2CodeConverter.asTextEdits,P=>o.handleFailedRequest(v.DocumentFormattingRequest.type,P,null))},l=o.clientOptions.middleware;return l.provideDocumentFormattingEdits?l.provideDocumentFormattingEdits(n,i,s,f):f(n,i,s)}};return[j.languages.registerDocumentFormattingEditProvider(e.documentSelector,t),t]}},su=class extends Le{constructor(e){super(e,v.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){M(M(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideDocumentRangeFormattingEdits:(n,i,s,o)=>{let f=this._client,l=(_,R,x,P)=>{let q={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(_),range:f.code2ProtocolConverter.asRange(R),options:f.code2ProtocolConverter.asFormattingOptions(x,en.fromConfiguration(_))};return f.sendRequest(v.DocumentRangeFormattingRequest.type,q,P).then(f.protocol2CodeConverter.asTextEdits,O=>f.handleFailedRequest(v.DocumentRangeFormattingRequest.type,O,null))},h=f.clientOptions.middleware;return h.provideDocumentRangeFormattingEdits?h.provideDocumentRangeFormattingEdits(n,i,s,o,l):l(n,i,s,o)}};return[j.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,t),t]}},au=class extends Le{constructor(e){super(e,v.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){M(M(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideOnTypeFormattingEdits:(i,s,o,f,l)=>{let h=this._client,_=(x,P,q,O,X)=>{let F={textDocument:h.code2ProtocolConverter.asTextDocumentIdentifier(x),position:h.code2ProtocolConverter.asPosition(P),ch:q,options:h.code2ProtocolConverter.asFormattingOptions(O,en.fromConfiguration(x))};return h.sendRequest(v.DocumentOnTypeFormattingRequest.type,F,X).then(h.protocol2CodeConverter.asTextEdits,I=>h.handleFailedRequest(v.DocumentOnTypeFormattingRequest.type,I,null))},R=h.clientOptions.middleware;return R.provideOnTypeFormattingEdits?R.provideOnTypeFormattingEdits(i,s,o,f,l,_):_(i,s,o,f,l)}},n=e.moreTriggerCharacter||[];return[j.languages.registerOnTypeFormattingEditProvider(e.documentSelector,t,e.firstTriggerCharacter,...n),t]}},uu=class extends Le{constructor(e){super(e,v.RenameRequest.type)}fillClientCapabilities(e){let t=M(M(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=v.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.renameProvider);!n||(ue.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register({id:ce.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){let t={provideRenameEdits:(n,i,s,o)=>{let f=this._client,l=(_,R,x,P)=>{let q={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(_),position:f.code2ProtocolConverter.asPosition(R),newName:x};return f.sendRequest(v.RenameRequest.type,q,P).then(f.protocol2CodeConverter.asWorkspaceEdit,O=>f.handleFailedRequest(v.RenameRequest.type,O,null))},h=f.clientOptions.middleware;return h.provideRenameEdits?h.provideRenameEdits(n,i,s,o,l):l(n,i,s,o)},prepareRename:e.prepareProvider?(n,i,s)=>{let o=this._client,f=(h,_,R)=>{let x={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(h),position:o.code2ProtocolConverter.asPosition(_)};return o.sendRequest(v.PrepareRenameRequest.type,x,R).then(P=>v.Range.is(P)?o.protocol2CodeConverter.asRange(P):this.isDefaultBehavior(P)?P.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):P&&v.Range.is(P.range)?{range:o.protocol2CodeConverter.asRange(P.range),placeholder:P.placeholder}:Promise.reject(new Error("The element can't be renamed.")),P=>o.handleFailedRequest(v.PrepareRenameRequest.type,P,void 0))},l=o.clientOptions.middleware;return l.prepareRename?l.prepareRename(n,i,s,f):f(n,i,s)}:void 0};return[j.languages.registerRenameProvider(e.documentSelector,t),t]}isDefaultBehavior(e){let t=e;return t&&ue.boolean(t.defaultBehavior)}},cu=class extends Le{constructor(e){super(e,v.DocumentLinkRequest.type)}fillClientCapabilities(e){let t=M(M(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentLinkProvider);!n||this.register({id:ce.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideDocumentLinks:(n,i)=>{let s=this._client,o=(l,h)=>s.sendRequest(v.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(l),h).then(s.protocol2CodeConverter.asDocumentLinks,_=>s.handleFailedRequest(v.DocumentLinkRequest.type,_,null)),f=s.clientOptions.middleware;return f.provideDocumentLinks?f.provideDocumentLinks(n,i,o):o(n,i)},resolveDocumentLink:e.resolveProvider?(n,i)=>{let s=this._client,o=(l,h)=>s.sendRequest(v.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(l),h).then(s.protocol2CodeConverter.asDocumentLink,_=>s.handleFailedRequest(v.DocumentLinkResolveRequest.type,_,l)),f=s.clientOptions.middleware;return f.resolveDocumentLink?f.resolveDocumentLink(n,i,o):o(n,i)}:void 0};return[j.languages.registerDocumentLinkProvider(e.documentSelector,t),t]}},lu=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return v.DidChangeConfigurationNotification.type}fillClientCapabilities(e){M(M(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register({id:ce.generateUuid(),registerOptions:{section:e}})}register(e){let t=j.workspace.onDidChangeConfiguration(n=>{this.onDidChangeConfiguration(e.registerOptions.section,n)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let n;if(ue.string(e)?n=[e]:n=e,n!==void 0&&t!==void 0&&!n.some(f=>t.affectsConfiguration(f)))return;let i=o=>{if(o===void 0){this._client.sendNotification(v.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(v.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(o)})},s=this.getMiddleware();s?s(n,i):i(n)}extractSettingsInformation(e){function t(s,o){let f=s;for(let l=0;l<o.length-1;l++){let h=f[o[l]];h||(h=Object.create(null),f[o[l]]=h),f=h}return f}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],f=o.indexOf("."),l=null;if(f>=0?l=j.workspace.getConfiguration(o.substr(0,f),n).get(o.substr(f+1)):l=j.workspace.getConfiguration(void 0,n).get(o),l){let h=e[s].split(".");t(i,h)[h[h.length-1]]=Zp.toJSONObject(l)}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},du=class{constructor(e){this._client=e,this._commands=new Map}get registrationType(){return v.ExecuteCommandRequest.type}fillClientCapabilities(e){M(M(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:ce.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let t=this._client,n=t.clientOptions.middleware,i=(s,o)=>{let f={command:s,arguments:o};return t.sendRequest(v.ExecuteCommandRequest.type,f).then(void 0,l=>t.handleFailedRequest(v.ExecuteCommandRequest.type,l,void 0))};if(e.registerOptions.commands){let s=[];for(let o of e.registerOptions.commands)s.push(j.commands.registerCommand(o,(...f)=>n.executeCommand?n.executeCommand(o,f,i):i(o,f)));this._commands.set(e.id,s)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(n=>n.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}},oh;(function(r){function e(t){return t&&v.MessageReader.is(t.reader)&&v.MessageWriter.is(t.writer)}r.is=e})(oh=_e.MessageTransports||(_e.MessageTransports={}));var zi=class{constructor(e,t){this._resolve=e,this._reject=t,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},Er=class{constructor(e,t,n){var i;this._traceFormat=v.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=e,this._name=t,n=n||{};let s={isTrusted:!1};n.markdown!==void 0&&n.markdown.isTrusted===!0&&(s.isTrusted=!0),this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||Zr.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler||this.createDefaultErrorHandler((i=n.connectionOptions)===null||i===void 0?void 0:i.maxRestartCount),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions,markdown:s},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=ge.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new La.Delayer(250),this._onReady=new Promise((o,f)=>{this._onReadyCallbacks=new zi(o,f)}),this._onStop=void 0,this._telemetryEmitter=new v.Emitter,this._stateChangeEmitter=new v.Emitter,this._trace=v.Trace.Off,this._tracer={log:(o,f)=>{ue.string(o)?this.logTrace(o,f):this.logObjectTrace(o)}},this._c2p=eh.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=th.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){return this.state===ge.Running?Sn.Running:this.state===ge.Starting?Sn.Starting:Sn.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(n){throw this.error(`Sending request ${ue.string(e)?e:e.method} failed.`,n),n}}onRequest(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onRequest(e,t)}catch(n){throw this.error(`Registering request handler ${ue.string(e)?e:e.method} failed.`,n),n}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(n){throw this.error(`Sending notification ${ue.string(e)?e:e.method} failed.`,n),n}}onNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onNotification(e,t)}catch(n){throw this.error(`Registering notification handler ${ue.string(e)?e:e.method} failed.`,n),n}}onProgress(e,t,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{if(v.WorkDoneProgress.is(e)){let i=this._clientOptions.middleware.handleWorkDoneProgress;if(i!==void 0)return this._resolvedConnection.onProgress(e,t,s=>{i(t,s,()=>n(s))})}return this._resolvedConnection.onProgress(e,t,n)}catch(i){throw this.error(`Registering progress handler for token ${t} failed.`,i),i}}sendProgress(e,t,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,t,n)}catch(i){throw this.error(`Sending progress for token ${t} failed.`,i),i}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=j.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new Aa(this._name,e??4)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(t=>{t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof v.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?ue.string(e.stack)?e.stack:e.message:ue.string(e)?e:e.toString()}info(e,t,n=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=Zr.Info&&this.showNotificationMessage()}warn(e,t,n=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=Zr.Warn&&this.showNotificationMessage()}error(e,t,n=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=Zr.Error&&this.showNotificationMessage()}showNotificationMessage(){j.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===ge.Initial||this.state===ge.Stopping||this.state===ge.Stopped}needsStop(){return this.state===ge.Starting||this.state===ge.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===ge.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new zi(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?j.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):j.languages.createDiagnosticCollection()),this.state=ge.Starting,this.resolveConnection().then(e=>(e.onLogMessage(t=>{switch(t.type){case v.MessageType.Error:this.error(t.message,void 0,!1);break;case v.MessageType.Warning:this.warn(t.message,void 0,!1);break;case v.MessageType.Info:this.info(t.message,void 0,!1);break;default:this.outputChannel.appendLine(t.message)}}),e.onShowMessage(t=>{switch(t.type){case v.MessageType.Error:j.window.showErrorMessage(t.message);break;case v.MessageType.Warning:j.window.showWarningMessage(t.message);break;case v.MessageType.Info:j.window.showInformationMessage(t.message);break;default:j.window.showInformationMessage(t.message)}}),e.onRequest(v.ShowMessageRequest.type,t=>{let n;switch(t.type){case v.MessageType.Error:n=j.window.showErrorMessage;break;case v.MessageType.Warning:n=j.window.showWarningMessage;break;case v.MessageType.Info:n=j.window.showInformationMessage;break;default:n=j.window.showInformationMessage}let i=t.actions||[];return n(t.message,...i)}),e.onTelemetry(t=>{this._telemetryEmitter.fire(t)}),e.onRequest(v.ShowDocumentRequest.type,async t=>{var n;let i=async o=>{let f=this.protocol2CodeConverter.asUri(o.uri);try{if(o.external===!0)return{success:await j.env.openExternal(f)};{let l={};return o.selection!==void 0&&(l.selection=this.protocol2CodeConverter.asRange(o.selection)),o.takeFocus===void 0||o.takeFocus===!1?l.preserveFocus=!0:o.takeFocus===!0&&(l.preserveFocus=!1),await j.window.showTextDocument(f,l),{success:!0}}}catch{return{success:!0}}},s=(n=this._clientOptions.middleware.window)===null||n===void 0?void 0:n.showDocument;return s!==void 0?s(t,i):i(t)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=ge.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),j.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new j.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),i={processId:null,clientInfo:{name:j.env.appName,version:j.version},locale:this.getLocale(),rootPath:n||null,rootUri:n?this._c2p.asUri(j.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:ue.func(t)?t():t,trace:v.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(i),this._clientOptions.progressOnInitialization){let s=ce.generateUuid(),o=new rh.ProgressPart(e,s);return i.workDoneToken=s,this.doInitialize(e,i).then(f=>(o.done(),f),f=>{throw o.cancel(),f})}else return this.doInitialize(e,i)}doInitialize(e,t){return e.initialize(t).then(n=>{this._resolvedConnection=e,this._initializeResult=n,this.state=ge.Running;let i;return ue.number(n.capabilities.textDocumentSync)?n.capabilities.textDocumentSync===v.TextDocumentSyncKind.None?i={openClose:!1,change:v.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:n.capabilities.textDocumentSync!==void 0&&n.capabilities.textDocumentSync!==null&&(i=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(s=>this.handleDiagnostics(s)),e.onRequest(v.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(v.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(v.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s)),e.sendNotification(v.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),n}).then(void 0,n=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(n)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n)):n instanceof v.ResponseError&&n.data&&n.data.retry?j.window.showErrorMessage(n.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n))}):(n&&n.message&&j.window.showErrorMessage(n.message),this.error("Server initialization failed.",n),this.stop(),this._onReadyCallbacks.reject(n)),n})}_clientGetRootPath(){let e=j.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===ge.Stopping&&this._onStop?this._onStop:(this.state=ge.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.end(),e.dispose(),this.state=ge.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=ge.Stopped,Promise.resolve())}cleanUp(e=!0,t=!0){this._listeners&&(this._listeners.forEach(n=>n.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(n=>n.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let n of this._features.values())n.dispose();e&&this.cleanUpChannel(),t&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var t;let n=this;function i(o){n._fileEvents.push(o),n._fileEventDelayer.trigger(()=>{n.onReady().then(()=>{n.resolveConnection().then(f=>{n.isConnectionActive()&&(n.forceDocumentSync(),f.didChangeWatchedFiles({changes:n._fileEvents})),n._fileEvents=[]})},f=>{n.error("Notify file events failed.",f)})})}let s=(t=this.clientOptions.middleware)===null||t===void 0?void 0:t.workspace;(s==null?void 0:s.didChangeWatchedFile)?s.didChangeWatchedFile(e,i):i(e)}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(v.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(t,n,(s,o)=>this.setDiagnostics(s,o)):this.setDiagnostics(t,n)}setDiagnostics(e,t){!this._diagnostics||this._diagnostics.set(e,t)}createConnection(){let e=(n,i,s)=>{this.handleConnectionError(n,i,s)},t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>nh(n.reader,n.writer,e,t,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===ge.Stopping||this.state===ge.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let e=fr.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===fr.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state===ge.Starting?(this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted.")),this.state=ge.StartFailed):this.state=ge.Stopped,this.cleanUp(!1,!0)):e===fr.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=ge.Initial,this.start())}handleConnectionError(e,t,n){this._clientOptions.errorHandler.error(e,t,n)===Dn.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){j.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let n=j.workspace.getConfiguration(this._id),i=v.Trace.Off,s=v.TraceFormat.Text;if(n){let o=n.get("trace.server","off");typeof o=="string"?i=v.Trace.fromString(o):(i=v.Trace.fromString(n.get("trace.server.verbosity","off")),s=v.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let n;ue.array(t)?n=t:n=[t],!!n&&this._dynamicFeatures.get(v.DidChangeWatchedFilesNotification.type.method).registerRaw(ce.generateUuid(),n)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),Ki.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new lu(this)),this.registerFeature(new Ha(this,this._syncedDocuments)),this.registerFeature(new Ua(this)),this.registerFeature(new Ka(this)),this.registerFeature(new za(this)),this.registerFeature(new $a(this)),this.registerFeature(new Ba(this,this._syncedDocuments)),this.registerFeature(new Ja(this,e=>this.notifyFileEvent(e))),this.registerFeature(new Qa(this)),this.registerFeature(new Xa(this)),this.registerFeature(new Va(this)),this.registerFeature(new Ya(this)),this.registerFeature(new Za(this)),this.registerFeature(new eu(this)),this.registerFeature(new tu(this)),this.registerFeature(new ru(this)),this.registerFeature(new nu(this)),this.registerFeature(new iu(this)),this.registerFeature(new ou(this)),this.registerFeature(new su(this)),this.registerFeature(new au(this)),this.registerFeature(new uu(this)),this.registerFeature(new cu(this)),this.registerFeature(new du(this))}fillInitializeParams(e){for(let t of this._features)ue.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};M(e,"workspace").applyEdit=!0;let t=M(M(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[v.ResourceOperationKind.Create,v.ResourceOperationKind.Rename,v.ResourceOperationKind.Delete],t.failureHandling=v.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let n=M(M(e,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[v.DiagnosticTag.Unnecessary,v.DiagnosticTag.Deprecated]},n.codeDescriptionSupport=!0,n.dataSupport=!0;let i=M(e,"window"),s=M(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let o=M(i,"showDocument");o.support=!0;let f=M(e,"general");f.regularExpressions={engine:"ECMAScript",version:"ES2020"},f.markdown={parser:"marked",version:"1.1.0"};for(let l of this._features)l.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let n of this._features)n.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,n)=>{for(let i of e.registrations){let s=this._dynamicFeatures.get(i.method);if(s===void 0){n(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let o=i.registerOptions||{};o.documentSelector=o.documentSelector||this._clientOptions.documentSelector;let f={id:i.id,registerOptions:o};try{s.register(f)}catch(l){n(l);return}}t()})}handleUnregistrationRequest(e){return new Promise((t,n)=>{for(let i of e.unregisterations){let s=this._dynamicFeatures.get(i.method);if(!s){n(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}s.unregister(i.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,n=new Map;j.workspace.textDocuments.forEach(s=>n.set(s.uri.toString(),s));let i=!1;if(t.documentChanges){for(let s of t.documentChanges)if(v.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let o=n.get(s.textDocument.uri);if(o&&o.version!==s.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):ue.asPromise(j.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(s=>({applied:s})))}handleFailedRequest(e,t,n){if(t instanceof v.ResponseError){if(t.code===v.LSPErrorCodes.RequestCancelled)throw this.makeCancelError();if(t.code===v.LSPErrorCodes.ContentModified)return n}throw this.error(`Request ${e.method} failed.`,t),t}makeCancelError(){let e=new Error(Er.Canceled);return e.name=Er.Canceled,e}};_e.BaseLanguageClient=Er;Er.Canceled="Canceled"});var hu=k(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.ColorProviderFeature=void 0;var Pn=require("vscode"),tn=ve(),sh=ot();function fu(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var pu=class extends sh.TextDocumentFeature{constructor(e){super(e,tn.DocumentColorRequest.type)}fillClientCapabilities(e){fu(fu(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.colorProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t={provideColorPresentations:(n,i,s)=>{let o=this._client,f=(h,_,R)=>{let x={color:h,textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(_.document),range:o.code2ProtocolConverter.asRange(_.range)};return o.sendRequest(tn.ColorPresentationRequest.type,x,R).then(this.asColorPresentations.bind(this),P=>o.handleFailedRequest(tn.ColorPresentationRequest.type,P,null))},l=o.clientOptions.middleware;return l.provideColorPresentations?l.provideColorPresentations(n,i,s,f):f(n,i,s)},provideDocumentColors:(n,i)=>{let s=this._client,o=(l,h)=>{let _={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(l)};return s.sendRequest(tn.DocumentColorRequest.type,_,h).then(this.asColorInformations.bind(this),R=>s.handleFailedRequest(tn.ColorPresentationRequest.type,R,null))},f=s.clientOptions.middleware;return f.provideDocumentColors?f.provideDocumentColors(n,i,o):o(n,i)}};return[Pn.languages.registerColorProvider(e.documentSelector,t),t]}asColor(e){return new Pn.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(t=>new Pn.ColorInformation(this._client.protocol2CodeConverter.asRange(t.range),this.asColor(t.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(t=>{let n=new Pn.ColorPresentation(t.label);return n.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(t.additionalTextEdits),n.textEdit=this._client.protocol2CodeConverter.asTextEdit(t.textEdit),n}):[]}};En.ColorProviderFeature=pu});var vu=k(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.ImplementationFeature=void 0;var ah=require("vscode"),$i=ve(),uh=ot();function gu(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var mu=class extends uh.TextDocumentFeature{constructor(e){super(e,$i.ImplementationRequest.type)}fillClientCapabilities(e){let t=gu(gu(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.implementationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t={provideImplementation:(n,i,s)=>{let o=this._client,f=(h,_,R)=>o.sendRequest($i.ImplementationRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(h,_),R).then(o.protocol2CodeConverter.asDefinitionResult,x=>o.handleFailedRequest($i.ImplementationRequest.type,x,null)),l=o.clientOptions.middleware;return l.provideImplementation?l.provideImplementation(n,i,s,f):f(n,i,s)}};return[ah.languages.registerImplementationProvider(e.documentSelector,t),t]}};kn.ImplementationFeature=mu});var Cu=k(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.TypeDefinitionFeature=void 0;var ch=require("vscode"),Ji=ve(),lh=ot();function qn(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var yu=class extends lh.TextDocumentFeature{constructor(e){super(e,Ji.TypeDefinitionRequest.type)}fillClientCapabilities(e){qn(qn(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=qn(qn(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.typeDefinitionProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t={provideTypeDefinition:(n,i,s)=>{let o=this._client,f=(h,_,R)=>o.sendRequest(Ji.TypeDefinitionRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(h,_),R).then(o.protocol2CodeConverter.asDefinitionResult,x=>o.handleFailedRequest(Ji.TypeDefinitionRequest.type,x,null)),l=o.clientOptions.middleware;return l.provideTypeDefinition?l.provideTypeDefinition(n,i,s,f):f(n,i,s)}};return[ch.languages.registerTypeDefinitionProvider(e.documentSelector,t),t]}};jn.TypeDefinitionFeature=yu});var Ru=k(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.WorkspaceFoldersFeature=kr.arrayDiff=void 0;var dh=xn(),Fn=require("vscode"),Gi=ve();function Qi(r,e){if(r!==void 0)return r[e]}function Xi(r,e){return r.filter(t=>e.indexOf(t)<0)}kr.arrayDiff=Xi;var wu=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return Gi.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=Fn.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(n=>this.asProtocol(n))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(Gi.WorkspaceFoldersRequest.type,s=>{let o=()=>{let l=Fn.workspace.workspaceFolders;return l===void 0?null:l.map(_=>this.asProtocol(_))},f=t.clientOptions.middleware.workspace;return f&&f.workspaceFolders?f.workspaceFolders(s,o):o(s)});let n=Qi(Qi(Qi(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof n=="string"?i=n:n===!0&&(i=dh.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){let t=Xi(this._initialFolders,e),n=Xi(e,this._initialFolders);(n.length>0||t.length>0)&&this.doSendEvent(n,t)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,t){let n={event:{added:e.map(i=>this.asProtocol(i)),removed:t.map(i=>this.asProtocol(i))}};this._client.sendNotification(Gi.DidChangeWorkspaceFoldersNotification.type,n)}register(e){let t=e.id,n=this._client,i=Fn.workspace.onDidChangeWorkspaceFolders(s=>{let o=l=>{this.doSendEvent(l.added,l.removed)},f=n.clientOptions.middleware.workspace;f&&f.didChangeWorkspaceFolders?f.didChangeWorkspaceFolders(s,o):o(s)});this._listeners.set(t,i),this.sendInitialEvent(Fn.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};kr.WorkspaceFoldersFeature=wu});var bu=k(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.FoldingRangeFeature=void 0;var rn=require("vscode"),qr=ve(),fh=ot();function _u(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var nn=class extends fh.TextDocumentFeature{constructor(e){super(e,qr.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=_u(_u(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.foldingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t={provideFoldingRanges:(n,i,s)=>{let o=this._client,f=(h,_,R)=>{let x={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(h)};return o.sendRequest(qr.FoldingRangeRequest.type,x,R).then(nn.asFoldingRanges,P=>o.handleFailedRequest(qr.FoldingRangeRequest.type,P,null))},l=o.clientOptions.middleware;return l.provideFoldingRanges?l.provideFoldingRanges(n,i,s,f):f(n,i,s)}};return[rn.languages.registerFoldingRangeProvider(e.documentSelector,t),t]}static asFoldingRangeKind(e){if(e)switch(e){case qr.FoldingRangeKind.Comment:return rn.FoldingRangeKind.Comment;case qr.FoldingRangeKind.Imports:return rn.FoldingRangeKind.Imports;case qr.FoldingRangeKind.Region:return rn.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(t=>new rn.FoldingRange(t.startLine,t.endLine,nn.asFoldingRangeKind(t.kind))):[]}};On.FoldingRangeFeature=nn});var Du=k(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.DeclarationFeature=void 0;var ph=require("vscode"),Vi=ve(),hh=ot();function xu(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var Tu=class extends hh.TextDocumentFeature{constructor(e){super(e,Vi.DeclarationRequest.type)}fillClientCapabilities(e){let t=xu(xu(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.declarationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t={provideDeclaration:(n,i,s)=>{let o=this._client,f=(h,_,R)=>o.sendRequest(Vi.DeclarationRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(h,_),R).then(o.protocol2CodeConverter.asDeclarationResult,x=>o.handleFailedRequest(Vi.DeclarationRequest.type,x,null)),l=o.clientOptions.middleware;return l.provideDeclaration?l.provideDeclaration(n,i,s,f):f(n,i,s)}};return[ph.languages.registerDeclarationProvider(e.documentSelector,t),t]}};In.DeclarationFeature=Tu});var Eu=k(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.SelectionRangeFeature=void 0;var gh=require("vscode"),Yi=ve(),mh=ot();function Su(r,e){return r[e]===void 0&&(r[e]=Object.create(null)),r[e]}var Pu=class extends mh.TextDocumentFeature{constructor(e){super(e,Yi.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=Su(Su(e,"textDocument"),"selectionRange");t.dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.selectionRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t={provideSelectionRanges:(n,i,s)=>{let o=this._client,f=(h,_,R)=>{let x={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(h),positions:o.code2ProtocolConverter.asPositions(_)};return o.sendRequest(Yi.SelectionRangeRequest.type,x,R).then(P=>o.protocol2CodeConverter.asSelectionRanges(P),P=>o.handleFailedRequest(Yi.SelectionRangeRequest.type,P,null))},l=o.clientOptions.middleware;return l.provideSelectionRanges?l.provideSelectionRanges(n,i,s,f):f(n,i,s)}};return[gh.languages.registerSelectionRangeProvider(e.documentSelector,t),t]}};Ln.SelectionRangeFeature=Pu});var qu=k(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.ProgressFeature=void 0;var vh=ve(),yh=Ui();function Ch(r,e){return r[e]===void 0&&(r[e]=Object.create(null)),r[e]}var ku=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){Ch(e,"window").workDoneProgress=!0}initialize(){let e=this._client,t=i=>{this.activeParts.delete(i)},n=i=>{this.activeParts.add(new yh.ProgressPart(this._client,i.token,t))};e.onRequest(vh.WorkDoneProgressCreateRequest.type,n)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Nn.ProgressFeature=ku});var Iu=k(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.CallHierarchyFeature=void 0;var wh=require("vscode"),pr=ve(),Rh=ot();function ju(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var Fu=class{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,t,n){let i=this.client,s=this.middleware,o=(f,l,h)=>{let _=i.code2ProtocolConverter.asTextDocumentPositionParams(f,l);return i.sendRequest(pr.CallHierarchyPrepareRequest.type,_,h).then(R=>i.protocol2CodeConverter.asCallHierarchyItems(R),R=>i.handleFailedRequest(pr.CallHierarchyPrepareRequest.type,R,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,t,n,o):o(e,t,n)}provideCallHierarchyIncomingCalls(e,t){let n=this.client,i=this.middleware,s=(o,f)=>{let l={item:n.code2ProtocolConverter.asCallHierarchyItem(o)};return n.sendRequest(pr.CallHierarchyIncomingCallsRequest.type,l,f).then(h=>n.protocol2CodeConverter.asCallHierarchyIncomingCalls(h),h=>n.handleFailedRequest(pr.CallHierarchyIncomingCallsRequest.type,h,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,s):s(e,t)}provideCallHierarchyOutgoingCalls(e,t){let n=this.client,i=this.middleware,s=(o,f)=>{let l={item:n.code2ProtocolConverter.asCallHierarchyItem(o)};return n.sendRequest(pr.CallHierarchyOutgoingCallsRequest.type,l,f).then(h=>n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(h),h=>n.handleFailedRequest(pr.CallHierarchyOutgoingCallsRequest.type,h,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,s):s(e,t)}},Ou=class extends Rh.TextDocumentFeature{constructor(e){super(e,pr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=ju(ju(e,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.callHierarchyProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t=this._client,n=new Fu(t);return[wh.languages.registerCallHierarchyProvider(e.documentSelector,n),n]}};An.CallHierarchyFeature=Ou});var Nu=k(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.SemanticTokensFeature=void 0;var Mn=require("vscode"),_h=ot(),Q=ve(),bh=lr();function Wn(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var Lu=class extends _h.TextDocumentFeature{constructor(e){super(e,Q.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=Wn(Wn(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[Q.SemanticTokenTypes.namespace,Q.SemanticTokenTypes.type,Q.SemanticTokenTypes.class,Q.SemanticTokenTypes.enum,Q.SemanticTokenTypes.interface,Q.SemanticTokenTypes.struct,Q.SemanticTokenTypes.typeParameter,Q.SemanticTokenTypes.parameter,Q.SemanticTokenTypes.variable,Q.SemanticTokenTypes.property,Q.SemanticTokenTypes.enumMember,Q.SemanticTokenTypes.event,Q.SemanticTokenTypes.function,Q.SemanticTokenTypes.method,Q.SemanticTokenTypes.macro,Q.SemanticTokenTypes.keyword,Q.SemanticTokenTypes.modifier,Q.SemanticTokenTypes.comment,Q.SemanticTokenTypes.string,Q.SemanticTokenTypes.number,Q.SemanticTokenTypes.regexp,Q.SemanticTokenTypes.operator],t.tokenModifiers=[Q.SemanticTokenModifiers.declaration,Q.SemanticTokenModifiers.definition,Q.SemanticTokenModifiers.readonly,Q.SemanticTokenModifiers.static,Q.SemanticTokenModifiers.deprecated,Q.SemanticTokenModifiers.abstract,Q.SemanticTokenModifiers.async,Q.SemanticTokenModifiers.modification,Q.SemanticTokenModifiers.documentation,Q.SemanticTokenModifiers.defaultLibrary],t.formats=[Q.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,Wn(Wn(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(Q.SemanticTokensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(t,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let t=bh.boolean(e.full)?e.full:e.full!==void 0,n=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,i=new Mn.EventEmitter,s=t?{onDidChangeSemanticTokens:i.event,provideDocumentSemanticTokens:(R,x)=>{let P=this._client,q=P.clientOptions.middleware,O=(X,F)=>{let I={textDocument:P.code2ProtocolConverter.asTextDocumentIdentifier(X)};return P.sendRequest(Q.SemanticTokensRequest.type,I,F).then($=>P.protocol2CodeConverter.asSemanticTokens($),$=>P.handleFailedRequest(Q.SemanticTokensRequest.type,$,null))};return q.provideDocumentSemanticTokens?q.provideDocumentSemanticTokens(R,x,O):O(R,x)},provideDocumentSemanticTokensEdits:n?(R,x,P)=>{let q=this._client,O=q.clientOptions.middleware,X=(F,I,$)=>{let W={textDocument:q.code2ProtocolConverter.asTextDocumentIdentifier(F),previousResultId:I};return q.sendRequest(Q.SemanticTokensDeltaRequest.type,W,$).then(U=>Q.SemanticTokens.is(U)?q.protocol2CodeConverter.asSemanticTokens(U):q.protocol2CodeConverter.asSemanticTokensEdits(U),U=>q.handleFailedRequest(Q.SemanticTokensDeltaRequest.type,U,null))};return O.provideDocumentSemanticTokensEdits?O.provideDocumentSemanticTokensEdits(R,x,P,X):X(R,x,P)}:void 0}:void 0,f=e.range===!0?{provideDocumentRangeSemanticTokens:(R,x,P)=>{let q=this._client,O=q.clientOptions.middleware,X=(F,I,$)=>{let W={textDocument:q.code2ProtocolConverter.asTextDocumentIdentifier(F),range:q.code2ProtocolConverter.asRange(I)};return q.sendRequest(Q.SemanticTokensRangeRequest.type,W,$).then(U=>q.protocol2CodeConverter.asSemanticTokens(U),U=>q.handleFailedRequest(Q.SemanticTokensRangeRequest.type,U,null))};return O.provideDocumentRangeSemanticTokens?O.provideDocumentRangeSemanticTokens(R,x,P,X):X(R,x,P)}}:void 0,l=[],_=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend);return s!==void 0&&l.push(Mn.languages.registerDocumentSemanticTokensProvider(e.documentSelector,s,_)),f!==void 0&&l.push(Mn.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,f,_)),[new Mn.Disposable(()=>l.forEach(R=>R.dispose())),{range:f,full:s,onDidChangeSemanticTokensEmitter:i}]}};Hn.SemanticTokensFeature=Lu});var Wu=k((Ov,Mu)=>{"use strict";function Rt(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function Au(r,e){for(var t="",n=0,i=-1,s=0,o,f=0;f<=r.length;++f){if(f<r.length)o=r.charCodeAt(f);else{if(o===47)break;o=47}if(o===47){if(!(i===f-1||s===1))if(i!==f-1&&s===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",n=0):(t=t.slice(0,l),n=t.length-1-t.lastIndexOf("/")),i=f,s=0;continue}}else if(t.length===2||t.length===1){t="",n=0,i=f,s=0;continue}}e&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+="/"+r.slice(i+1,f):t=r.slice(i+1,f),n=f-i-1;i=f,s=0}else o===46&&s!==-1?++s:s=-1}return t}function xh(r,e){var t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+n:t+r+n:n}var jr={resolve:function(){for(var e="",t=!1,n,i=arguments.length-1;i>=-1&&!t;i--){var s;i>=0?s=arguments[i]:(n===void 0&&(n=process.cwd()),s=n),Rt(s),s.length!==0&&(e=s+"/"+e,t=s.charCodeAt(0)===47)}return e=Au(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Rt(e),e.length===0)return".";var t=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=Au(e,!t),e.length===0&&!t&&(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Rt(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];Rt(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":jr.normalize(e)},relative:function(e,t){if(Rt(e),Rt(t),e===t||(e=jr.resolve(e),t=jr.resolve(t),e===t))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var i=e.length,s=i-n,o=1;o<t.length&&t.charCodeAt(o)===47;++o);for(var f=t.length,l=f-o,h=s<l?s:l,_=-1,R=0;R<=h;++R){if(R===h){if(l>h){if(t.charCodeAt(o+R)===47)return t.slice(o+R+1);if(R===0)return t.slice(o+R)}else s>h&&(e.charCodeAt(n+R)===47?_=R:R===0&&(_=0));break}var x=e.charCodeAt(n+R),P=t.charCodeAt(o+R);if(x!==P)break;x===47&&(_=R)}var q="";for(R=n+_+1;R<=i;++R)(R===i||e.charCodeAt(R)===47)&&(q.length===0?q+="..":q+="/..");return q.length>0?q+t.slice(o+_):(o+=_,t.charCodeAt(o)===47&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Rt(e),e.length===0)return".";for(var t=e.charCodeAt(0),n=t===47,i=-1,s=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),t===47){if(!s){i=o;break}}else s=!1;return i===-1?n?"/":".":n&&i===1?"//":e.slice(0,i)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Rt(e);var n=0,i=-1,s=!0,o;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var f=t.length-1,l=-1;for(o=e.length-1;o>=0;--o){var h=e.charCodeAt(o);if(h===47){if(!s){n=o+1;break}}else l===-1&&(s=!1,l=o+1),f>=0&&(h===t.charCodeAt(f)?--f==-1&&(i=o):(f=-1,i=l))}return n===i?i=l:i===-1&&(i=e.length),e.slice(n,i)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!s){n=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":e.slice(n,i)}},extname:function(e){Rt(e);for(var t=-1,n=0,i=-1,s=!0,o=0,f=e.length-1;f>=0;--f){var l=e.charCodeAt(f);if(l===47){if(!s){n=f+1;break}continue}i===-1&&(s=!1,i=f+1),l===46?t===-1?t=f:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||i===-1||o===0||o===1&&t===i-1&&t===n+1?"":e.slice(t,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return xh("/",e)},parse:function(e){Rt(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var n=e.charCodeAt(0),i=n===47,s;i?(t.root="/",s=1):s=0;for(var o=-1,f=0,l=-1,h=!0,_=e.length-1,R=0;_>=s;--_){if(n=e.charCodeAt(_),n===47){if(!h){f=_+1;break}continue}l===-1&&(h=!1,l=_+1),n===46?o===-1?o=_:R!==1&&(R=1):o!==-1&&(R=-1)}return o===-1||l===-1||R===0||R===1&&o===l-1&&o===f+1?l!==-1&&(f===0&&i?t.base=t.name=e.slice(1,l):t.base=t.name=e.slice(f,l)):(f===0&&i?(t.name=e.slice(1,o),t.base=e.slice(1,l)):(t.name=e.slice(f,o),t.base=e.slice(f,l)),t.ext=e.slice(o,l)),f>0?t.dir=e.slice(0,f-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};jr.posix=jr;Mu.exports=jr});var Hu={};To(Hu,{_makeLong:()=>re._makeLong,basename:()=>re.basename,default:()=>re.default,delimiter:()=>re.delimiter,dirname:()=>re.dirname,extname:()=>re.extname,format:()=>re.format,isAbsolute:()=>re.isAbsolute,join:()=>re.join,normalize:()=>re.normalize,parse:()=>re.parse,posix:()=>re.posix,relative:()=>re.relative,resolve:()=>re.resolve,sep:()=>re.sep,win32:()=>re.win32});var re,Bu=_l(()=>{re=Cr(Wu())});var Ku=k((Iv,Uu)=>{Uu.exports=function(r,e){for(var t=[],n=0;n<r.length;n++){var i=e(r[n],n);Th(i)?t.push.apply(t,i):t.push(i)}return t};var Th=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"}});var Qu=k((Lv,Gu)=>{"use strict";Gu.exports=zu;function zu(r,e,t){r instanceof RegExp&&(r=$u(r,t)),e instanceof RegExp&&(e=$u(e,t));var n=Ju(r,e,t);return n&&{start:n[0],end:n[1],pre:t.slice(0,n[0]),body:t.slice(n[0]+r.length,n[1]),post:t.slice(n[1]+e.length)}}function $u(r,e){var t=e.match(r);return t?t[0]:null}zu.range=Ju;function Ju(r,e,t){var n,i,s,o,f,l=t.indexOf(r),h=t.indexOf(e,l+1),_=l;if(l>=0&&h>0){if(r===e)return[l,h];for(n=[],s=t.length;_>=0&&!f;)_==l?(n.push(_),l=t.indexOf(r,_+1)):n.length==1?f=[n.pop(),h]:(i=n.pop(),i<s&&(s=i,o=h),h=t.indexOf(e,_+1)),_=l<h&&l>=0?l:h;n.length&&(f=[s,o])}return f}});var nc=k((Nv,rc)=>{var Dh=Ku(),Xu=Qu();rc.exports=Eh;var Vu="\0SLASH"+Math.random()+"\0",Yu="\0OPEN"+Math.random()+"\0",Zi="\0CLOSE"+Math.random()+"\0",Zu="\0COMMA"+Math.random()+"\0",ec="\0PERIOD"+Math.random()+"\0";function eo(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}function Sh(r){return r.split("\\\\").join(Vu).split("\\{").join(Yu).split("\\}").join(Zi).split("\\,").join(Zu).split("\\.").join(ec)}function Ph(r){return r.split(Vu).join("\\").split(Yu).join("{").split(Zi).join("}").split(Zu).join(",").split(ec).join(".")}function tc(r){if(!r)return[""];var e=[],t=Xu("{","}",r);if(!t)return r.split(",");var n=t.pre,i=t.body,s=t.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var f=tc(s);return s.length&&(o[o.length-1]+=f.shift(),o.push.apply(o,f)),e.push.apply(e,o),e}function Eh(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),Fr(Sh(r),!0).map(Ph)):[]}function kh(r){return"{"+r+"}"}function qh(r){return/^-?0\d/.test(r)}function jh(r,e){return r<=e}function Fh(r,e){return r>=e}function Fr(r,e){var t=[],n=Xu("{","}",r);if(!n||/\$$/.test(n.pre))return[r];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),o=i||s,f=n.body.indexOf(",")>=0;if(!o&&!f)return n.post.match(/,.*\}/)?(r=n.pre+"{"+n.body+Zi+n.post,Fr(r)):[r];var l;if(o)l=n.body.split(/\.\./);else if(l=tc(n.body),l.length===1&&(l=Fr(l[0],!1).map(kh),l.length===1)){var _=n.post.length?Fr(n.post,!1):[""];return _.map(function(Se){return n.pre+l[0]+Se})}var h=n.pre,_=n.post.length?Fr(n.post,!1):[""],R;if(o){var x=eo(l[0]),P=eo(l[1]),q=Math.max(l[0].length,l[1].length),O=l.length==3?Math.abs(eo(l[2])):1,X=jh,F=P<x;F&&(O*=-1,X=Fh);var I=l.some(qh);R=[];for(var $=x;X($,P);$+=O){var W;if(s)W=String.fromCharCode($),W==="\\"&&(W="");else if(W=String($),I){var U=q-W.length;if(U>0){var V=new Array(U+1).join("0");$<0?W="-"+V+W.slice(1):W=V+W}}R.push(W)}}else R=Dh(l,function(De){return Fr(De,!1)});for(var se=0;se<R.length;se++)for(var de=0;de<_.length;de++){var fe=h+R[se]+_[de];(!e||o||fe)&&t.push(fe)}return t}});var lc=k((Av,cc)=>{cc.exports=st;st.Minimatch=qe;var on={sep:"/"};try{on=(Bu(),Hu)}catch{}var to=st.GLOBSTAR=qe.GLOBSTAR={},Oh=nc(),ic={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},ro="[^/]",no=ro+"*?",Ih="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Lh="(?:(?!(?:\\/|^)\\.).)*?",oc=Nh("().*{}+?[]^$\\!");function Nh(r){return r.split("").reduce(function(e,t){return e[t]=!0,e},{})}var sc=/\/+/;st.filter=Ah;function Ah(r,e){return e=e||{},function(t,n,i){return st(t,r,e)}}function ac(r,e){r=r||{},e=e||{};var t={};return Object.keys(e).forEach(function(n){t[n]=e[n]}),Object.keys(r).forEach(function(n){t[n]=r[n]}),t}st.defaults=function(r){if(!r||!Object.keys(r).length)return st;var e=st,t=function(i,s,o){return e.minimatch(i,s,ac(r,o))};return t.Minimatch=function(i,s){return new e.Minimatch(i,ac(r,s))},t};qe.defaults=function(r){return!r||!Object.keys(r).length?qe:st.defaults(r).Minimatch};function st(r,e,t){if(typeof e!="string")throw new TypeError("glob pattern string required");return t||(t={}),!t.nocomment&&e.charAt(0)==="#"?!1:e.trim()===""?r==="":new qe(e,t).match(r)}function qe(r,e){if(!(this instanceof qe))return new qe(r,e);if(typeof r!="string")throw new TypeError("glob pattern string required");e||(e={}),r=r.trim(),on.sep!=="/"&&(r=r.split(on.sep).join("/")),this.options=e,this.set=[],this.pattern=r,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}qe.prototype.debug=function(){};qe.prototype.make=Mh;function Mh(){if(!this._made){var r=this.pattern,e=this.options;if(!e.nocomment&&r.charAt(0)==="#"){this.comment=!0;return}if(!r){this.empty=!0;return}this.parseNegate();var t=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error),this.debug(this.pattern,t),t=this.globParts=t.map(function(n){return n.split(sc)}),this.debug(this.pattern,t),t=t.map(function(n,i,s){return n.map(this.parse,this)},this),this.debug(this.pattern,t),t=t.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,t),this.set=t}}qe.prototype.parseNegate=Wh;function Wh(){var r=this.pattern,e=!1,t=this.options,n=0;if(!t.nonegate){for(var i=0,s=r.length;i<s&&r.charAt(i)==="!";i++)e=!e,n++;n&&(this.pattern=r.substr(n)),this.negate=e}}st.braceExpand=function(r,e){return uc(r,e)};qe.prototype.braceExpand=uc;function uc(r,e){if(e||(this instanceof qe?e=this.options:e={}),r=typeof r=="undefined"?this.pattern:r,typeof r=="undefined")throw new TypeError("undefined pattern");return e.nobrace||!r.match(/\{.*\}/)?[r]:Oh(r)}qe.prototype.parse=Hh;var Bn={};function Hh(r,e){if(r.length>1024*64)throw new TypeError("pattern is too long");var t=this.options;if(!t.noglobstar&&r==="**")return to;if(r==="")return"";var n="",i=!!t.nocase,s=!1,o=[],f=[],l,h=!1,_=-1,R=-1,x=r.charAt(0)==="."?"":t.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",P=this;function q(){if(l){switch(l){case"*":n+=no,i=!0;break;case"?":n+=ro,i=!0;break;default:n+="\\"+l;break}P.debug("clearStateChar %j %j",l,n),l=!1}}for(var O=0,X=r.length,F;O<X&&(F=r.charAt(O));O++){if(this.debug("%s	%s %s %j",r,O,n,F),s&&oc[F]){n+="\\"+F,s=!1;continue}switch(F){case"/":return!1;case"\\":q(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",r,O,n,F),h){this.debug("  in class"),F==="!"&&O===R+1&&(F="^"),n+=F;continue}P.debug("call clearStateChar %j",l),q(),l=F,t.noext&&q();continue;case"(":if(h){n+="(";continue}if(!l){n+="\\(";continue}o.push({type:l,start:O-1,reStart:n.length,open:ic[l].open,close:ic[l].close}),n+=l==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",l,n),l=!1;continue;case")":if(h||!o.length){n+="\\)";continue}q(),i=!0;var I=o.pop();n+=I.close,I.type==="!"&&f.push(I),I.reEnd=n.length;continue;case"|":if(h||!o.length||s){n+="\\|",s=!1;continue}q(),n+="|";continue;case"[":if(q(),h){n+="\\"+F;continue}h=!0,R=O,_=n.length,n+=F;continue;case"]":if(O===R+1||!h){n+="\\"+F,s=!1;continue}if(h){var $=r.substring(R+1,O);try{RegExp("["+$+"]")}catch{var W=this.parse($,Bn);n=n.substr(0,_)+"\\["+W[0]+"\\]",i=i||W[1],h=!1;continue}}i=!0,h=!1,n+=F;continue;default:q(),s?s=!1:oc[F]&&!(F==="^"&&h)&&(n+="\\"),n+=F}}for(h&&($=r.substr(R+1),W=this.parse($,Bn),n=n.substr(0,_)+"\\["+W[0],i=i||W[1]),I=o.pop();I;I=o.pop()){var U=n.slice(I.reStart+I.open.length);this.debug("setting tail",n,I),U=U.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Ge,Ve,ct){return ct||(ct="\\"),Ve+Ve+ct+"|"}),this.debug(`tail=%j
   %s`,U,U,I,n);var V=I.type==="*"?no:I.type==="?"?ro:"\\"+I.type;i=!0,n=n.slice(0,I.reStart)+V+"\\("+U}q(),s&&(n+="\\\\");var se=!1;switch(n.charAt(0)){case".":case"[":case"(":se=!0}for(var de=f.length-1;de>-1;de--){var fe=f[de],De=n.slice(0,fe.reStart),Se=n.slice(fe.reStart,fe.reEnd-8),Be=n.slice(fe.reEnd-8,fe.reEnd),Ne=n.slice(fe.reEnd);Be+=Ne;var Ue=De.split("(").length-1,Ae=Ne;for(O=0;O<Ue;O++)Ae=Ae.replace(/\)[+*?]?/,"");Ne=Ae;var Xe="";Ne===""&&e!==Bn&&(Xe="$");var le=De+Se+Ne+Xe+Be;n=le}if(n!==""&&i&&(n="(?=.)"+n),se&&(n=x+n),e===Bn)return[n,i];if(!i)return Kh(r);var ut=t.nocase?"i":"";try{var Te=new RegExp("^"+n+"$",ut)}catch{return new RegExp("$.")}return Te._glob=r,Te._src=n,Te}st.makeRe=function(r,e){return new qe(r,e||{}).makeRe()};qe.prototype.makeRe=Bh;function Bh(){if(this.regexp||this.regexp===!1)return this.regexp;var r=this.set;if(!r.length)return this.regexp=!1,this.regexp;var e=this.options,t=e.noglobstar?no:e.dot?Ih:Lh,n=e.nocase?"i":"",i=r.map(function(s){return s.map(function(o){return o===to?t:typeof o=="string"?zh(o):o._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch{this.regexp=!1}return this.regexp}st.match=function(r,e,t){t=t||{};var n=new qe(e,t);return r=r.filter(function(i){return n.match(i)}),n.options.nonull&&!r.length&&r.push(e),r};qe.prototype.match=Uh;function Uh(r,e){if(this.debug("match",r,this.pattern),this.comment)return!1;if(this.empty)return r==="";if(r==="/"&&e)return!0;var t=this.options;on.sep!=="/"&&(r=r.split(on.sep).join("/")),r=r.split(sc),this.debug(this.pattern,"split",r);var n=this.set;this.debug(this.pattern,"set",n);var i,s;for(s=r.length-1;s>=0&&(i=r[s],!i);s--);for(s=0;s<n.length;s++){var o=n[s],f=r;t.matchBase&&o.length===1&&(f=[i]);var l=this.matchOne(f,o,e);if(l)return t.flipNegate?!0:!this.negate}return t.flipNegate?!1:this.negate}qe.prototype.matchOne=function(r,e,t){var n=this.options;this.debug("matchOne",{this:this,file:r,pattern:e}),this.debug("matchOne",r.length,e.length);for(var i=0,s=0,o=r.length,f=e.length;i<o&&s<f;i++,s++){this.debug("matchOne loop");var l=e[s],h=r[i];if(this.debug(e,l,h),l===!1)return!1;if(l===to){this.debug("GLOBSTAR",[e,l,h]);var _=i,R=s+1;if(R===f){for(this.debug("** at the end");i<o;i++)if(r[i]==="."||r[i]===".."||!n.dot&&r[i].charAt(0)===".")return!1;return!0}for(;_<o;){var x=r[_];if(this.debug(`
globstar while`,r,_,e,R,x),this.matchOne(r.slice(_),e.slice(R),t))return this.debug("globstar found match!",_,o,x),!0;if(x==="."||x===".."||!n.dot&&x.charAt(0)==="."){this.debug("dot detected!",r,_,e,R);break}this.debug("globstar swallow a segment, and continue"),_++}return!!(t&&(this.debug(`
>>> no match, partial?`,r,_,e,R),_===o))}var P;if(typeof l=="string"?(n.nocase?P=h.toLowerCase()===l.toLowerCase():P=h===l,this.debug("string match",l,h,P)):(P=h.match(l),this.debug("pattern match",l,h,P)),!P)return!1}if(i===o&&s===f)return!0;if(i===o)return t;if(s===f){var q=i===o-1&&r[i]==="";return q}throw new Error("wtf?")};function Kh(r){return r.replace(/\\(.)/g,"$1")}function zh(r){return r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var Cc=k($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.WillDeleteFilesFeature=$e.WillRenameFilesFeature=$e.WillCreateFilesFeature=$e.DidDeleteFilesFeature=$e.DidRenameFilesFeature=$e.DidCreateFilesFeature=void 0;var _t=require("vscode"),$h=lc(),Lt=ve(),Jh=xn();function dc(r,e){return r[e]===void 0&&(r[e]={}),r[e]}function Gh(r,e){return r[e]}function fc(r,e,t){r[e]=t}var hr=class{constructor(e,t,n,i,s){this._filters=new Map,this._client=e,this._event=t,this._registrationType=n,this._clientCapability=i,this._serverCapability=s}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=dc(dc(e,"workspace"),"fileOperations");fc(t,"dynamicRegistration",!0),fc(t,this._clientCapability,!0)}initialize(e){var t;let n=(t=e.workspace)===null||t===void 0?void 0:t.fileOperations,i=n!==void 0?Gh(n,this._serverCapability):void 0;if((i==null?void 0:i.filters)!==void 0)try{this.register({id:Jh.generateUuid(),registerOptions:{filters:i.filters}})}catch(s){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${s}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(n=>{let i=new $h.Minimatch(n.pattern.glob,hr.asMinimatchOptions(n.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${n.pattern.glob}!`);return{scheme:n.scheme,matcher:i,kind:n.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async filter(e,t){let n=await Promise.all(e.files.map(async s=>{let o=t(s),f=o.fsPath.replace(/\\/g,"/");for(let l of this._filters.values())for(let h of l)if(!(h.scheme!==void 0&&h.scheme!==o.scheme)){if(h.matcher.match(f)){if(h.kind===void 0)return!0;let _=await hr.getFileType(o);if(_===void 0)return this._client.error(`Failed to determine file type for ${o.toString()}.`),!0;if(_===_t.FileType.File&&h.kind===Lt.FileOperationPatternKind.file||_===_t.FileType.Directory&&h.kind===Lt.FileOperationPatternKind.folder)return!0}else if(h.kind===Lt.FileOperationPatternKind.folder&&await hr.getFileType(o)===_t.FileType.Directory&&h.matcher.match(`${f}/`))return!0}return!1})),i=e.files.filter((s,o)=>n[o]);return Object.assign(Object.assign({},e),{files:i})}static async getFileType(e){try{return(await _t.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},Un=class extends hr{constructor(e,t,n,i,s,o,f){super(e,t,n,i,s);this._notificationType=n,this._accessUri=o,this._createParams=f}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let n=async i=>{this._client.sendNotification(this._notificationType,this._createParams(i))};this.doSend(t,n)}}},pc=class extends Un{constructor(e){super(e,_t.workspace.onDidCreateFiles,Lt.DidCreateFilesNotification.type,"didCreate","didCreate",t=>t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return(i==null?void 0:i.didCreateFiles)?i.didCreateFiles(e,t):t(e)}};$e.DidCreateFilesFeature=pc;var hc=class extends Un{constructor(e){super(e,_t.workspace.onDidRenameFiles,Lt.DidRenameFilesNotification.type,"didRename","didRename",t=>t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}doSend(e,t){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return(i==null?void 0:i.didRenameFiles)?i.didRenameFiles(e,t):t(e)}};$e.DidRenameFilesFeature=hc;var gc=class extends Un{constructor(e){super(e,_t.workspace.onDidDeleteFiles,Lt.DidDeleteFilesNotification.type,"didDelete","didDelete",t=>t,e.code2ProtocolConverter.asDidDeleteFilesParams)}doSend(e,t){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return(i==null?void 0:i.didDeleteFiles)?i.didDeleteFiles(e,t):t(e)}};$e.DidDeleteFilesFeature=gc;var Kn=class extends hr{constructor(e,t,n,i,s,o,f){super(e,t,n,i,s);this._requestType=n,this._accessUri=o,this._createParams=f}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let n=i=>this._client.sendRequest(this._requestType,this._createParams(i)).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,n)}else return}},mc=class extends Kn{constructor(e){super(e,_t.workspace.onWillCreateFiles,Lt.WillCreateFilesRequest.type,"willCreate","willCreate",t=>t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return(i==null?void 0:i.willCreateFiles)?i.willCreateFiles(e,t):t(e)}};$e.WillCreateFilesFeature=mc;var vc=class extends Kn{constructor(e){super(e,_t.workspace.onWillRenameFiles,Lt.WillRenameFilesRequest.type,"willRename","willRename",t=>t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return(i==null?void 0:i.willRenameFiles)?i.willRenameFiles(e,t):t(e)}};$e.WillRenameFilesFeature=vc;var yc=class extends Kn{constructor(e){super(e,_t.workspace.onWillDeleteFiles,Lt.WillDeleteFilesRequest.type,"willDelete","willDelete",t=>t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return(i==null?void 0:i.willDeleteFiles)?i.willDeleteFiles(e,t):t(e)}};$e.WillDeleteFilesFeature=yc});var _c=k(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.LinkedEditingFeature=void 0;var Qh=require("vscode"),io=ve(),Xh=ot();function wc(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var Rc=class extends Xh.TextDocumentFeature{constructor(e){super(e,io.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=wc(wc(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t={provideLinkedEditingRanges:(n,i,s)=>{let o=this._client,f=(h,_,R)=>o.sendRequest(io.LinkedEditingRangeRequest.type,o.code2ProtocolConverter.asTextDocumentPositionParams(h,_),R).then(o.protocol2CodeConverter.asLinkedEditingRanges,x=>o.handleFailedRequest(io.LinkedEditingRangeRequest.type,x,null)),l=o.clientOptions.middleware;return l.provideLinkedEditingRange?l.provideLinkedEditingRange(n,i,s,f):f(n,i,s)}};return[Qh.languages.registerLinkedEditingRangeProvider(e.documentSelector,t),t]}};zn.LinkedEditingFeature=Rc});var Tc=k(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.ProposedFeatures=gr.CommonLanguageClient=void 0;var Vh=ot(),Yh=hu(),Zh=Ei(),eg=vu(),tg=Cu(),rg=Ru(),ng=bu(),ig=Du(),og=Eu(),sg=qu(),ag=Iu(),ug=Nu(),Or=Cc(),cg=_c(),bc=class extends Vh.BaseLanguageClient{constructor(e,t,n){super(e,t,n)}registerProposedFeatures(){this.registerFeatures(xc.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new Zh.ConfigurationFeature(this)),this.registerFeature(new tg.TypeDefinitionFeature(this)),this.registerFeature(new eg.ImplementationFeature(this)),this.registerFeature(new Yh.ColorProviderFeature(this)),this.registerFeature(new rg.WorkspaceFoldersFeature(this)),this.registerFeature(new ng.FoldingRangeFeature(this)),this.registerFeature(new ig.DeclarationFeature(this)),this.registerFeature(new og.SelectionRangeFeature(this)),this.registerFeature(new sg.ProgressFeature(this)),this.registerFeature(new ag.CallHierarchyFeature(this)),this.registerFeature(new ug.SemanticTokensFeature(this)),this.registerFeature(new cg.LinkedEditingFeature(this)),this.registerFeature(new Or.DidCreateFilesFeature(this)),this.registerFeature(new Or.DidRenameFilesFeature(this)),this.registerFeature(new Or.DidDeleteFilesFeature(this)),this.registerFeature(new Or.WillCreateFilesFeature(this)),this.registerFeature(new Or.WillRenameFilesFeature(this)),this.registerFeature(new Or.WillDeleteFilesFeature(this))}};gr.CommonLanguageClient=bc;var xc;(function(r){function e(t){return[]}r.createAll=e})(xc=gr.ProposedFeatures||(gr.ProposedFeatures={}))});var so=k(Nt=>{"use strict";var lg=Nt&&Nt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),oo=Nt&&Nt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&lg(e,r,t)};Object.defineProperty(Nt,"__esModule",{value:!0});oo(ve(),Nt);oo(ot(),Nt);oo(Tc(),Nt)});var ao=k((Uv,Dc)=>{"use strict";Dc.exports=ve()});var uo=k(bt=>{"use strict";var dg=bt&&bt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Sc=bt&&bt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&dg(e,r,t)};Object.defineProperty(bt,"__esModule",{value:!0});bt.LanguageClient=void 0;var fg=so(),Pc=ao();Sc(ao(),bt);Sc(so(),bt);var Ec=class extends fg.CommonLanguageClient{constructor(e,t,n,i){super(e,t,n);this.worker=i}createMessageTransports(e){let t=new Pc.BrowserMessageReader(this.worker),n=new Pc.BrowserMessageWriter(this.worker);return Promise.resolve({reader:t,writer:n})}getLocale(){return"en"}};bt.LanguageClient=Ec});var qc=k((zv,kc)=>{"use strict";kc.exports=uo()});var Qc=k(Gn=>{"use strict";Gn.byteLength=zg;Gn.toByteArray=Jg;Gn.fromByteArray=Xg;var xt=[],at=[],Kg=typeof Uint8Array!="undefined"?Uint8Array:Array,go="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(mr=0,Jc=go.length;mr<Jc;++mr)xt[mr]=go[mr],at[go.charCodeAt(mr)]=mr;var mr,Jc;at["-".charCodeAt(0)]=62;at["_".charCodeAt(0)]=63;function Gc(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function zg(r){var e=Gc(r),t=e[0],n=e[1];return(t+n)*3/4-n}function $g(r,e,t){return(e+t)*3/4-t}function Jg(r){var e,t=Gc(r),n=t[0],i=t[1],s=new Kg($g(r,n,i)),o=0,f=i>0?n-4:n,l;for(l=0;l<f;l+=4)e=at[r.charCodeAt(l)]<<18|at[r.charCodeAt(l+1)]<<12|at[r.charCodeAt(l+2)]<<6|at[r.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=at[r.charCodeAt(l)]<<2|at[r.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=at[r.charCodeAt(l)]<<10|at[r.charCodeAt(l+1)]<<4|at[r.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Gg(r){return xt[r>>18&63]+xt[r>>12&63]+xt[r>>6&63]+xt[r&63]}function Qg(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(Gg(n));return i.join("")}function Xg(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,f=t-n;o<f;o+=s)i.push(Qg(r,o,o+s>f?f:o+s));return n===1?(e=r[t-1],i.push(xt[e>>2]+xt[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(xt[e>>10]+xt[e>>4&63]+xt[e<<2&63]+"=")),i.join("")}});var Xc=k(mo=>{mo.read=function(r,e,t,n,i){var s,o,f=i*8-n-1,l=(1<<f)-1,h=l>>1,_=-7,R=t?i-1:0,x=t?-1:1,P=r[e+R];for(R+=x,s=P&(1<<-_)-1,P>>=-_,_+=f;_>0;s=s*256+r[e+R],R+=x,_-=8);for(o=s&(1<<-_)-1,s>>=-_,_+=n;_>0;o=o*256+r[e+R],R+=x,_-=8);if(s===0)s=1-h;else{if(s===l)return o?NaN:(P?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-h}return(P?-1:1)*o*Math.pow(2,s-n)};mo.write=function(r,e,t,n,i,s){var o,f,l,h=s*8-i-1,_=(1<<h)-1,R=_>>1,x=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=n?0:s-1,q=n?1:-1,O=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(f=isNaN(e)?1:0,o=_):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+R>=1?e+=x/l:e+=x*Math.pow(2,1-R),e*l>=2&&(o++,l/=2),o+R>=_?(f=0,o=_):o+R>=1?(f=(e*l-1)*Math.pow(2,i),o=o+R):(f=e*Math.pow(2,R-1)*Math.pow(2,i),o=0));i>=8;r[t+P]=f&255,P+=q,f/=256,i-=8);for(o=o<<i|f,h+=i;h>0;r[t+P]=o&255,P+=q,o/=256,h-=8);r[t+P-q]|=O*128}});var cl=k(Nr=>{"use strict";var vo=Qc(),Lr=Xc(),Vc=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Nr.Buffer=D;Nr.SlowBuffer=rm;Nr.INSPECT_MAX_BYTES=50;var Qn=2147483647;Nr.kMaxLength=Qn;D.TYPED_ARRAY_SUPPORT=Vg();!D.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Vg(){try{var r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(D.prototype,"parent",{enumerable:!0,get:function(){if(!!D.isBuffer(this))return this.buffer}});Object.defineProperty(D.prototype,"offset",{enumerable:!0,get:function(){if(!!D.isBuffer(this))return this.byteOffset}});function Mt(r){if(r>Qn)throw new RangeError('The value "'+r+'" is invalid for option "size"');var e=new Uint8Array(r);return Object.setPrototypeOf(e,D.prototype),e}function D(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return yo(r)}return Yc(r,e,t)}D.poolSize=8192;function Yc(r,e,t){if(typeof r=="string")return Zg(r,e);if(ArrayBuffer.isView(r))return em(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(Tt(r,ArrayBuffer)||r&&Tt(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Tt(r,SharedArrayBuffer)||r&&Tt(r.buffer,SharedArrayBuffer)))return wo(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return D.from(n,e,t);var i=tm(r);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return D.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}D.from=function(r,e,t){return Yc(r,e,t)};Object.setPrototypeOf(D.prototype,Uint8Array.prototype);Object.setPrototypeOf(D,Uint8Array);function Zc(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Yg(r,e,t){return Zc(r),r<=0?Mt(r):e!==void 0?typeof t=="string"?Mt(r).fill(e,t):Mt(r).fill(e):Mt(r)}D.alloc=function(r,e,t){return Yg(r,e,t)};function yo(r){return Zc(r),Mt(r<0?0:Ro(r)|0)}D.allocUnsafe=function(r){return yo(r)};D.allocUnsafeSlow=function(r){return yo(r)};function Zg(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!D.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var t=el(r,e)|0,n=Mt(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Co(r){for(var e=r.length<0?0:Ro(r.length)|0,t=Mt(e),n=0;n<e;n+=1)t[n]=r[n]&255;return t}function em(r){if(Tt(r,Uint8Array)){var e=new Uint8Array(r);return wo(e.buffer,e.byteOffset,e.byteLength)}return Co(r)}function wo(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');var n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,D.prototype),n}function tm(r){if(D.isBuffer(r)){var e=Ro(r.length)|0,t=Mt(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||bo(r.length)?Mt(0):Co(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Co(r.data)}function Ro(r){if(r>=Qn)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Qn.toString(16)+" bytes");return r|0}function rm(r){return+r!=r&&(r=0),D.alloc(+r)}D.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==D.prototype};D.compare=function(e,t){if(Tt(e,Uint8Array)&&(e=D.from(e,e.offset,e.byteLength)),Tt(t,Uint8Array)&&(t=D.from(t,t.offset,t.byteLength)),!D.isBuffer(e)||!D.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==t[s]){n=e[s],i=t[s];break}return n<i?-1:i<n?1:0};D.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};D.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return D.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=D.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){var o=e[n];if(Tt(o,Uint8Array))s+o.length>i.length?D.from(o).copy(i,s):Uint8Array.prototype.set.call(i,o,s);else if(D.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function el(r,e){if(D.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||Tt(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);var t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return _o(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return ul(r).length;default:if(i)return n?-1:_o(r).length;e=(""+e).toLowerCase(),i=!0}}D.byteLength=el;function nm(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return pm(this,e,t);case"utf8":case"utf-8":return nl(this,e,t);case"ascii":return dm(this,e,t);case"latin1":case"binary":return fm(this,e,t);case"base64":return cm(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return hm(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}D.prototype._isBuffer=!0;function vr(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}D.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)vr(this,t,t+1);return this};D.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)vr(this,t,t+3),vr(this,t+1,t+2);return this};D.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)vr(this,t,t+7),vr(this,t+1,t+6),vr(this,t+2,t+5),vr(this,t+3,t+4);return this};D.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?nl(this,0,e):nm.apply(this,arguments)};D.prototype.toLocaleString=D.prototype.toString;D.prototype.equals=function(e){if(!D.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:D.compare(this,e)===0};D.prototype.inspect=function(){var e="",t=Nr.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Vc&&(D.prototype[Vc]=D.prototype.inspect);D.prototype.compare=function(e,t,n,i,s){if(Tt(e,Uint8Array)&&(e=D.from(e,e.offset,e.byteLength)),!D.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),t<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=n)return 0;if(i>=s)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var o=s-i,f=n-t,l=Math.min(o,f),h=this.slice(i,s),_=e.slice(t,n),R=0;R<l;++R)if(h[R]!==_[R]){o=h[R],f=_[R];break}return o<f?-1:f<o?1:0};function tl(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,bo(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=D.from(e,n)),D.isBuffer(e))return e.length===0?-1:rl(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):rl(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function rl(r,e,t,n,i){var s=1,o=r.length,f=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;s=2,o/=2,f/=2,t/=2}function l(P,q){return s===1?P[q]:P.readUInt16BE(q*s)}var h;if(i){var _=-1;for(h=t;h<o;h++)if(l(r,h)===l(e,_===-1?0:h-_)){if(_===-1&&(_=h),h-_+1===f)return _*s}else _!==-1&&(h-=h-_),_=-1}else for(t+f>o&&(t=o-f),h=t;h>=0;h--){for(var R=!0,x=0;x<f;x++)if(l(r,h+x)!==l(e,x)){R=!1;break}if(R)return h}return-1}D.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};D.prototype.indexOf=function(e,t,n){return tl(this,e,t,n,!0)};D.prototype.lastIndexOf=function(e,t,n){return tl(this,e,t,n,!1)};function im(r,e,t,n){t=Number(t)||0;var i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;var s=e.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var f=parseInt(e.substr(o*2,2),16);if(bo(f))return o;r[t+o]=f}return o}function om(r,e,t,n){return Xn(_o(e,r.length-t),r,t,n)}function sm(r,e,t,n){return Xn(vm(e),r,t,n)}function am(r,e,t,n){return Xn(ul(e),r,t,n)}function um(r,e,t,n){return Xn(ym(e,r.length-t),r,t,n)}D.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return im(this,e,t,n);case"utf8":case"utf-8":return om(this,e,t,n);case"ascii":case"latin1":case"binary":return sm(this,e,t,n);case"base64":return am(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return um(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};D.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function cm(r,e,t){return e===0&&t===r.length?vo.fromByteArray(r):vo.fromByteArray(r.slice(e,t))}function nl(r,e,t){t=Math.min(r.length,t);for(var n=[],i=e;i<t;){var s=r[i],o=null,f=s>239?4:s>223?3:s>191?2:1;if(i+f<=t){var l,h,_,R;switch(f){case 1:s<128&&(o=s);break;case 2:l=r[i+1],(l&192)==128&&(R=(s&31)<<6|l&63,R>127&&(o=R));break;case 3:l=r[i+1],h=r[i+2],(l&192)==128&&(h&192)==128&&(R=(s&15)<<12|(l&63)<<6|h&63,R>2047&&(R<55296||R>57343)&&(o=R));break;case 4:l=r[i+1],h=r[i+2],_=r[i+3],(l&192)==128&&(h&192)==128&&(_&192)==128&&(R=(s&15)<<18|(l&63)<<12|(h&63)<<6|_&63,R>65535&&R<1114112&&(o=R))}}o===null?(o=65533,f=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=f}return lm(n)}var il=4096;function lm(r){var e=r.length;if(e<=il)return String.fromCharCode.apply(String,r);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=il));return t}function dm(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function fm(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function pm(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var i="",s=e;s<t;++s)i+=Cm[r[s]];return i}function hm(r,e,t){for(var n=r.slice(e,t),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}D.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,D.prototype),i};function je(r,e,t){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}D.prototype.readUintLE=D.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||je(e,t,this.length);for(var i=this[e],s=1,o=0;++o<t&&(s*=256);)i+=this[e+o]*s;return i};D.prototype.readUintBE=D.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||je(e,t,this.length);for(var i=this[e+--t],s=1;t>0&&(s*=256);)i+=this[e+--t]*s;return i};D.prototype.readUint8=D.prototype.readUInt8=function(e,t){return e=e>>>0,t||je(e,1,this.length),this[e]};D.prototype.readUint16LE=D.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||je(e,2,this.length),this[e]|this[e+1]<<8};D.prototype.readUint16BE=D.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||je(e,2,this.length),this[e]<<8|this[e+1]};D.prototype.readUint32LE=D.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||je(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};D.prototype.readUint32BE=D.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||je(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};D.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||je(e,t,this.length);for(var i=this[e],s=1,o=0;++o<t&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};D.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||je(e,t,this.length);for(var i=t,s=1,o=this[e+--i];i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*t)),o};D.prototype.readInt8=function(e,t){return e=e>>>0,t||je(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};D.prototype.readInt16LE=function(e,t){e=e>>>0,t||je(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};D.prototype.readInt16BE=function(e,t){e=e>>>0,t||je(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};D.prototype.readInt32LE=function(e,t){return e=e>>>0,t||je(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};D.prototype.readInt32BE=function(e,t){return e=e>>>0,t||je(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};D.prototype.readFloatLE=function(e,t){return e=e>>>0,t||je(e,4,this.length),Lr.read(this,e,!0,23,4)};D.prototype.readFloatBE=function(e,t){return e=e>>>0,t||je(e,4,this.length),Lr.read(this,e,!1,23,4)};D.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||je(e,8,this.length),Lr.read(this,e,!0,52,8)};D.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||je(e,8,this.length),Lr.read(this,e,!1,52,8)};function Je(r,e,t,n,i,s){if(!D.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}D.prototype.writeUintLE=D.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){var s=Math.pow(2,8*n)-1;Je(this,e,t,n,s,0)}var o=1,f=0;for(this[t]=e&255;++f<n&&(o*=256);)this[t+f]=e/o&255;return t+n};D.prototype.writeUintBE=D.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){var s=Math.pow(2,8*n)-1;Je(this,e,t,n,s,0)}var o=n-1,f=1;for(this[t+o]=e&255;--o>=0&&(f*=256);)this[t+o]=e/f&255;return t+n};D.prototype.writeUint8=D.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Je(this,e,t,1,255,0),this[t]=e&255,t+1};D.prototype.writeUint16LE=D.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Je(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};D.prototype.writeUint16BE=D.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Je(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};D.prototype.writeUint32LE=D.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Je(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};D.prototype.writeUint32BE=D.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Je(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};D.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){var s=Math.pow(2,8*n-1);Je(this,e,t,n,s-1,-s)}var o=0,f=1,l=0;for(this[t]=e&255;++o<n&&(f*=256);)e<0&&l===0&&this[t+o-1]!==0&&(l=1),this[t+o]=(e/f>>0)-l&255;return t+n};D.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){var s=Math.pow(2,8*n-1);Je(this,e,t,n,s-1,-s)}var o=n-1,f=1,l=0;for(this[t+o]=e&255;--o>=0&&(f*=256);)e<0&&l===0&&this[t+o+1]!==0&&(l=1),this[t+o]=(e/f>>0)-l&255;return t+n};D.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Je(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};D.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Je(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};D.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Je(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};D.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Je(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};D.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Je(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function ol(r,e,t,n,i,s){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function sl(r,e,t,n,i){return e=+e,t=t>>>0,i||ol(r,e,t,4,34028234663852886e22,-34028234663852886e22),Lr.write(r,e,t,n,23,4),t+4}D.prototype.writeFloatLE=function(e,t,n){return sl(this,e,t,!0,n)};D.prototype.writeFloatBE=function(e,t,n){return sl(this,e,t,!1,n)};function al(r,e,t,n,i){return e=+e,t=t>>>0,i||ol(r,e,t,8,17976931348623157e292,-17976931348623157e292),Lr.write(r,e,t,n,52,8),t+8}D.prototype.writeDoubleLE=function(e,t,n){return al(this,e,t,!0,n)};D.prototype.writeDoubleBE=function(e,t,n){return al(this,e,t,!1,n)};D.prototype.copy=function(e,t,n,i){if(!D.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),s};D.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!D.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){var s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{var f=D.isBuffer(e)?e:D.from(e,i),l=f.length;if(l===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=f[o%l]}return this};var gm=/[^+/0-9A-Za-z-_]/g;function mm(r){if(r=r.split("=")[0],r=r.trim().replace(gm,""),r.length<2)return"";for(;r.length%4!=0;)r=r+"=";return r}function _o(r,e){e=e||1/0;for(var t,n=r.length,i=null,s=[],o=0;o<n;++o){if(t=r.charCodeAt(o),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function vm(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function ym(r,e){for(var t,n,i,s=[],o=0;o<r.length&&!((e-=2)<0);++o)t=r.charCodeAt(o),n=t>>8,i=t%256,s.push(i),s.push(n);return s}function ul(r){return vo.toByteArray(mm(r))}function Xn(r,e,t,n){for(var i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function Tt(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function bo(r){return r!==r}var Cm=function(){for(var r="0123456789abcdef",e=new Array(256),t=0;t<16;++t)for(var n=t*16,i=0;i<16;++i)e[n+i]=r[t]+r[i];return e}()});To(exports,{activate:()=>wm});var ll=Cr(qc()),Yt=Cr(uo()),B=Cr(require("vscode"));var Oe=Cr(require("vscode"));"use strict";function jc(r,e,t){let n=[];Oe.workspace.onDidChangeTextDocument(l=>f(l.document,l.contentChanges),null,n);let i=!1;o(),Oe.window.onDidChangeActiveTextEditor(o,null,n);let s;function o(){i=!1;let l=Oe.window.activeTextEditor;if(!l)return;let h=l.document;!e[h.languageId]||!Oe.workspace.getConfiguration(void 0,h.uri).get(t)||(i=!0)}function f(l,h){var O;if(!i)return;let _=Oe.window.activeTextEditor&&Oe.window.activeTextEditor.document;if(l!==_||h.length===0)return;typeof s!="undefined"&&clearTimeout(s);let R=h[h.length-1],x=R.text[R.text.length-1];if("range"in R&&((O=R.rangeLength)!=null?O:0)>0||x!==">"&&x!=="/")return;let P="range"in R?R.range.start:new Oe.Position(0,l.getText().length),q=l.version;s=setTimeout(()=>{let X=new Oe.Position(P.line,P.character+R.text.length);r(l,X).then(F=>{if(F&&i){let I=Oe.window.activeTextEditor;if(I){let $=I.document;if(l===$&&$.version===q){let W=I.selections;W.length&&W.some(U=>U.active.isEqual(X))?I.insertSnippet(new Oe.SnippetString(F),W.map(U=>U.active)):I.insertSnippet(new Oe.SnippetString(F),X)}}}}),s=void 0},100)}return Oe.Disposable.from(...n)}var co=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];var mt=Cr(require("vscode"));function Fc(r){return Buffer.from(r,"base64").toString("utf8")}function Oc(r){return Buffer.from(r,"utf8").toString("base64")}var pg=typeof global=="object"&&global&&global.Object===Object&&global,Ic=pg;var hg=typeof self=="object"&&self&&self.Object===Object&&self,gg=Ic||hg||Function("return this")(),$n=gg;var mg=$n.Symbol,Ir=mg;var Lc=Object.prototype,vg=Lc.hasOwnProperty,yg=Lc.toString,sn=Ir?Ir.toStringTag:void 0;function Cg(r){var e=vg.call(r,sn),t=r[sn];try{r[sn]=void 0;var n=!0}catch{}var i=yg.call(r);return n&&(e?r[sn]=t:delete r[sn]),i}var Nc=Cg;var wg=Object.prototype,Rg=wg.toString;function _g(r){return Rg.call(r)}var Ac=_g;var bg="[object Null]",xg="[object Undefined]",Mc=Ir?Ir.toStringTag:void 0;function Tg(r){return r==null?r===void 0?xg:bg:Mc&&Mc in Object(r)?Nc(r):Ac(r)}var Wc=Tg;function Dg(r){return r!=null&&typeof r=="object"}var Hc=Dg;var Sg="[object Symbol]";function Pg(r){return typeof r=="symbol"||Hc(r)&&Wc(r)==Sg}var Bc=Pg;var Eg=/\s/;function kg(r){for(var e=r.length;e--&&Eg.test(r.charAt(e)););return e}var Uc=kg;var qg=/^\s+/;function jg(r){return r&&r.slice(0,Uc(r)+1).replace(qg,"")}var Kc=jg;function Fg(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var an=Fg;var zc=0/0,Og=/^[-+]0x[0-9a-f]+$/i,Ig=/^0b[01]+$/i,Lg=/^0o[0-7]+$/i,Ng=parseInt;function Ag(r){if(typeof r=="number")return r;if(Bc(r))return zc;if(an(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=an(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=Kc(r);var t=Ig.test(r);return t||Lg.test(r)?Ng(r.slice(2),t?2:8):Og.test(r)?zc:+r}var lo=Ag;var Mg=function(){return $n.Date.now()},Jn=Mg;var Wg="Expected a function",Hg=Math.max,Bg=Math.min;function Ug(r,e,t){var n,i,s,o,f,l,h=0,_=!1,R=!1,x=!0;if(typeof r!="function")throw new TypeError(Wg);e=lo(e)||0,an(t)&&(_=!!t.leading,R="maxWait"in t,s=R?Hg(lo(t.maxWait)||0,e):s,x="trailing"in t?!!t.trailing:x);function P(V){var se=n,de=i;return n=i=void 0,h=V,o=r.apply(de,se),o}function q(V){return h=V,f=setTimeout(F,e),_?P(V):o}function O(V){var se=V-l,de=V-h,fe=e-se;return R?Bg(fe,s-de):fe}function X(V){var se=V-l,de=V-h;return l===void 0||se>=e||se<0||R&&de>=s}function F(){var V=Jn();if(X(V))return I(V);f=setTimeout(F,O(V))}function I(V){return f=void 0,x&&n?P(V):(n=i=void 0,o)}function $(){f!==void 0&&clearTimeout(f),h=0,n=l=i=f=void 0}function W(){return f===void 0?o:I(Jn())}function U(){var V=Jn(),se=X(V);if(n=arguments,i=this,l=V,se){if(f===void 0)return q(l);if(R)return clearTimeout(f),f=setTimeout(F,e),P(l)}return f===void 0&&(f=setTimeout(F,e)),o}return U.cancel=$,U.flush=W,U}var fo=Ug;var po="svelte-compiled";function $c(r,e){r=typeof r=="string"?mt.Uri.parse(r):r;let t=Oc(r.toString()),n=r.with({scheme:po,fragment:t,path:r.path+".js"});return e?n.toString():n}function ho(r,e){r=typeof r=="string"?mt.Uri.parse(r):r;let t=Fc(r.fragment);return e?t:mt.Uri.parse(t)}var At=class{constructor(e){this.getLanguageClient=e;this.disposed=!1;this.didChangeEmitter=new mt.EventEmitter;this.subscriptions=[];this.watchedSourceUri=new Set;this.subscriptions.push(mt.workspace.onDidChangeTextDocument(fo(async t=>{if(t.document.languageId!=="svelte")return;let n=t.document.uri.toString();this.watchedSourceUri.has(n)&&this.didChangeEmitter.fire($c(n))},500))),mt.window.onDidChangeVisibleTextEditors(t=>{let n=t.filter(i=>{var s,o;return((o=(s=i==null?void 0:i.document)==null?void 0:s.uri)==null?void 0:o.scheme)===po});this.watchedSourceUri=new Set(n.map(i=>ho(i.document.uri,!0)))})}get onDidChange(){return this.didChangeEmitter.event}async provideTextDocumentContent(e){var i;let t=ho(e,!0);this.watchedSourceUri.add(t);let n=await this.getLanguageClient().sendRequest("$/getCompiledCode",t);if((i=n==null?void 0:n.js)==null?void 0:i.code)return n.js.code;mt.window.setStatusBarMessage(`Svelte: fail to compile ${e.path}`,3e3)}dispose(){this.disposed||(this.didChangeEmitter.dispose(),this.subscriptions.forEach(e=>e.dispose()),this.subscriptions.length=0,this.disposed=!0)}};At.scheme=po,At.toSvelteSchemeUri=$c,At.fromSvelteSchemeUri=ho;Buffer=cl().Buffer;var Wt=[];function dl(){for(let r of Wt)r.dispose();Wt=[]}function wm(r){return Me(this,null,function*(){r.subscriptions.push({dispose:dl}),console.log("svelte client activation");let e=[{language:"plaintext"}];B.workspace.onDidSaveTextDocument(l=>Me(this,null,function*(){let h=l.uri.toString(!0).split(/\/|\\/);["tsconfig.json"].includes(h[h.length-1])&&(yield o(!1))}));let t=pl(r,yield fl(r)),n=t.start();Wt.push(n),t.onReady().then(()=>{console.log("svelte-web-ext server is ready");let h=jc((_,R)=>{let x=t.code2ProtocolConverter.asTextDocumentPositionParams(_,R);return t.sendRequest(new Yt.RequestType("html/tag"),x)},{svelte:!0},"html.autoClosingTags");Wt.push(h)}),Wt.push(B.commands.registerCommand("svelte.restartLanguageServer",()=>Me(this,null,function*(){yield o(!0)})));let i=!1,s;function o(l){return Me(this,null,function*(){i||(i=!0,yield t.stop(),dl(),t=pl(r,yield fl(r)),s=t.start(),Wt.push(s),yield t.onReady(),l&&B.window.showInformationMessage("Svelte language server restarted."),i=!1)})}function f(){return t}Rm(f),_m(f),bm(f,r),xm(f,r),B.languages.setLanguageConfiguration("svelte",{indentationRules:{increaseIndentPattern:/<(?!\?|(?:area|base|br|col|frame|hr|html|img|input|link|meta|param)\b|[^>]*\/>)([-_\.A-Za-z0-9]+)(?=\s|>)\b[^>]*>(?!.*<\/\1>)|<!--(?!.*-->)|\{[^}"']*$/,decreaseIndentPattern:/^\s*(<\/(?!html)[-_\.A-Za-z0-9]+\b[^>]*>|-->|\})/},wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\$\#\^\&\*\(\)\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\s]+)/g,onEnterRules:[{beforeText:new RegExp(`<(?!(?:${co.join("|")}))([_:\\w][_:\\w-.\\d]*)([^/>]*(?!/)>)[^<]*$`,"i"),afterText:/^<\/([_:\w][_:\w-.\d]*)\s*>/i,action:{indentAction:B.IndentAction.IndentOutdent}},{beforeText:new RegExp(`<(?!(?:${co.join("|")}))(\\w[\\w\\d]*)([^/>]*(?!/)>)[^<]*$`,"i"),action:{indentAction:B.IndentAction.Indent}}]})})}function fl(r){return Me(this,null,function*(){var i,s,o;let e=yield Tm((s=(i=B.workspace.workspaceFolders)==null?void 0:i.map(f=>f.uri))!=null?s:[],[".svelte",".ts","tsconfig.json"]),t=JSON.stringify({compilerOptions:{lib:["DOM","ES2015"],module:"ES6",target:"ES6",rootDir:"/"}});if((o=B.workspace.workspaceFolders)==null?void 0:o.length){let f=B.Uri.joinPath(B.workspace.workspaceFolders[0].uri,"tsconfig.json");e[f.path]&&(t=e[f.path])}e["/tsconfig.json"]=t,e["/node_modules/svelte/index.d.ts"]='export * from "/node_modules/svelte/types/runtime/index"';let n=yield fetch(B.Uri.joinPath(r.extensionUri,"dist/allLibs.json").toString()).then(f=>f.json());for(let[f,l]of Object.entries(n.svelte))e["/node_modules/svelte/"+f]=l;for(let[f,l]of Object.entries(n.svelte2tsx))e["/"+f]=l;for(let[f,l]of Object.entries(n.tslibs))e["/"+f]=l;return{documentSelector:["svelte"],revealOutputChannelOn:Yt.RevealOutputChannelOn.Never,synchronize:{configurationSection:["svelte","javascript","typescript","prettier"],fileEvents:B.workspace.createFileSystemWatcher("{**/*.js,**/*.ts,**/*.svelte}",!1,!1,!1)},initializationOptions:{configuration:JSON.parse(JSON.stringify({svelte:B.workspace.getConfiguration("svelte"),prettier:B.workspace.getConfiguration("prettier"),emmet:B.workspace.getConfiguration("emmet"),typescript:B.workspace.getConfiguration("typescript"),javascript:B.workspace.getConfiguration("javascript")})),filesys:e,dontFilterIncompleteCompletions:!0,isTrusted:B.workspace.isTrusted}}})}function pl(r,e){let t=B.Uri.joinPath(r.extensionUri,"dist/web/server.js"),n=new Worker(t.toString());return new ll.LanguageClient("svelte-web-ext","Svelte Web Extension",e,n)}function Rm(r){B.workspace.onDidChangeTextDocument(e=>{(e.document.languageId==="typescript"||e.document.languageId==="javascript")&&r().sendNotification("$/onDidChangeTsOrJsFile",{uri:e.document.uri.toString(!0),changes:e.contentChanges.map(t=>({range:{start:{line:t.range.start.line,character:t.range.start.character},end:{line:t.range.end.line,character:t.range.end.character}},text:t.text}))})})}function _m(r){B.workspace.onDidRenameFiles(e=>Me(this,null,function*(){let t=e.files[0].oldUri.toString(!0),n=t.split(/\/|\\/),i=n[n.length-1];i.includes(".")&&![".ts",".js",".json",".svelte"].some(s=>i.endsWith(s))||B.window.withProgress({location:B.ProgressLocation.Window,title:"Updating Imports.."},()=>Me(this,null,function*(){var f;let s=yield r().sendRequest("$/getEditsForFileRename",{oldUri:t,newUri:e.files[0].newUri.toString(!0)});if(!s)return;let o=new B.WorkspaceEdit;(f=s.documentChanges)==null||f.filter(Yt.TextDocumentEdit.is).forEach(l=>l.edits.forEach(h=>{o.replace(B.Uri.parse(l.textDocument.uri),new B.Range(new B.Position(h.range.start.line,h.range.start.character),new B.Position(h.range.end.line,h.range.end.character)),h.newText)})),B.workspace.applyEdit(o)}))}))}function bm(r,e){let t=new At(r);Wt.push(B.workspace.registerTextDocumentContentProvider(At.scheme,t),t),Wt.push(B.commands.registerTextEditorCommand("svelte.showCompiledCodeToSide",n=>Me(this,null,function*(){var o;if(((o=n==null?void 0:n.document)==null?void 0:o.languageId)!=="svelte")return;let i=n.document.uri,s=At.toSvelteSchemeUri(i);B.window.withProgress({location:B.ProgressLocation.Window,title:"Compiling.."},()=>Me(this,null,function*(){return yield B.window.showTextDocument(s,{preview:!0,viewColumn:B.ViewColumn.Beside})}))})))}function xm(r,e){Wt.push(B.commands.registerTextEditorCommand("svelte.extractComponent",t=>Me(this,null,function*(){var i;if(((i=t==null?void 0:t.document)==null?void 0:i.languageId)!=="svelte")return;let n={prompt:"Component Name: ",placeHolder:"NewComponent"};B.window.showInputBox(n).then(s=>Me(this,null,function*(){if(!s)return B.window.showErrorMessage("No component name");let o=t.document.uri.toString(),f=t.selection;r().sendRequest(Yt.ExecuteCommandRequest.type,{command:"extract_to_svelte_component",arguments:[o,{uri:o,range:f,filePath:s}]})}))})))}function Tm(r,e){return Me(this,null,function*(){let t={},n={},i=0,s=0;function o(f,l){return Me(this,null,function*(){try{let h=(yield B.workspace.fs.readDirectory(f)).sort(),_=h.flatMap(x=>x[1]===B.FileType.File?[B.Uri.joinPath(f,x[0])]:[]),R=h.flatMap(x=>x[1]===B.FileType.Directory?[B.Uri.joinPath(f,x[0])]:[]);for(let x of _)e.find(P=>x.path.endsWith(P))&&(yield l(x));for(let x of R)x.path.includes("node_modules")||(yield o(x,l))}catch(h){if(h===t)throw h;console.warn("error while getting initial fs",h)}})}for(let f of r)yield o(f,l=>Me(this,null,function*(){if(i>1e3||s>1e7)throw t;let h=yield B.workspace.fs.readFile(l).then(_=>new TextDecoder().decode(_));n[l.path]=h,s+=h.length,i+=1})).catch(l=>{if(l===t)return n});return n})}
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
